// ==UserScript==
// @name          KG_Latest_Games
// @namespace     klavogonki
// @version      1.2.6
// @description   Fast game creation buttons on all the pages
// @match         *://klavogonki.ru/*
// @author        Patcher
// @icon          https://www.google.com/s2/favicons?sz=64&domain=klavogonki.ru
// ==/UserScript==

/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss":
/*!******************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss ***!
  \******************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"./node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:root.latest-games-light-theme {\n  --rg-bg-primary: hsl(0, 0%, 100%);\n  --rg-bg-secondary: hsl(0, 0%, 98%);\n  --rg-bg-card: hsl(0, 0%, 98%);\n  --rg-bg-card-pinned: hsl(120, 50%, 96%);\n  --rg-bg-hover: hsl(0, 0%, 96%);\n  --rg-border-primary: hsl(0, 0%, 88%);\n  --rg-border-hover: hsl(0, 0%, 74%);\n  --rg-border-pinned: hsl(122, 39%, 49%);\n  --rg-text-primary: hsl(0, 0%, 15%);\n  --rg-text-secondary: hsl(0, 0%, 40%);\n  --rg-text-tertiary: hsl(0, 0%, 55%);\n  --rg-text-options: hsl(0, 0%, 30%);\n  --rg-text-count: hsl(0, 0%, 15%);\n  --rg-gametype-voc: hsl(215, 75%, 50%);\n  --rg-gametype-normal: hsl(130, 50%, 30%);\n  --rg-gametype-abra: hsl(215, 20%, 40%);\n  --rg-gametype-referats: hsl(80, 55%, 30%);\n  --rg-gametype-noerror: hsl(200, 45%, 35%);\n  --rg-gametype-marathon: hsl(340, 65%, 45%);\n  --rg-gametype-chars: hsl(35, 100%, 30%);\n  --rg-gametype-digits: hsl(0, 0%, 50%);\n  --rg-gametype-sprint: hsl(5, 40%, 40%);\n  --rg-icon-primary: currentColor;\n  --rg-icon-pin: hsl(122, 39%, 49%);\n  --rg-icon-pin-fill: hsl(122, 39%, 49%);\n  --rg-icon-delete: hsl(4, 90%, 58%);\n  --rg-icon-theme-sun: hsl(48, 100%, 41%);\n  --rg-icon-theme-moon: hsl(207, 89%, 76%);\n  --rg-hover-pin: hsla(122, 39%, 49%, 0.2);\n  --rg-hover-delete: hsla(4, 90%, 58%, 0.2);\n  --rg-hover-control: hsl(0, 0%, 92%);\n  --rg-hover-control-btn: hsl(213, 77%, 96%);\n  --rg-bg-card-pinned-voc: hsl(215, 80%, 95%);\n  --rg-border-pinned-voc: hsl(215, 80%, 80%);\n  --rg-bg-card-pinned-normal: hsl(130, 50%, 90%);\n  --rg-border-pinned-normal: hsl(130, 50%, 70%);\n  --rg-bg-card-pinned-abra: hsl(215, 20%, 90%);\n  --rg-border-pinned-abra: hsl(215, 20%, 70%);\n  --rg-bg-card-pinned-referats: hsl(80, 55%, 90%);\n  --rg-border-pinned-referats: hsl(80, 55%, 70%);\n  --rg-bg-card-pinned-noerror: hsl(200, 45%, 90%);\n  --rg-border-pinned-noerror: hsl(200, 45%, 70%);\n  --rg-bg-card-pinned-marathon: hsl(340, 65%, 90%);\n  --rg-border-pinned-marathon: hsl(340, 65%, 70%);\n  --rg-bg-card-pinned-chars: hsl(35, 100%, 90%);\n  --rg-border-pinned-chars: hsl(35, 100%, 70%);\n  --rg-bg-card-pinned-digits: hsl(0, 0%, 90%);\n  --rg-border-pinned-digits: hsl(0, 0%, 70%);\n  --rg-bg-card-pinned-sprint: hsl(5, 40%, 90%);\n  --rg-border-pinned-sprint: hsl(5, 40%, 70%);\n  --rg-bg-tab: hsl(0, 0%, 97%);\n  --rg-bg-tab-hover: hsl(0, 0%, 94%);\n  --rg-bg-tab-active: hsl(0, 0%, 100%);\n  --rg-icon-accent: hsl(215, 75%, 50%);\n  --rg-qualification-icon: hsl(48, 100%, 41%);\n  --rg-panel-toggle-background: hsl(215, 80%, 95%);\n  --rg-panel-toggle-stroke: hsl(215, 75%, 50%);\n  --rg-panel-toggle-border: hsl(215, 80%, 80%);\n  --rg-panel-toggle-bg-hover: hsl(215, 80%, 88%);\n  --rg-header-text: hsl(77, 100%, 30%);\n  --rg-rank-slider-track-bg: hsl(215, 80%, 95%);\n  --rg-rank-slider-border: hsl(215, 80%, 80%);\n  --rg-rank-slider-range: hsl(215, 80%, 80%);\n  --rg-rank-slider-handle-bg: hsl(215, 80%, 95%);\n  --rg-rank-slider-border-focus: hsl(215, 80%, 60%);\n}\n:root.latest-games-dark-theme {\n  --rg-bg-primary: hsl(210, 10%, 11%);\n  --rg-bg-secondary: hsl(220, 10%, 15%);\n  --rg-bg-card: hsl(220, 10%, 15%);\n  --rg-bg-card-pinned: hsl(140, 20%, 15%);\n  --rg-bg-hover: hsl(220, 10%, 15%);\n  --rg-border-primary: hsl(220, 10%, 15%);\n  --rg-border-hover: hsl(0, 0%, 38%);\n  --rg-border-pinned: hsl(133, 43%, 47%);\n  --rg-text-primary: hsl(0, 0%, 88%);\n  --rg-text-secondary: hsl(0, 0%, 88%);\n  --rg-text-tertiary: hsl(0, 0%, 88%);\n  --rg-text-options: hsl(0, 0%, 88%);\n  --rg-text-count: hsl(48, 100%, 50%);\n  --rg-gametype-voc: hsl(215, 80%, 65%);\n  --rg-gametype-normal: hsl(130, 50%, 60%);\n  --rg-gametype-abra: hsl(215, 20%, 60%);\n  --rg-gametype-referats: hsl(80, 55%, 40%);\n  --rg-gametype-noerror: hsl(200, 45%, 65%);\n  --rg-gametype-marathon: hsl(340, 70%, 55%);\n  --rg-gametype-chars: hsl(35, 100%, 45%);\n  --rg-gametype-digits: hsl(0, 0%, 50%);\n  --rg-gametype-sprint: hsl(5, 40%, 60%);\n  --rg-icon-primary: hsl(207, 89%, 76%);\n  --rg-icon-pin: hsl(133, 43%, 47%);\n  --rg-icon-pin-fill: hsl(133, 43%, 47%);\n  --rg-icon-delete: hsl(4, 100%, 75%);\n  --rg-icon-theme-sun: hsl(48, 100%, 50%);\n  --rg-icon-theme-moon: hsl(207, 89%, 76%);\n  --rg-hover-pin: hsla(133, 43%, 47%, 0.2);\n  --rg-hover-delete: hsla(4, 100%, 75%, 0.2);\n  --rg-hover-control: hsl(0, 0%, 38%);\n  --rg-hover-control-btn: hsl(213, 81.6%, 29.8%);\n  --rg-bg-card-pinned-voc: hsl(215, 80%, 10%);\n  --rg-border-pinned-voc: hsl(215, 80%, 30%);\n  --rg-bg-card-pinned-normal: hsl(130, 50%, 10%);\n  --rg-border-pinned-normal: hsl(130, 50%, 30%);\n  --rg-bg-card-pinned-abra: hsl(215, 20%, 10%);\n  --rg-border-pinned-abra: hsl(215, 20%, 30%);\n  --rg-bg-card-pinned-referats: hsl(80, 55%, 10%);\n  --rg-border-pinned-referats: hsl(80, 55%, 30%);\n  --rg-bg-card-pinned-noerror: hsl(200, 45%, 10%);\n  --rg-border-pinned-noerror: hsl(200, 45%, 30%);\n  --rg-bg-card-pinned-marathon: hsl(340, 65%, 10%);\n  --rg-border-pinned-marathon: hsl(340, 65%, 30%);\n  --rg-bg-card-pinned-chars: hsl(40, 100%, 10%);\n  --rg-border-pinned-chars: hsl(40, 100%, 30%);\n  --rg-bg-card-pinned-digits: hsl(0, 0%, 10%);\n  --rg-border-pinned-digits: hsl(0, 0%, 30%);\n  --rg-bg-card-pinned-sprint: hsl(5, 40%, 10%);\n  --rg-border-pinned-sprint: hsl(5, 40%, 30%);\n  --rg-bg-tab: hsl(220, 10%, 15%);\n  --rg-bg-tab-hover: hsl(220, 10%, 18%);\n  --rg-bg-tab-active: hsl(210, 10%, 11%);\n  --rg-icon-accent: hsl(207, 89%, 76%);\n  --rg-qualification-icon: hsl(48, 100%, 50%);\n  --rg-panel-toggle-background: hsl(215, 80%, 20%);\n  --rg-panel-toggle-stroke: hsl(215, 80%, 65%);\n  --rg-panel-toggle-border: hsl(215, 80%, 30%);\n  --rg-panel-toggle-bg-hover: hsl(215, 80%, 25%);\n  --rg-header-text: hsl(48, 100%, 50%);\n  --rg-rank-slider-track-bg: hsl(215, 80%, 10%);\n  --rg-rank-slider-border: hsl(215, 80%, 30%);\n  --rg-rank-slider-range: hsl(215, 80%, 30%);\n  --rg-rank-slider-handle-bg: hsl(215, 80%, 10%);\n  --rg-rank-slider-border-focus: hsl(215, 80%, 50%);\n}\n\n#latest-games-container {\n  display: flex;\n  flex-direction: column;\n  font-family: \"Montserrat\", sans-serif;\n  position: fixed;\n  top: 50px;\n  width: auto;\n  min-width: 200px;\n  max-width: 330px;\n  max-height: calc(100vh - 100px);\n  background-color: var(--rg-bg-primary);\n  border: 1px solid var(--rg-border-primary);\n  border-left: none;\n  border-radius: 0 8px 8px 0 !important;\n  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1) !important;\n  z-index: 1020;\n  padding: 10px 0;\n  opacity: 0;\n  pointer-events: none;\n  user-select: none;\n  transition: left 0.3s ease, opacity 0.3s ease;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-width: none;\n  color: var(--rg-text-primary);\n}\n#latest-games-container.visible {\n  left: 0 !important;\n  opacity: 1;\n  pointer-events: auto;\n  user-select: auto;\n}\n#latest-games-container.display-mode-wrap {\n  max-width: none;\n  width: 95vw;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  position: fixed;\n}\n#latest-games-container.display-mode-wrap .resize-handle {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 10px;\n  height: 100%;\n  cursor: ew-resize;\n  background-color: transparent;\n  z-index: 1021;\n}\n#latest-games-container.display-mode-wrap .latest-games-controls {\n  flex-direction: row;\n}\n#latest-games-container #latest-games {\n  margin: 0;\n  position: relative;\n  padding: 0;\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n#latest-games-container #latest-games .group-header {\n  display: inline-flex;\n  padding: 5px 15px;\n  max-width: 300px;\n  font: 600 14px \"Montserrat\", sans-serif;\n  border-radius: 4px !important;\n  background: var(--rg-bg-card);\n  color: var(--rg-text-primary);\n  border: 2px solid var(--rg-border-primary);\n  cursor: pointer;\n  user-select: none;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  height: fit-content;\n  width: 100%;\n  margin: 0 10px;\n}\n#latest-games-container #latest-games .group-header:hover, #latest-games-container #latest-games .group-header:focus {\n  border-color: var(--rg-border-hover);\n  background: var(--rg-bg-hover);\n  color: var(--rg-text-primary);\n}\n#latest-games-container #latest-games .group-header.active {\n  border: 2px solid var(--rg-border-pinned-voc);\n  background: var(--rg-bg-card-pinned-voc);\n  color: var(--rg-gametype-voc) !important;\n  z-index: 1;\n}\n#latest-games-container #latest-games.display-mode-wrap {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  width: 100%;\n  max-height: none;\n  overflow-y: visible;\n  margin: 0 10px;\n}\n#latest-games-container #latest-games.display-mode-wrap .latest-game,\n#latest-games-container #latest-games.display-mode-wrap .group-header {\n  margin: 0 !important;\n  max-width: none;\n}\n#latest-games-container #latest-games .latest-game {\n  position: relative;\n  margin: 0 10px;\n  border: 1px solid var(--rg-border-primary);\n  border-radius: 4px !important;\n  background-color: var(--rg-bg-card);\n  transition: all 0.2s ease;\n  display: inline-flex;\n  max-width: 300px;\n}\n#latest-games-container #latest-games .latest-game.pin-game {\n  cursor: move;\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-voc {\n  border: 2px solid var(--rg-border-pinned-voc);\n  background-color: var(--rg-bg-card-pinned-voc);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-normal {\n  border: 2px solid var(--rg-border-pinned-normal);\n  background-color: var(--rg-bg-card-pinned-normal);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-abra {\n  border: 2px solid var(--rg-border-pinned-abra);\n  background-color: var(--rg-bg-card-pinned-abra);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-referats {\n  border: 2px solid var(--rg-border-pinned-referats);\n  background-color: var(--rg-bg-card-pinned-referats);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-noerror {\n  border: 2px solid var(--rg-border-pinned-noerror);\n  background-color: var(--rg-bg-card-pinned-noerror);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-marathon {\n  border: 2px solid var(--rg-border-pinned-marathon);\n  background-color: var(--rg-bg-card-pinned-marathon);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-chars {\n  border: 2px solid var(--rg-border-pinned-chars);\n  background-color: var(--rg-bg-card-pinned-chars);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-digits {\n  border: 2px solid var(--rg-border-pinned-digits);\n  background-color: var(--rg-bg-card-pinned-digits);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-sprint {\n  border: 2px solid var(--rg-border-pinned-sprint);\n  background-color: var(--rg-bg-card-pinned-sprint);\n}\n#latest-games-container #latest-games .latest-game:hover {\n  border-color: var(--rg-border-hover);\n  background-color: var(--rg-bg-hover);\n  transform: translateX(2px);\n}\n#latest-games-container #latest-games .latest-game.dragging {\n  opacity: 0.7;\n  z-index: 1021;\n  transition: transform 0.1s ease;\n}\n#latest-games-container #latest-games .latest-game.display-mode-wrap {\n  margin: 0;\n}\n#latest-games-container #latest-games .latest-game a {\n  display: block;\n  width: 100%;\n  padding: 5px 15px;\n  text-decoration: none;\n  color: inherit;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name {\n  display: block;\n  font-weight: bold;\n  font-size: 12px;\n  margin-bottom: 2px;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-voc {\n  color: var(--rg-gametype-voc) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-normal {\n  color: var(--rg-gametype-normal) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-abra {\n  color: var(--rg-gametype-abra) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-referats {\n  color: var(--rg-gametype-referats) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-noerror {\n  color: var(--rg-gametype-noerror) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-marathon {\n  color: var(--rg-gametype-marathon) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-chars {\n  color: var(--rg-gametype-chars) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-digits {\n  color: var(--rg-gametype-digits) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-sprint {\n  color: var(--rg-gametype-sprint) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-description {\n  display: inline-flex;\n  font-size: 10px;\n  color: var(--rg-text-secondary);\n}\n#latest-games-container #latest-games .latest-game .latest-game-qual {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: 4px;\n}\n#latest-games-container #latest-games .latest-game .latest-game-qual svg {\n  width: 14px;\n  height: 14px;\n}\n#latest-games-container #latest-games .latest-game .latest-game-levels {\n  display: block;\n  font-size: 9px;\n  color: var(--rg-text-tertiary);\n  margin-top: 1px;\n}\n#latest-games-container #latest-games .latest-game .latest-game-buttons {\n  position: relative;\n  justify-content: space-around;\n  display: flex;\n  flex-direction: column;\n  margin-right: 2px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  order: 1;\n}\n#latest-games-container #latest-games .latest-game:hover .latest-game-buttons {\n  opacity: 1;\n}\n#latest-games-container #latest-games .latest-game .latest-game-pin,\n#latest-games-container #latest-games .latest-game .latest-game-delete {\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n  border-radius: 2px !important;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.2s ease;\n}\n#latest-games-container #latest-games .latest-game .latest-game-pin:hover,\n#latest-games-container #latest-games .latest-game .latest-game-delete:hover {\n  background-color: var(--rg-hover-pin);\n}\n#latest-games-container #latest-games .latest-game .latest-game-pin svg,\n#latest-games-container #latest-games .latest-game .latest-game-delete svg {\n  width: 10px;\n  height: 10px;\n  opacity: 0.6;\n  stroke: var(--rg-icon-pin-fill);\n}\n#latest-games-container #latest-games .latest-game .latest-game-pin:hover svg,\n#latest-games-container #latest-games .latest-game .latest-game-delete:hover svg {\n  opacity: 1;\n}\n#latest-games-container #latest-games .latest-game .latest-game-delete:hover {\n  background-color: var(--rg-hover-delete);\n}\n#latest-games-container #latest-games .latest-game .latest-game-delete svg {\n  stroke: var(--rg-icon-delete);\n  fill: none;\n}\n#latest-games-container .latest-games-controls {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: 0 10px;\n  margin-top: 10px;\n}\n#latest-games-container .latest-games-controls .controls-buttons {\n  gap: 2px;\n}\n#latest-games-container .latest-games-controls .controls-buttons {\n  display: inline-flex;\n}\n#latest-games-container #latest-games-options {\n  display: flex;\n  align-items: center;\n  font-size: 13px;\n  gap: 5px;\n  color: var(--rg-text-options);\n  user-select: none;\n}\n#latest-games-container #latest-games-count {\n  margin: 0 6px;\n  font-weight: bold;\n  font-size: 14px;\n  min-width: 18px;\n  text-align: center;\n  color: var(--rg-text-count);\n  cursor: pointer;\n}\n#latest-games-container #latest-games-count-inc,\n#latest-games-container #latest-games-count-dec {\n  height: 24px;\n  width: 24px;\n  cursor: pointer;\n  font-size: 16px;\n  border-radius: 3px !important;\n  transition: background 0.15s;\n  user-select: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--rg-icon-primary);\n}\n#latest-games-container #latest-games-count-inc:hover,\n#latest-games-container #latest-games-count-dec:hover {\n  background: var(--rg-hover-control-btn);\n}\n#latest-games-container #latest-games-count-inc svg,\n#latest-games-container #latest-games-count-dec svg {\n  width: 16px;\n  height: 16px;\n}\n#latest-games-container .theme-toggle,\n#latest-games-container .display-mode-toggle,\n#latest-games-container .control-button {\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  border-radius: 4px;\n  transition: background 0.15s;\n  user-select: none;\n}\n#latest-games-container .theme-toggle svg,\n#latest-games-container .display-mode-toggle svg,\n#latest-games-container .control-button svg {\n  width: 16px;\n  height: 16px;\n  display: block;\n  transition: stroke 0.2s, fill 0.2s;\n}\n#latest-games-container .theme-toggle svg.feather-sun,\n#latest-games-container .display-mode-toggle svg.feather-sun,\n#latest-games-container .control-button svg.feather-sun {\n  stroke: var(--rg-icon-theme-sun);\n  fill: none;\n  stroke-width: 2;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n#latest-games-container .theme-toggle svg.feather-moon,\n#latest-games-container .display-mode-toggle svg.feather-moon,\n#latest-games-container .control-button svg.feather-moon {\n  stroke: var(--rg-icon-theme-moon);\n  fill: none;\n  stroke-width: 2;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n#latest-games-container .control-button {\n  box-sizing: border-box;\n}\n#latest-games-container .control-button svg {\n  pointer-events: none;\n}\n#latest-games-container #latest-games-groups {\n  display: flex;\n  flex-direction: column;\n  align-items: start;\n  margin-bottom: 0;\n}\n#latest-games-container #latest-games-groups .tabs-container {\n  display: inline-flex;\n  flex-direction: row;\n  gap: 5px;\n  flex-wrap: wrap;\n  align-items: center;\n  margin: 0 0 5px 10px;\n}\n#latest-games-container #latest-games-groups .group-tab {\n  display: inline-flex;\n  padding: 5px 15px;\n  max-width: 300px;\n  font: 600 14px \"Montserrat\", sans-serif;\n  border-radius: 4px !important;\n  background: var(--rg-bg-card);\n  color: var(--rg-text-primary);\n  border: 2px solid var(--rg-border-primary);\n  cursor: pointer;\n  user-select: none;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  height: fit-content;\n}\n#latest-games-container #latest-games-groups .group-tab:hover, #latest-games-container #latest-games-groups .group-tab:focus {\n  border-color: var(--rg-border-hover);\n  background: var(--rg-bg-hover);\n  color: var(--rg-text-primary);\n}\n#latest-games-container #latest-games-groups .group-tab.active {\n  border: 2px solid var(--rg-border-pinned-voc);\n  background: var(--rg-bg-card-pinned-voc);\n  color: var(--rg-gametype-voc) !important;\n  z-index: 1;\n}\n#latest-games-container #latest-games-groups .group-controls {\n  gap: 2px;\n  display: inline-flex;\n  align-items: center;\n  margin: 0 0 10px 10px;\n}\n\n.game-migration-popup,\n.vocabulary-creation-popup,\n.game-popup {\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n  padding: 5px;\n  background-color: var(--rg-bg-primary);\n  border: 1px solid var(--rg-border-primary);\n  border-radius: 8px !important;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important;\n  max-height: 50vh;\n  max-width: 400px;\n  overflow-y: auto;\n  scrollbar-width: none;\n  z-index: 1025;\n  user-select: none;\n}\n.game-migration-popup .popup-header-qualification,\n.vocabulary-creation-popup .popup-header-qualification,\n.game-popup .popup-header-qualification {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n}\n.game-migration-popup .popup-header,\n.vocabulary-creation-popup .popup-header,\n.game-popup .popup-header {\n  display: inline-flex;\n  font: 600 14px \"Montserrat\", sans-serif;\n  color: var(--rg-header-text);\n  padding: 6px;\n  justify-content: space-between;\n}\n.game-migration-popup .popup-subheader,\n.vocabulary-creation-popup .popup-subheader,\n.game-popup .popup-subheader {\n  font: 600 14px \"Montserrat\", sans-serif;\n  color: var(--rg-text-secondary);\n  padding: 6px;\n}\n.game-migration-popup .timeouts-container,\n.vocabulary-creation-popup .timeouts-container,\n.game-popup .timeouts-container {\n  display: flex;\n  flex-direction: row;\n  gap: 5px;\n}\n.game-migration-popup .timeouts-container .game-popup-button,\n.vocabulary-creation-popup .timeouts-container .game-popup-button,\n.game-popup .timeouts-container .game-popup-button {\n  display: inline-block;\n  padding: 5px 15px;\n  font: 600 14px \"Montserrat\", sans-serif;\n  border-radius: 4px !important;\n  background: var(--rg-bg-card) !important;\n  color: var(--rg-text-primary) !important;\n  border: 1.5px solid var(--rg-border-primary);\n  cursor: pointer;\n  user-select: none;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  text-align: left;\n  text-decoration: none;\n}\n.game-migration-popup .timeouts-container .game-popup-button:hover, .game-migration-popup .timeouts-container .game-popup-button:focus,\n.vocabulary-creation-popup .timeouts-container .game-popup-button:hover,\n.vocabulary-creation-popup .timeouts-container .game-popup-button:focus,\n.game-popup .timeouts-container .game-popup-button:hover,\n.game-popup .timeouts-container .game-popup-button:focus {\n  border-color: var(--rg-border-hover);\n  background: var(--rg-bg-hover);\n  color: var(--rg-text-primary);\n}\n.game-migration-popup .group-tab,\n.vocabulary-creation-popup .group-tab,\n.game-popup .group-tab {\n  display: inline-flex;\n  padding: 5px 15px;\n  max-width: 300px;\n  font: 600 14px \"Montserrat\", sans-serif;\n  border-radius: 4px !important;\n  background: var(--rg-bg-card);\n  color: var(--rg-text-primary);\n  border: 2px solid var(--rg-border-primary);\n  cursor: pointer;\n  user-select: none;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  height: fit-content;\n}\n.game-migration-popup .group-tab:hover, .game-migration-popup .group-tab:focus,\n.vocabulary-creation-popup .group-tab:hover,\n.vocabulary-creation-popup .group-tab:focus,\n.game-popup .group-tab:hover,\n.game-popup .group-tab:focus {\n  border-color: var(--rg-border-hover);\n  background: var(--rg-bg-hover);\n  color: var(--rg-text-primary);\n}\n.game-migration-popup .group-tab.active,\n.vocabulary-creation-popup .group-tab.active,\n.game-popup .group-tab.active {\n  border: 2px solid var(--rg-border-pinned-voc);\n  background: var(--rg-bg-card-pinned-voc);\n  color: var(--rg-gametype-voc) !important;\n  z-index: 1;\n}\n.game-migration-popup .rank-slider-container,\n.vocabulary-creation-popup .rank-slider-container,\n.game-popup .rank-slider-container {\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  margin: 6px;\n}\n.game-migration-popup .rank-slider-container .rank-slider-display,\n.vocabulary-creation-popup .rank-slider-container .rank-slider-display,\n.game-popup .rank-slider-container .rank-slider-display {\n  margin: 0 0 12px;\n  font: 600 14px \"Montserrat\", sans-serif;\n  color: var(--rg-text-secondary);\n}\n.game-migration-popup .rank-slider-container .rank-slider-track,\n.vocabulary-creation-popup .rank-slider-container .rank-slider-track,\n.game-popup .rank-slider-container .rank-slider-track {\n  position: relative;\n  height: 8px;\n  background: var(--rg-rank-slider-track-bg);\n  border-radius: 4px !important;\n  cursor: pointer;\n  border: 2px solid var(--rg-rank-slider-border);\n  box-sizing: border-box;\n}\n.game-migration-popup .rank-slider-container .rank-slider-range,\n.vocabulary-creation-popup .rank-slider-container .rank-slider-range,\n.game-popup .rank-slider-container .rank-slider-range {\n  position: absolute;\n  height: 100%;\n  background: var(--rg-rank-slider-range);\n  border-radius: 4px !important;\n  z-index: 1;\n}\n.game-migration-popup .rank-slider-container .rank-slider-handle,\n.vocabulary-creation-popup .rank-slider-container .rank-slider-handle,\n.game-popup .rank-slider-container .rank-slider-handle {\n  position: absolute;\n  top: 50%;\n  width: 18px;\n  height: 18px;\n  background: var(--rg-rank-slider-handle-bg);\n  border: 2px solid var(--rg-rank-slider-border);\n  border-radius: 50% !important;\n  transform: translate(-50%, -50%);\n  z-index: 2;\n  cursor: pointer;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08) !important;\n  transition: border-color 0.2s, background 0.2s;\n}\n.game-migration-popup .rank-slider-container .rank-slider-handle:focus,\n.vocabulary-creation-popup .rank-slider-container .rank-slider-handle:focus,\n.game-popup .rank-slider-container .rank-slider-handle:focus {\n  outline: none;\n  border-color: var(--rg-rank-slider-border-focus);\n}\n.game-migration-popup .rank-slider-container .rank-slider-handle.overlap-left,\n.vocabulary-creation-popup .rank-slider-container .rank-slider-handle.overlap-left,\n.game-popup .rank-slider-container .rank-slider-handle.overlap-left {\n  /* Move left handle fully to the left so it just touches the right handle */\n  transform: translate(-100%, -50%);\n}\n.game-migration-popup .rank-slider-container .rank-slider-handle.overlap-right,\n.vocabulary-creation-popup .rank-slider-container .rank-slider-handle.overlap-right,\n.game-popup .rank-slider-container .rank-slider-handle.overlap-right {\n  /* Move right handle fully to the right so it just touches the left handle */\n  transform: translate(0, -50%);\n}\n\n#latest-games-hover-area {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 4px;\n  height: 100vh;\n  z-index: 1023;\n  background-color: transparent;\n  pointer-events: auto;\n}\n\n.latest-games-panel-toggle {\n  position: fixed;\n  left: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: 1024;\n  background: var(--rg-panel-toggle-background);\n  border: 2px solid var(--rg-panel-toggle-border);\n  border-radius: 0 0.5em 0.5em 0 !important;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;\n  width: 40px;\n  height: 40px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  transition: background 0.2s;\n  outline: none;\n}\n.latest-games-panel-toggle:hover, .latest-games-panel-toggle:focus {\n  background: var(--rg-panel-toggle-bg-hover);\n}\n.latest-games-panel-toggle svg {\n  stroke: var(--rg-panel-toggle-stroke);\n  width: 1.5em;\n  height: 1.5em;\n  display: block;\n  pointer-events: none;\n}\n\n.custom-tooltip-popup {\n  position: fixed;\n  background: rgb(22, 22, 22);\n  color: rgb(222, 222, 222);\n  padding: 0.5em;\n  z-index: 1200;\n  font-size: 0.9em;\n  pointer-events: none;\n  white-space: nowrap;\n  opacity: 0;\n  transition: opacity 0.1s;\n  display: none;\n  flex-direction: column;\n  left: 0;\n  top: 0;\n  border: 1px solid rgb(60, 60, 60) !important;\n  border-radius: 4px !important;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3) !important;\n}\n.custom-tooltip-popup .tooltip-item {\n  display: inline-flex !important;\n  align-items: center !important;\n}\n.custom-tooltip-popup .tooltip-action {\n  font-weight: bold !important;\n  color: var(--rg-text-count) !important;\n}\n\n.vocabulary-tooltip-popup {\n  font: 500 14px \"Montserrat\", sans-serif;\n  position: fixed;\n  background: rgb(22, 22, 22);\n  color: rgb(222, 222, 222);\n  padding: 0.5em;\n  z-index: 1200;\n  font-size: 0.9em;\n  pointer-events: auto;\n  white-space: pre-wrap;\n  border: 1px solid rgb(60, 60, 60) !important;\n  border-radius: 4px !important;\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3) !important;\n  max-width: 700px;\n  width: auto;\n  max-height: 400px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-width: thin;\n  scrollbar-color: rgb(140, 140, 140) rgb(22, 22, 22);\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n}\n.vocabulary-tooltip-popup .tooltip-number {\n  color: rgb(140, 140, 140);\n  opacity: 0.8;\n}\n.vocabulary-tooltip-popup::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n.vocabulary-tooltip-popup::-webkit-scrollbar-track {\n  background: rgb(22, 22, 22) !important;\n}\n.vocabulary-tooltip-popup::-webkit-scrollbar-thumb {\n  background-color: rgb(140, 140, 140) !important;\n}\n.vocabulary-tooltip-popup::-webkit-scrollbar-thumb:hover {\n  background-color: rgb(160, 160, 160) !important;\n}\n\n.latest-games-disabled {\n  filter: grayscale(1);\n  opacity: 0.5;\n}\n\n.latest-games-hidden {\n  display: none !important;\n}`, \"\"]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/styles.scss?./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

eval("\r\n\r\n/*\r\n  MIT License http://www.opensource.org/licenses/mit-license.php\r\n  Author Tobias Koppers @sokra\r\n*/\r\nmodule.exports = function (cssWithMappingToString) {\r\n  var list = [];\r\n\r\n  // return the list of modules as css string\r\n  list.toString = function toString() {\r\n    return this.map(function (item) {\r\n      var content = \"\";\r\n      var needLayer = typeof item[5] !== \"undefined\";\r\n      if (item[4]) {\r\n        content += \"@supports (\".concat(item[4], \") {\");\r\n      }\r\n      if (item[2]) {\r\n        content += \"@media \".concat(item[2], \" {\");\r\n      }\r\n      if (needLayer) {\r\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\r\n      }\r\n      content += cssWithMappingToString(item);\r\n      if (needLayer) {\r\n        content += \"}\";\r\n      }\r\n      if (item[2]) {\r\n        content += \"}\";\r\n      }\r\n      if (item[4]) {\r\n        content += \"}\";\r\n      }\r\n      return content;\r\n    }).join(\"\");\r\n  };\r\n\r\n  // import a list of modules into the list\r\n  list.i = function i(modules, media, dedupe, supports, layer) {\r\n    if (typeof modules === \"string\") {\r\n      modules = [[null, modules, undefined]];\r\n    }\r\n    var alreadyImportedModules = {};\r\n    if (dedupe) {\r\n      for (var k = 0; k < this.length; k++) {\r\n        var id = this[k][0];\r\n        if (id != null) {\r\n          alreadyImportedModules[id] = true;\r\n        }\r\n      }\r\n    }\r\n    for (var _k = 0; _k < modules.length; _k++) {\r\n      var item = [].concat(modules[_k]);\r\n      if (dedupe && alreadyImportedModules[item[0]]) {\r\n        continue;\r\n      }\r\n      if (typeof layer !== \"undefined\") {\r\n        if (typeof item[5] === \"undefined\") {\r\n          item[5] = layer;\r\n        } else {\r\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\r\n          item[5] = layer;\r\n        }\r\n      }\r\n      if (media) {\r\n        if (!item[2]) {\r\n          item[2] = media;\r\n        } else {\r\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\r\n          item[2] = media;\r\n        }\r\n      }\r\n      if (supports) {\r\n        if (!item[4]) {\r\n          item[4] = \"\".concat(supports);\r\n        } else {\r\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\r\n          item[4] = supports;\r\n        }\r\n      }\r\n      list.push(item);\r\n    }\r\n  };\r\n  return list;\r\n};\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/css-loader/dist/runtime/api.js?");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/noSourceMaps.js":
/*!**************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/noSourceMaps.js ***!
  \**************************************************************/
/***/ ((module) => {

eval("\r\n\r\nmodule.exports = function (i) {\r\n  return i[1];\r\n};\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/css-loader/dist/runtime/noSourceMaps.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {

eval("\r\n\r\nvar stylesInDOM = [];\r\nfunction getIndexByIdentifier(identifier) {\r\n  var result = -1;\r\n  for (var i = 0; i < stylesInDOM.length; i++) {\r\n    if (stylesInDOM[i].identifier === identifier) {\r\n      result = i;\r\n      break;\r\n    }\r\n  }\r\n  return result;\r\n}\r\nfunction modulesToDom(list, options) {\r\n  var idCountMap = {};\r\n  var identifiers = [];\r\n  for (var i = 0; i < list.length; i++) {\r\n    var item = list[i];\r\n    var id = options.base ? item[0] + options.base : item[0];\r\n    var count = idCountMap[id] || 0;\r\n    var identifier = \"\".concat(id, \" \").concat(count);\r\n    idCountMap[id] = count + 1;\r\n    var indexByIdentifier = getIndexByIdentifier(identifier);\r\n    var obj = {\r\n      css: item[1],\r\n      media: item[2],\r\n      sourceMap: item[3],\r\n      supports: item[4],\r\n      layer: item[5]\r\n    };\r\n    if (indexByIdentifier !== -1) {\r\n      stylesInDOM[indexByIdentifier].references++;\r\n      stylesInDOM[indexByIdentifier].updater(obj);\r\n    } else {\r\n      var updater = addElementStyle(obj, options);\r\n      options.byIndex = i;\r\n      stylesInDOM.splice(i, 0, {\r\n        identifier: identifier,\r\n        updater: updater,\r\n        references: 1\r\n      });\r\n    }\r\n    identifiers.push(identifier);\r\n  }\r\n  return identifiers;\r\n}\r\nfunction addElementStyle(obj, options) {\r\n  var api = options.domAPI(options);\r\n  api.update(obj);\r\n  var updater = function updater(newObj) {\r\n    if (newObj) {\r\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\r\n        return;\r\n      }\r\n      api.update(obj = newObj);\r\n    } else {\r\n      api.remove();\r\n    }\r\n  };\r\n  return updater;\r\n}\r\nmodule.exports = function (list, options) {\r\n  options = options || {};\r\n  list = list || [];\r\n  var lastIdentifiers = modulesToDom(list, options);\r\n  return function update(newList) {\r\n    newList = newList || [];\r\n    for (var i = 0; i < lastIdentifiers.length; i++) {\r\n      var identifier = lastIdentifiers[i];\r\n      var index = getIndexByIdentifier(identifier);\r\n      stylesInDOM[index].references--;\r\n    }\r\n    var newLastIdentifiers = modulesToDom(newList, options);\r\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\r\n      var _identifier = lastIdentifiers[_i];\r\n      var _index = getIndexByIdentifier(_identifier);\r\n      if (stylesInDOM[_index].references === 0) {\r\n        stylesInDOM[_index].updater();\r\n        stylesInDOM.splice(_index, 1);\r\n      }\r\n    }\r\n    lastIdentifiers = newLastIdentifiers;\r\n  };\r\n};\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {

eval("\r\n\r\nvar memo = {};\r\n\r\n/* istanbul ignore next  */\r\nfunction getTarget(target) {\r\n  if (typeof memo[target] === \"undefined\") {\r\n    var styleTarget = document.querySelector(target);\r\n\r\n    // Special case to return head of iframe instead of iframe itself\r\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\r\n      try {\r\n        // This will throw an exception if access to iframe is blocked\r\n        // due to cross-origin restrictions\r\n        styleTarget = styleTarget.contentDocument.head;\r\n      } catch (e) {\r\n        // istanbul ignore next\r\n        styleTarget = null;\r\n      }\r\n    }\r\n    memo[target] = styleTarget;\r\n  }\r\n  return memo[target];\r\n}\r\n\r\n/* istanbul ignore next  */\r\nfunction insertBySelector(insert, style) {\r\n  var target = getTarget(insert);\r\n  if (!target) {\r\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\r\n  }\r\n  target.appendChild(style);\r\n}\r\nmodule.exports = insertBySelector;\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/insertBySelector.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {

eval("\r\n\r\n/* istanbul ignore next  */\r\nfunction insertStyleElement(options) {\r\n  var element = document.createElement(\"style\");\r\n  options.setAttributes(element, options.attributes);\r\n  options.insert(element, options.options);\r\n  return element;\r\n}\r\nmodule.exports = insertStyleElement;\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/insertStyleElement.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\r\n\r\n/* istanbul ignore next  */\r\nfunction setAttributesWithoutAttributes(styleElement) {\r\n  var nonce =  true ? __webpack_require__.nc : 0;\r\n  if (nonce) {\r\n    styleElement.setAttribute(\"nonce\", nonce);\r\n  }\r\n}\r\nmodule.exports = setAttributesWithoutAttributes;\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {

eval("\r\n\r\n/* istanbul ignore next  */\r\nfunction apply(styleElement, options, obj) {\r\n  var css = \"\";\r\n  if (obj.supports) {\r\n    css += \"@supports (\".concat(obj.supports, \") {\");\r\n  }\r\n  if (obj.media) {\r\n    css += \"@media \".concat(obj.media, \" {\");\r\n  }\r\n  var needLayer = typeof obj.layer !== \"undefined\";\r\n  if (needLayer) {\r\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\r\n  }\r\n  css += obj.css;\r\n  if (needLayer) {\r\n    css += \"}\";\r\n  }\r\n  if (obj.media) {\r\n    css += \"}\";\r\n  }\r\n  if (obj.supports) {\r\n    css += \"}\";\r\n  }\r\n  var sourceMap = obj.sourceMap;\r\n  if (sourceMap && typeof btoa !== \"undefined\") {\r\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\r\n  }\r\n\r\n  // For old IE\r\n  /* istanbul ignore if  */\r\n  options.styleTagTransform(css, styleElement, options.options);\r\n}\r\nfunction removeStyleElement(styleElement) {\r\n  // istanbul ignore if\r\n  if (styleElement.parentNode === null) {\r\n    return false;\r\n  }\r\n  styleElement.parentNode.removeChild(styleElement);\r\n}\r\n\r\n/* istanbul ignore next  */\r\nfunction domAPI(options) {\r\n  if (typeof document === \"undefined\") {\r\n    return {\r\n      update: function update() {},\r\n      remove: function remove() {}\r\n    };\r\n  }\r\n  var styleElement = options.insertStyleElement(options);\r\n  return {\r\n    update: function update(obj) {\r\n      apply(styleElement, options, obj);\r\n    },\r\n    remove: function remove() {\r\n      removeStyleElement(styleElement);\r\n    }\r\n  };\r\n}\r\nmodule.exports = domAPI;\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/styleDomAPI.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {

eval("\r\n\r\n/* istanbul ignore next  */\r\nfunction styleTagTransform(css, styleElement) {\r\n  if (styleElement.styleSheet) {\r\n    styleElement.styleSheet.cssText = css;\r\n  } else {\r\n    while (styleElement.firstChild) {\r\n      styleElement.removeChild(styleElement.firstChild);\r\n    }\r\n    styleElement.appendChild(document.createTextNode(css));\r\n  }\r\n}\r\nmodule.exports = styleTagTransform;\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/styleTagTransform.js?");

/***/ }),

/***/ "./src/definitions.js":
/*!****************************!*\
  !*** ./src/definitions.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULTS: () => (/* binding */ DEFAULTS),\n/* harmony export */   gameTypes: () => (/* binding */ gameTypes),\n/* harmony export */   ranks: () => (/* binding */ ranks),\n/* harmony export */   ranksMap: () => (/* binding */ ranksMap),\n/* harmony export */   timeouts: () => (/* binding */ timeouts),\n/* harmony export */   visibilities: () => (/* binding */ visibilities)\n/* harmony export */ });\nconst gameTypes = {\r\n  normal: 'Oбычный',\r\n  abra: 'Абракадабра',\r\n  referats: 'Яндекс.Рефераты',\r\n  noerror: 'Безошибочный',\r\n  marathon: 'Марафон',\r\n  chars: 'Буквы',\r\n  digits: 'Цифры',\r\n  sprint: 'Спринт',\r\n  voc: 'По словарю'\r\n};\r\n\r\nconst visibilities = {\r\n  normal: 'открытый',\r\n  practice: 'одиночный',\r\n  private: 'дружеский'\r\n};\r\n\r\nconst ranks = [\r\n  \"новички\", \"любители\", \"таксисты\", \"профи\",\r\n  \"гонщики\", \"маньяки\", \"супермены\", \"кибергонщики\", \"экстракиберы\"\r\n];\r\n\r\nconst ranksMap = {\r\n  'новичков': 1, 'любителей': 2, 'таксистов': 3, 'профи': 4,\r\n  'гонщиков': 5, 'маньяков': 6, 'суперменов': 7,\r\n  'кибергонщиков': 8, 'экстракиберов': 9\r\n};\r\n\r\nconst timeouts = [5, 10, 20, 30, 45, 60];\r\n\r\n// Centralized default values for LatestGamesManager and related managers\r\nconst DEFAULTS = {\r\n  maxGameCount: 5,\r\n  currentTheme: 'light',\r\n  displayMode: 'scroll',\r\n  previousScrollPosition: 0,\r\n  panelWidth: '95vw',\r\n  hoverTimeout: null,\r\n  isHovered: false,\r\n  enableDragging: true,\r\n  wasDragging: false,\r\n  shouldAutoSave: true,\r\n  alwaysVisiblePanel: false,\r\n  panelYPosition: 0,\r\n  hidePanelDelay: 1000,\r\n\r\n  // Game start and replay settings\r\n  shouldStart: false,\r\n  startDelay: 1000,\r\n  shouldReplay: false,\r\n  replayDelay: 1000\r\n};\n\n//# sourceURL=webpack://tampermonkey-script/./src/definitions.js?");

/***/ }),

/***/ "./src/drag.js":
/*!*********************!*\
  !*** ./src/drag.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addDragFunctionality: () => (/* binding */ addDragFunctionality)\n/* harmony export */ });\nconst dragState = {\r\n  draggedElement: null,\r\n  isDragging: false,\r\n  isRightHalf: false,\r\n  dragDirection: 0,\r\n  lastDragDirection: 0,\r\n  lastPanelDragY: 0,\r\n  dragOffset: { x: 0, y: 0 },\r\n  initialX: 0,\r\n  initialY: 0,\r\n  dragThreshold: 1,\r\n  rotationAccumulator: 0,\r\n  rotationDegreeLimit: 5,\r\n  globalEvents: {},\r\n\r\n  // Reset method to clean up state\r\n  reset() {\r\n    this.draggedElement = null;\r\n    this.isDragging = false;\r\n    this.isRightHalf = false;\r\n    this.dragDirection = 0;\r\n    this.lastDragDirection = 0;\r\n    this.lastPanelDragY = 0;\r\n    this.dragOffset = { x: 0, y: 0 };\r\n    this.initialX = 0;\r\n    this.initialY = 0;\r\n    this.rotationAccumulator = 0;\r\n    // Clear event references\r\n    this.globalEvents = {};\r\n  },\r\n\r\n  // Add cleanup method\r\n  cleanup() {\r\n    if (this.globalEvents.handleDragMove) {\r\n      document.removeEventListener('mousemove', this.globalEvents.handleDragMove);\r\n    }\r\n    if (this.globalEvents.handleDragEnd) {\r\n      document.removeEventListener('mouseup', this.globalEvents.handleDragEnd);\r\n    }\r\n    this.globalEvents = {};\r\n  }\r\n};\r\n\r\nfunction isActuallyDragging(e) {\r\n  return (\r\n    Math.abs(e.clientX - dragState.initialX) > dragState.dragThreshold ||\r\n    Math.abs(e.clientY - dragState.initialY) > dragState.dragThreshold\r\n  );\r\n}\r\n\r\nfunction getDragBounds(element) {\r\n  const rect = element.getBoundingClientRect();\r\n  const parentRect = element.parentElement.getBoundingClientRect();\r\n  const parentElement = element.parentElement;\r\n\r\n  return {\r\n    element: {\r\n      rect: rect,\r\n      width: element.offsetWidth,\r\n      height: element.offsetHeight\r\n    },\r\n    parent: {\r\n      rect: parentRect,\r\n      width: parentElement.offsetWidth,\r\n      height: parentElement.offsetHeight\r\n    }\r\n  };\r\n}\r\n\r\n// Helper function to handle element positioning in wrap mode\r\nfunction handleWrapModePositioning(e, gamesList) {\r\n  const bounds = getDragBounds(dragState.draggedElement);\r\n\r\n  // Calculate constrained position\r\n  let newLeft = e.clientX - dragState.dragOffset.x - bounds.parent.rect.left;\r\n  let newTop = e.clientY - dragState.dragOffset.y - bounds.parent.rect.top;\r\n  newLeft = Math.max(0, Math.min(newLeft, bounds.parent.width - bounds.element.width));\r\n  newTop = Math.max(0, Math.min(newTop, bounds.parent.height - bounds.element.height));\r\n\r\n  dragState.draggedElement.style.left = `${newLeft}px`;\r\n  dragState.draggedElement.style.top = `${newTop}px`;\r\n\r\n  // Handle element insertion\r\n  const pinnedGames = Array.from(gamesList.querySelectorAll('.pin-game:not(.dragging)'));\r\n  let closestElement = null;\r\n  let minDistance = Infinity;\r\n\r\n  pinnedGames.forEach(game => {\r\n    const rect = game.getBoundingClientRect();\r\n    const centerX = rect.left + rect.width / 2;\r\n    const centerY = rect.top + rect.height / 2;\r\n    const distance = Math.hypot(e.clientX - centerX, e.clientY - centerY);\r\n    if (distance < minDistance) {\r\n      minDistance = distance;\r\n      closestElement = game;\r\n    }\r\n  });\r\n\r\n  if (closestElement) {\r\n    const rect = closestElement.getBoundingClientRect();\r\n    const isLeftHalf = e.clientX < rect.left + rect.width / 2;\r\n    if (isLeftHalf) {\r\n      gamesList.insertBefore(dragState.draggedElement, closestElement);\r\n    } else {\r\n      gamesList.insertBefore(dragState.draggedElement, closestElement.nextSibling);\r\n    }\r\n  }\r\n}\r\n\r\n// Helper function to handle element positioning in scroll mode\r\nfunction handleScrollModePositioning(e, gamesList) {\r\n  const pinnedGames = Array.from(gamesList.querySelectorAll('.pin-game:not(.dragging)'));\r\n  let insertAfter = null;\r\n\r\n  for (const pinnedGame of pinnedGames) {\r\n    const rect = pinnedGame.getBoundingClientRect();\r\n    const middle = rect.top + rect.height / 2;\r\n    if (e.clientY < middle) break;\r\n    insertAfter = pinnedGame;\r\n  }\r\n\r\n  if (insertAfter) {\r\n    gamesList.insertBefore(dragState.draggedElement, insertAfter.nextSibling);\r\n  } else {\r\n    const firstPinned = gamesList.querySelector('.pin-game:not(.dragging)');\r\n    if (firstPinned) gamesList.insertBefore(dragState.draggedElement, firstPinned);\r\n  }\r\n}\r\n\r\nfunction addDragFunctionality(manager, element) {\r\n  // Clean up any existing listeners first\r\n  dragState.cleanup();\r\n\r\n  element.addEventListener('mousedown', (e) => {\r\n    e.preventDefault(); // Prevent native drag from starting\r\n    // Only allow dragging with left mouse button (LMB)\r\n    if (e.button !== 0) return;\r\n    // Prevent dragging if the target is a button (e.g., pin or delete)\r\n    if (e.target.closest('.latest-game-buttons')) return;\r\n\r\n    // Clean up any existing listeners before adding new ones\r\n    dragState.cleanup();\r\n\r\n    manager.wasDragging = false;\r\n    dragState.initialX = e.clientX;\r\n    dragState.initialY = e.clientY;\r\n    dragState.isDragging = true;\r\n    dragState.draggedElement = element;\r\n\r\n    const bounds = getDragBounds(element);\r\n    const clickX = e.clientX - bounds.element.rect.left;\r\n    dragState.isRightHalf = clickX > bounds.element.rect.width / 2;\r\n    dragState.lastPanelDragY = e.clientY;\r\n    // Calculate the offset from the top-left corner of the element\r\n    dragState.dragOffset = {\r\n      x: e.clientX - bounds.element.rect.left,\r\n      y: e.clientY - bounds.element.rect.top\r\n    };\r\n\r\n    // Create bound functions and store references\r\n    dragState.globalEvents.handleDragMove = (e) => handleDragMove(e, manager);\r\n    dragState.globalEvents.handleDragEnd = () => handleDragEnd(manager);\r\n\r\n    document.addEventListener('mousemove', dragState.globalEvents.handleDragMove);\r\n    document.addEventListener('mouseup', dragState.globalEvents.handleDragEnd);\r\n  });\r\n}\r\n\r\nfunction handleDragMove(e, manager) {\r\n  if (!dragState.isDragging || !dragState.draggedElement) return;\r\n\r\n  if (!manager.wasDragging && isActuallyDragging(e)) {\r\n    manager.wasDragging = true;\r\n    dragState.draggedElement.classList.add('dragging');\r\n    if (manager.viewManager.getDisplayMode() === 'wrap') {\r\n      const bounds = getDragBounds(dragState.draggedElement);\r\n      dragState.draggedElement.style.position = 'absolute';\r\n      dragState.draggedElement.style.left = `${bounds.element.rect.left - bounds.parent.rect.left}px`;\r\n      dragState.draggedElement.style.top = `${bounds.element.rect.top - bounds.parent.rect.top}px`;\r\n      dragState.draggedElement.style.width = `${bounds.element.rect.width}px`;\r\n    }\r\n  }\r\n\r\n  e.preventDefault();\r\n\r\n  const displayMode = manager.viewManager.getDisplayMode();\r\n  const gamesList = document.getElementById('latest-games');\r\n\r\n  if (displayMode === 'scroll') {\r\n    handleScrollModePositioning(e, gamesList);\r\n  } else {\r\n    handleWrapModePositioning(e, gamesList);\r\n  }\r\n\r\n  // Handle rotation\r\n  const currentY = e.clientY;\r\n  const deltaY = currentY - dragState.lastPanelDragY;\r\n  dragState.lastPanelDragY = currentY;\r\n  if (deltaY !== 0) {\r\n    const sensitivity = 0.2;\r\n    dragState.rotationAccumulator = (dragState.rotationAccumulator || 0) +\r\n      (dragState.isRightHalf ? deltaY : -deltaY) * sensitivity;\r\n    dragState.rotationAccumulator = Math.max(\r\n      -dragState.rotationDegreeLimit,\r\n      Math.min(dragState.rotationDegreeLimit, dragState.rotationAccumulator)\r\n    );\r\n    dragState.draggedElement.style.transform = `rotate(${dragState.rotationAccumulator}deg)`;\r\n  }\r\n}\r\n\r\nfunction handleDragEnd(manager) {\r\n  // Always clean up listeners first, regardless of state\r\n  dragState.cleanup();\r\n\r\n  if (!dragState.isDragging || !dragState.draggedElement) {\r\n    dragState.reset();\r\n    return;\r\n  }\r\n\r\n  dragState.isDragging = false;\r\n  dragState.draggedElement.classList.remove('dragging');\r\n\r\n  const displayMode = manager.viewManager.getDisplayMode();\r\n  if (displayMode === 'wrap') {\r\n    dragState.draggedElement.style.position = '';\r\n    dragState.draggedElement.style.left = '';\r\n    dragState.draggedElement.style.top = '';\r\n    dragState.draggedElement.style.width = '';\r\n  }\r\n  dragState.draggedElement.style.transform = '';\r\n\r\n  manager.updateGameOrderFromDOM();\r\n\r\n  // Clean up drag state\r\n  dragState.reset();\r\n}\n\n//# sourceURL=webpack://tampermonkey-script/./src/drag.js?");

/***/ }),

/***/ "./src/font.js":
/*!*********************!*\
  !*** ./src/font.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   setupFonts: () => (/* binding */ setupFonts)\n/* harmony export */ });\nfunction setupFonts() {\r\n  if (!document.getElementById('kg-latest-games-montserrat-font')) {\r\n    const link = document.createElement('link');\r\n    link.id = 'kg-latest-games-montserrat-font';\r\n    link.rel = 'stylesheet';\r\n    link.href = 'https://fonts.googleapis.com/css2?family=Montserrat&display=swap';\r\n    document.head.appendChild(link);\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/font.js?");

/***/ }),

/***/ "./src/gamePopup.js":
/*!**************************!*\
  !*** ./src/gamePopup.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createGamePopup: () => (/* binding */ createGamePopup)\n/* harmony export */ });\n/* harmony import */ var _tooltip_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tooltip.js */ \"./src/tooltip.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./definitions.js */ \"./src/definitions.js\");\n/* harmony import */ var _gameUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gameUtils.js */ \"./src/gameUtils.js\");\n/* harmony import */ var _icons_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icons.js */ \"./src/icons.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst visibilityTypes = Object.keys(_definitions_js__WEBPACK_IMPORTED_MODULE_2__.visibilities);\r\nconst SETTINGS_KEY = 'latestGamesSettings';\r\n\r\n// Configuration for rank slider constraints\r\nconst RANK_CONSTRAINTS = {\r\n  minFrom: 0, // level_from 1-6 (indices 0-5)\r\n  maxFrom: 5,\r\n  minTo: 5, // level_to 6-9 (indices 5-8)  \r\n  maxTo: 8\r\n};\r\n\r\n// Add margin to avoid edge clipping\r\nconst margin = 10;\r\n\r\n/**\r\n * Settings helper functions\r\n */\r\nconst settingsHelper = {\r\n  load() {\r\n    try {\r\n      return JSON.parse(localStorage.getItem(SETTINGS_KEY)) || {};\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  },\r\n\r\n  save(settings) {\r\n    try {\r\n      localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings));\r\n    } catch (e) {\r\n      console.warn('Failed to save settings:', e);\r\n    }\r\n  },\r\n\r\n  getRankRange() {\r\n    const settings = this.load();\r\n    return settings.rankRange || [RANK_CONSTRAINTS.minFrom, RANK_CONSTRAINTS.maxTo];\r\n  },\r\n\r\n  saveRankRange(minIdx, maxIdx) {\r\n    const settings = this.load();\r\n    settings.rankRange = [minIdx, maxIdx];\r\n    this.save(settings);\r\n  },\r\n\r\n  getQualificationState() {\r\n    const settings = this.load();\r\n    return settings.qualificationEnabled !== undefined ? settings.qualificationEnabled : false;\r\n  },\r\n\r\n  saveQualificationState(enabled) {\r\n    const settings = this.load();\r\n    settings.qualificationEnabled = enabled;\r\n    this.save(settings);\r\n  }\r\n};\r\n\r\n/**\r\n * Clamp index to allowed range based on handle type\r\n */\r\nfunction clampIndex(idx, isMinHandle) {\r\n  if (isMinHandle) {\r\n    return Math.max(RANK_CONSTRAINTS.minFrom, Math.min(RANK_CONSTRAINTS.maxFrom, idx));\r\n  } else {\r\n    return Math.max(RANK_CONSTRAINTS.minTo, Math.min(RANK_CONSTRAINTS.maxTo, idx));\r\n  }\r\n}\r\n\r\n/**\r\n * Create a game-specific popup with links to all game types and all timeouts.\r\n * Shows every combination regardless of the current game parameters.\r\n * After the subheader for each type, a container for type buttons is created and each button is appended inside.\r\n * @param {Object} game - The game object containing parameters\r\n * @param {MouseEvent} event - The mouse event for positioning\r\n * @param {string} className - CSS class name for the popup (default: 'game-popup')\r\n * @returns {HTMLElement} The created popup element\r\n */\r\nfunction createGamePopup(game, event, className = 'game-popup') {\r\n  (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_0__.hideTooltipElement)(); // Hide any existing tooltip\r\n\r\n  const existingPopup = document.querySelector(`.${className}`);\r\n  existingPopup && existingPopup.remove();\r\n\r\n  const popup = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className });\r\n\r\n  const header = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'popup-header' });\r\n\r\n  const headerTitle = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\r\n    className: 'popup-header-title',\r\n    textContent: 'Выбрать'\r\n  });\r\n\r\n  const qualification = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n    className: 'popup-header-qualification',\r\n    innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_4__.icons.qualification\r\n  });\r\n\r\n  // Set qualification visibility based on qualification setting\r\n  let qualificationEnabled = settingsHelper.getQualificationState();\r\n  qualification.classList.toggle('latest-games-disabled', !qualificationEnabled);\r\n  (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_0__.createCustomTooltip)(qualification, `Квалификация ${qualificationEnabled ? 'включена' : 'выключена'}`);\r\n\r\n  // Add click handler for qualification toggle\r\n  qualification.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    qualificationEnabled = !qualificationEnabled;\r\n    settingsHelper.saveQualificationState(qualificationEnabled);\r\n\r\n    qualification.classList.toggle('latest-games-disabled', !qualificationEnabled);\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_0__.createCustomTooltip)(qualification, `Квалификация ${qualificationEnabled ? 'включена' : 'выключена'}`);\r\n\r\n    // Update all button links with new qualification setting\r\n    updateButtonLinks();\r\n  });\r\n\r\n  header.append(headerTitle, qualification);\r\n  popup.appendChild(header);\r\n\r\n  // --- Dual-range slider for rank selection ---\r\n  const rankSliderContainer = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'rank-slider-container' });\r\n  const sliderTrack = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'rank-slider-track' });\r\n  const sliderRange = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'rank-slider-range' });\r\n  const sliderHandles = [\r\n    (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'rank-slider-handle', tabIndex: 0 }),\r\n    (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'rank-slider-handle', tabIndex: 0 })\r\n  ];\r\n  const rankDisplay = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'rank-slider-display' });\r\n\r\n  // Load saved range with proper clamping\r\n  let [minIdx, maxIdx] = settingsHelper.getRankRange();\r\n  minIdx = clampIndex(minIdx, true);\r\n  maxIdx = clampIndex(maxIdx, false);\r\n\r\n  // Ensure valid range relationship\r\n  if (minIdx > maxIdx) minIdx = maxIdx;\r\n  if (maxIdx < minIdx) maxIdx = minIdx;\r\n\r\n  // Store references to all button elements and their config\r\n  const buttonRefs = [];\r\n\r\n  function updateSliderUI() {\r\n    // Ensure indices are properly clamped\r\n    minIdx = clampIndex(minIdx, true);\r\n    maxIdx = clampIndex(maxIdx, false);\r\n\r\n    // Prevent invalid range relationships\r\n    if (minIdx > maxIdx) minIdx = maxIdx;\r\n    if (maxIdx < minIdx) maxIdx = minIdx;\r\n\r\n    const percent1 = (minIdx / (_definitions_js__WEBPACK_IMPORTED_MODULE_2__.ranks.length - 1)) * 100;\r\n    const percent2 = (maxIdx / (_definitions_js__WEBPACK_IMPORTED_MODULE_2__.ranks.length - 1)) * 100;\r\n\r\n    sliderHandles[0].style.left = percent1 + '%';\r\n    sliderHandles[1].style.left = percent2 + '%';\r\n    sliderRange.style.left = percent1 + '%';\r\n    sliderRange.style.width = (percent2 - percent1) + '%';\r\n\r\n    rankDisplay.textContent = _definitions_js__WEBPACK_IMPORTED_MODULE_2__.ranks[minIdx] + (minIdx === maxIdx ? '' : ' — ' + _definitions_js__WEBPACK_IMPORTED_MODULE_2__.ranks[maxIdx]);\r\n\r\n    // Handle overlap state\r\n    const isOverlap = minIdx === maxIdx;\r\n    const handleClasses = [\r\n      ['overlap', 'overlap-left'],\r\n      ['overlap', 'overlap-right']\r\n    ];\r\n\r\n    sliderHandles.forEach((handle, i) => {\r\n      handleClasses[i].forEach(className => handle.classList.toggle(className, isOverlap));\r\n    });\r\n\r\n    // Update all button links\r\n    updateButtonLinks();\r\n  }\r\n\r\n  function updateButtonLinks() {\r\n    const isRangeModified = minIdx !== RANK_CONSTRAINTS.minFrom || maxIdx !== RANK_CONSTRAINTS.maxTo;\r\n\r\n    buttonRefs.forEach(({ btn, type, timeout }) => {\r\n      const modifiedGame = {\r\n        ...game,\r\n        params: {\r\n          ...game.params,\r\n          type,\r\n          timeout,\r\n          level_from: isRangeModified ? minIdx + 1 : game.params.level_from,\r\n          level_to: isRangeModified ? maxIdx + 1 : game.params.level_to\r\n        }\r\n      };\r\n\r\n      // Add qualification parameter if enabled\r\n      if (qualificationEnabled) {\r\n        modifiedGame.params.qual = 1;\r\n      }\r\n\r\n      const link = (0,_gameUtils_js__WEBPACK_IMPORTED_MODULE_3__.generateGameLink)(modifiedGame);\r\n      btn.setAttribute('href', link);\r\n      btn.onclick = (e) => {\r\n        e.preventDefault();\r\n        window.location.href = link;\r\n      };\r\n    });\r\n  }\r\n\r\n  function saveRange() {\r\n    settingsHelper.saveRankRange(minIdx, maxIdx);\r\n  }\r\n\r\n  // Handle click on slider track\r\n  sliderTrack.addEventListener('click', (e) => {\r\n    const rect = sliderTrack.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const percent = x / rect.width;\r\n    let idx = Math.round(percent * (_definitions_js__WEBPACK_IMPORTED_MODULE_2__.ranks.length - 1));\r\n\r\n    // Determine which handle to move based on proximity\r\n    if (Math.abs(idx - minIdx) < Math.abs(idx - maxIdx)) {\r\n      minIdx = Math.min(clampIndex(idx, true), maxIdx);\r\n    } else {\r\n      maxIdx = Math.max(clampIndex(idx, false), minIdx);\r\n    }\r\n\r\n    updateSliderUI();\r\n    saveRange();\r\n  });\r\n\r\n  // Handle dragging\r\n  sliderHandles.forEach((handle, i) => {\r\n    handle.addEventListener('mousedown', (e) => {\r\n      e.preventDefault();\r\n      let prev = i === 0 ? minIdx : maxIdx;\r\n\r\n      const onMove = ({ clientX }) => {\r\n        const { left, width } = sliderTrack.getBoundingClientRect();\r\n        let idx = Math.round(((clientX - left) / width) * (_definitions_js__WEBPACK_IMPORTED_MODULE_2__.ranks.length - 1));\r\n        idx = clampIndex(idx, i === 0);\r\n\r\n        // compute the new value for minIdx or maxIdx\r\n        const newVal = i === 0\r\n          ? Math.min(idx, maxIdx)\r\n          : Math.max(idx, minIdx);\r\n\r\n        if (newVal !== prev) {\r\n          prev = newVal;\r\n          if (i === 0) minIdx = newVal;\r\n          else maxIdx = newVal;\r\n          updateSliderUI();\r\n        }\r\n      };\r\n\r\n      const onUp = () => {\r\n        saveRange();\r\n        document.removeEventListener('mousemove', onMove);\r\n        document.removeEventListener('mouseup', onUp);\r\n      };\r\n\r\n      document.addEventListener('mousemove', onMove);\r\n      document.addEventListener('mouseup', onUp);\r\n    });\r\n  });\r\n\r\n  // Build slider UI\r\n  sliderTrack.appendChild(sliderRange);\r\n  sliderHandles.forEach(h => sliderTrack.appendChild(h));\r\n  rankSliderContainer.appendChild(rankDisplay);\r\n  rankSliderContainer.appendChild(sliderTrack);\r\n  popup.appendChild(rankSliderContainer);\r\n  updateSliderUI();\r\n\r\n  // Create game type sections\r\n  visibilityTypes.forEach(type => {\r\n    const groupHeader = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\r\n      className: 'popup-subheader',\r\n      textContent: _definitions_js__WEBPACK_IMPORTED_MODULE_2__.visibilities[type]\r\n    });\r\n    popup.appendChild(groupHeader);\r\n\r\n    const typeButtonsContainer = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'timeouts-container' });\r\n\r\n    _definitions_js__WEBPACK_IMPORTED_MODULE_2__.timeouts.forEach(timeout => {\r\n      // Skip 5-second timeout for the normal type\r\n      if (type === 'normal' && timeout === 5) return;\r\n\r\n      const isRangeModified = minIdx !== RANK_CONSTRAINTS.minFrom || maxIdx !== RANK_CONSTRAINTS.maxTo;\r\n      const modifiedGame = {\r\n        ...game,\r\n        params: {\r\n          ...game.params,\r\n          type: type,\r\n          timeout: timeout,\r\n          level_from: isRangeModified ? minIdx + 1 : game.params.level_from,\r\n          level_to: isRangeModified ? maxIdx + 1 : game.params.level_to\r\n        }\r\n      };\r\n\r\n      // Add qualification parameter if enabled\r\n      if (qualificationEnabled) {\r\n        modifiedGame.params.qual = 1;\r\n      }\r\n\r\n      const link = (0,_gameUtils_js__WEBPACK_IMPORTED_MODULE_3__.generateGameLink)(modifiedGame);\r\n      const btn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('a', {\r\n        href: link,\r\n        className: 'game-popup-button',\r\n        textContent: timeout\r\n      });\r\n\r\n      btn.addEventListener('click', (e) => {\r\n        e.preventDefault();\r\n        window.location.href = link;\r\n      });\r\n\r\n      buttonRefs.push({ btn, type, timeout });\r\n      typeButtonsContainer.appendChild(btn);\r\n    });\r\n\r\n    popup.appendChild(typeButtonsContainer);\r\n  });\r\n\r\n  // Position popup and add tooltips\r\n  setupPopupPositioning(popup, event);\r\n\r\n  return popup;\r\n}\r\n\r\n/**\r\n * Handle popup positioning, tooltip setup, and drag functionality\r\n */\r\nfunction setupPopupPositioning(popup, event) {\r\n  // Add popup to body temporarily to measure dimensions\r\n  popup.style.visibility = 'hidden';\r\n  document.body.appendChild(popup);\r\n\r\n  // Add tooltips for truncated links\r\n  popup.querySelectorAll('a').forEach(a => {\r\n    if (a.scrollWidth > a.clientWidth) {\r\n      (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_0__.createCustomTooltip)(a, a.textContent);\r\n    }\r\n  });\r\n\r\n  // Helper function to set popup position within viewport bounds\r\n  const setPosition = (left, top) => {\r\n    // Get viewport dimensions in real-time\r\n    const viewportWidth = window.innerWidth;\r\n    const viewportHeight = window.innerHeight;\r\n\r\n    const popupRect = popup.getBoundingClientRect();\r\n    const maxLeft = viewportWidth - popupRect.width - margin;\r\n    const maxTop = viewportHeight - popupRect.height - margin;\r\n\r\n    const constrainedLeft = Math.max(margin, Math.min(left, maxLeft));\r\n    const constrainedTop = Math.max(margin, Math.min(top, maxTop));\r\n\r\n    popup.style.left = `${constrainedLeft}px`;\r\n    popup.style.top = `${constrainedTop}px`;\r\n  };\r\n\r\n  // Set initial position\r\n  setPosition(event.clientX, event.clientY);\r\n  popup.style.visibility = 'visible';\r\n\r\n  // Store event handlers for cleanup in a single object\r\n  const eventHandlers = {\r\n    clickOutside: null,\r\n    keydown: null,\r\n    popupMouseDown: null,\r\n    currentDrag: null\r\n  };\r\n\r\n  // Setup drag functionality on popup itself, but ignore interactive elements\r\n  eventHandlers.popupMouseDown = (e) => {\r\n    // Only allow dragging on specific elements that should support it\r\n    const isDraggable = (target) => {\r\n      // Check if target is the popup itself or a draggable child\r\n      if (target === popup) return true;\r\n\r\n      // Allow dragging on headers and non-interactive containers\r\n      const draggableSelectors = [\r\n        '.popup-header',\r\n        '.popup-header-title',\r\n        '.popup-subheader',\r\n        '.rank-slider-display',\r\n        '.timeouts-container'\r\n      ];\r\n\r\n      return draggableSelectors.some(selector =>\r\n        target.matches && target.matches(selector)\r\n      );\r\n    };\r\n\r\n    // Prevent dragging on interactive elements\r\n    const isInteractive = (target) => {\r\n      const interactiveSelectors = [\r\n        '.game-popup-button',\r\n        '.rank-slider-handle',\r\n        '.rank-slider-track',\r\n        '.rank-slider-range',\r\n        '.popup-header-qualification'\r\n      ];\r\n\r\n      return interactiveSelectors.some(selector =>\r\n        target.matches && (target.matches(selector) || target.closest(selector))\r\n      );\r\n    };\r\n\r\n    // Ignore if not draggable or is interactive\r\n    if (!isDraggable(e.target) || isInteractive(e.target)) return;\r\n    // Only left mouse button\r\n    if (e.button !== 0) return;\r\n\r\n    e.preventDefault();\r\n\r\n    // Store initial position and popup position\r\n    const startX = e.clientX;\r\n    const startY = e.clientY;\r\n    const startLeft = parseInt(popup.style.left, margin);\r\n    const startTop = parseInt(popup.style.top, margin);\r\n\r\n    const onMouseMove = (e) => {\r\n      const deltaX = e.clientX - startX;\r\n      const deltaY = e.clientY - startY;\r\n\r\n      const newLeft = startLeft + deltaX;\r\n      const newTop = startTop + deltaY;\r\n\r\n      setPosition(newLeft, newTop);\r\n    };\r\n\r\n    const onMouseUp = () => {\r\n      document.removeEventListener('mousemove', onMouseMove);\r\n      document.removeEventListener('mouseup', onMouseUp);\r\n      eventHandlers.currentDrag = null;\r\n    };\r\n\r\n    eventHandlers.currentDrag = { onMouseMove, onMouseUp };\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('mouseup', onMouseUp);\r\n  };\r\n\r\n  popup.addEventListener('mousedown', eventHandlers.popupMouseDown);\r\n\r\n  // Set cursor style for draggable areas\r\n  popup.style.cursor = 'move';\r\n\r\n  // Setup event handlers for closing popup\r\n  const hidePopup = (e) => {\r\n    if (e && e.type === 'keydown' && e.key !== 'Escape') return;\r\n\r\n    // Remove all event listeners\r\n    if (eventHandlers.clickOutside) {\r\n      document.removeEventListener('click', eventHandlers.clickOutside);\r\n    }\r\n    if (eventHandlers.keydown) {\r\n      document.removeEventListener('keydown', eventHandlers.keydown);\r\n    }\r\n    if (eventHandlers.popupMouseDown) {\r\n      popup.removeEventListener('mousedown', eventHandlers.popupMouseDown);\r\n    }\r\n    if (eventHandlers.currentDrag) {\r\n      document.removeEventListener('mousemove', eventHandlers.currentDrag.onMouseMove);\r\n      document.removeEventListener('mouseup', eventHandlers.currentDrag.onMouseUp);\r\n    }\r\n\r\n    popup.remove();\r\n  };\r\n\r\n  eventHandlers.clickOutside = (e) => {\r\n    if (!popup.contains(e.target)) {\r\n      hidePopup(e);\r\n    }\r\n  };\r\n\r\n  eventHandlers.keydown = (e) => {\r\n    if (e.key === 'Escape') {\r\n      hidePopup(e);\r\n    }\r\n  };\r\n\r\n  requestAnimationFrame(() => {\r\n    document.addEventListener('click', eventHandlers.clickOutside);\r\n    document.addEventListener('keydown', eventHandlers.keydown);\r\n  });\r\n}\n\n//# sourceURL=webpack://tampermonkey-script/./src/gamePopup.js?");

/***/ }),

/***/ "./src/gameUtils.js":
/*!**************************!*\
  !*** ./src/gameUtils.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateGameLink: () => (/* binding */ generateGameLink),\n/* harmony export */   generateGameName: () => (/* binding */ generateGameName),\n/* harmony export */   parseGameParams: () => (/* binding */ parseGameParams)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./definitions.js */ \"./src/definitions.js\");\n/* harmony import */ var _icons_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons.js */ \"./src/icons.js\");\n\r\n\r\n\r\n\r\nfunction parseGameParams(span, descText) {\r\n  const gameType = span.className.split('-').pop();\r\n  const vocName = gameType === 'voc' ? span.textContent.replace(/[«»]/g, '') : '';\r\n\r\n  let vocId = '';\r\n  if (gameType === 'voc') {\r\n    const vocLink = span.querySelector('a');\r\n    if (vocLink) {\r\n      const match = vocLink.href.match(/vocs\\/(\\d+)/);\r\n      vocId = match ? parseInt(match[1], 10) : '';\r\n    }\r\n  }\r\n\r\n  let type = 'normal';\r\n  if (/одиночный/.test(descText)) {\r\n    type = 'practice';\r\n  } else if (/друзьями/.test(descText)) {\r\n    type = 'private';\r\n  }\r\n\r\n  let levelFrom = 1;\r\n  let levelTo = 9;\r\n  const levelMatches = descText.match(/для (\\S+)–(\\S+),/);\r\n  if (levelMatches) {\r\n    levelFrom = _definitions_js__WEBPACK_IMPORTED_MODULE_1__.ranksMap[levelMatches[1]] || 1;\r\n    levelTo = _definitions_js__WEBPACK_IMPORTED_MODULE_1__.ranksMap[levelMatches[2]] || 9;\r\n  }\r\n\r\n  const timeoutMatches = descText.match(/таймаут\\s(\\d+)\\s(сек|мин)/);\r\n  const timeout = timeoutMatches\r\n    ? (timeoutMatches[2] === 'сек' ? parseInt(timeoutMatches[1], 10) : parseInt(timeoutMatches[1], 10) * 60)\r\n    : 60;\r\n\r\n  const qualification = /квалификация/.test(descText) ? 1 : 0;\r\n\r\n  const result = {\r\n    gametype: gameType,\r\n    vocName,\r\n    vocId,\r\n    type,\r\n    level_from: levelFrom,\r\n    level_to: levelTo,\r\n    timeout,\r\n    qual: qualification,\r\n    premium_abra: 0\r\n  };\r\n\r\n  return result;\r\n}\r\n\r\nfunction generateGameName(game) {\r\n  const gameType = _definitions_js__WEBPACK_IMPORTED_MODULE_1__.gameTypes[game.params.gametype];\r\n  const { vocName, timeout, type: visibility, level_from, level_to, qual } = game.params;\r\n\r\n  const nameSpan = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.createElement)('span', {\r\n    className: `latest-game-name gametype-${game.params.gametype}`,\r\n    textContent: vocName === '' ? gameType : `«${vocName}»`\r\n  });\r\n\r\n  const descSpan = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.createElement)('span', {\r\n    className: 'latest-game-description'\r\n  });\r\n\r\n  const qualSpan = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.createElement)('span', {\r\n    className: 'latest-game-qual',\r\n    innerHTML: qual ? _icons_js__WEBPACK_IMPORTED_MODULE_2__.icons.qualification : ''\r\n  });\r\n\r\n  let levelText = '';\r\n  if (level_from !== 1 || level_to !== 9) {\r\n    const levelFromName = _definitions_js__WEBPACK_IMPORTED_MODULE_1__.ranks[level_from - 1];\r\n    const levelToName = _definitions_js__WEBPACK_IMPORTED_MODULE_1__.ranks[level_to - 1];\r\n    levelText = ` ${levelFromName} - ${levelToName}`;\r\n  }\r\n\r\n  const levelsSpan = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.createElement)('span', {\r\n    className: 'latest-game-levels',\r\n    textContent: levelText\r\n  });\r\n\r\n  descSpan.textContent = `${_definitions_js__WEBPACK_IMPORTED_MODULE_1__.visibilities[visibility]}, ${timeout} секунд`;\r\n  descSpan.appendChild(qualSpan);\r\n  if (levelText) {\r\n    descSpan.appendChild(levelsSpan);\r\n  }\r\n\r\n  const container = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.createElement)('div');\r\n  container.appendChild(nameSpan);\r\n  container.appendChild(descSpan);\r\n\r\n  return container.innerHTML;\r\n}\r\n\r\nfunction generateGameLink(game) {\r\n  const { gametype, vocId, type, level_from, level_to, timeout, qual } = game.params;\r\n\r\n  const params = new URLSearchParams({\r\n    gametype,\r\n    type,\r\n    timeout: timeout.toString(),\r\n    submit: '1'\r\n  });\r\n\r\n  // Only add level_from and level_to for normal type\r\n  if (type !== 'practice' && type !== 'private') {\r\n    params.set('level_from', level_from.toString());\r\n    params.set('level_to', level_to.toString());\r\n  }\r\n\r\n  if (vocId !== '') {\r\n    params.set('voc', vocId);\r\n  }\r\n\r\n  if (qual) {\r\n    params.set('qual', '1');\r\n  }\r\n\r\n  return `${location.protocol}//klavogonki.ru/create/?${params.toString()}`;\r\n}\n\n//# sourceURL=webpack://tampermonkey-script/./src/gameUtils.js?");

/***/ }),

/***/ "./src/groupsPopup.js":
/*!****************************!*\
  !*** ./src/groupsPopup.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createPopup: () => (/* binding */ createPopup)\n/* harmony export */ });\n/* harmony import */ var _tooltip_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tooltip.js */ \"./src/tooltip.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n\r\n\r\n\r\n/**\r\n * Create a popup with buttons that stays within screen boundaries\r\n * @param {Array} buttonConfigs - Array of button configuration objects\r\n * @param {MouseEvent} event - The mouse event for positioning\r\n * @param {string} className - CSS class name for the popup\r\n * @param {string} header - Optional header text to display at the top\r\n * @returns {HTMLElement} The created popup element\r\n */\r\nfunction createPopup(buttonConfigs, event, className = 'popup', header) {\r\n  // Remove any existing popup with the same class\r\n  const existingPopup = document.querySelector(`.${className}`);\r\n  if (existingPopup) existingPopup.remove();\r\n\r\n  const popup = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className });\r\n\r\n  // Add header if provided\r\n  if (header) {\r\n    const headerElem = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\r\n      className: 'popup-header',\r\n      textContent: header\r\n    });\r\n    popup.appendChild(headerElem);\r\n  }\r\n\r\n  // Create buttons from configurations\r\n  buttonConfigs.forEach(config => {\r\n    const button = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('button', {\r\n      className: config.className || 'popup-button',\r\n      textContent: config.text,\r\n      ...(config.dataset && { dataset: config.dataset })\r\n    });\r\n\r\n    if (config.onClick) {\r\n      button.addEventListener('click', () => {\r\n        config.onClick();\r\n        popup.remove();\r\n      });\r\n    }\r\n\r\n    popup.appendChild(button);\r\n  });\r\n\r\n  // Add popup to body temporarily to measure dimensions\r\n  popup.style.visibility = 'hidden';\r\n  document.body.appendChild(popup);\r\n\r\n  // Add title to buttons if they are too wide\r\n  popup.querySelectorAll('button').forEach(btn => {\r\n    const isEllipsed = btn.scrollWidth > btn.clientWidth;\r\n    isEllipsed && (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_0__.createCustomTooltip)(btn, btn.textContent);\r\n  });\r\n\r\n  // Calculate and set position\r\n  const popupRect = popup.getBoundingClientRect();\r\n  const viewportWidth = window.innerWidth;\r\n  const viewportHeight = window.innerHeight;\r\n  const margin = 10;\r\n\r\n  let left = Math.max(margin, Math.min(event.clientX, viewportWidth - popupRect.width - margin));\r\n  let top = Math.max(margin, Math.min(event.clientY, viewportHeight - popupRect.height - margin));\r\n\r\n  popup.style.left = `${left}px`;\r\n  popup.style.top = `${top}px`;\r\n  popup.style.visibility = 'visible';\r\n\r\n  // Define a function to hide popup and remove event listeners\r\n  const hidePopup = (e) => {\r\n    if (e && e.type === 'keydown' && e.key !== 'Escape') return;\r\n    popup.remove();\r\n    document.removeEventListener('click', clickOutsideHandler);\r\n    document.removeEventListener('keydown', keydownHandler);\r\n  };\r\n\r\n  const clickOutsideHandler = (e) => {\r\n    if (!popup.contains(e.target)) {\r\n      hidePopup(e);\r\n    }\r\n  };\r\n\r\n  const keydownHandler = (e) => {\r\n    if (e.key === 'Escape') {\r\n      hidePopup(e);\r\n    }\r\n  };\r\n\r\n  requestAnimationFrame(() => {\r\n    document.addEventListener('click', clickOutsideHandler);\r\n    document.addEventListener('keydown', keydownHandler);\r\n  });\r\n\r\n  return popup;\r\n}\n\n//# sourceURL=webpack://tampermonkey-script/./src/groupsPopup.js?");

/***/ }),

/***/ "./src/icons.js":
/*!**********************!*\
  !*** ./src/icons.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   icons: () => (/* binding */ icons)\n/* harmony export */ });\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\r\n\r\nconst icons = {\r\n  sun: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <circle cx=\"12\" cy=\"12\" r=\"5\"></circle>\r\n      <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line>\r\n      <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line>\r\n      <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line>\r\n      <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line>\r\n      <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line>\r\n      <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line>\r\n      <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line>\r\n      <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line>\r\n    </svg>\r\n  `,\r\n\r\n  moon: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path>\r\n    </svg>\r\n  `,\r\n\r\n  pin: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.4\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <circle cx=\"12\" cy=\"5\" r=\"3\"></circle>\r\n      <line x1=\"12\" y1=\"22\" x2=\"12\" y2=\"8\"></line>\r\n      <path d=\"M5 12H2a10 10 0 0 0 20 0h-3\"></path>\r\n    </svg>\r\n  `,\r\n\r\n  delete: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.4\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n      <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n    </svg>\r\n  `,\r\n\r\n  decrease: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\">\r\n      <path d=\"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z\" fill=\"currentColor\"/>\r\n    </svg>\r\n  `,\r\n\r\n  increase: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\">\r\n      <path d=\"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z\" fill=\"currentColor\"/>\r\n    </svg>\r\n  `,\r\n\r\n  play: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <polyline points=\"9 18 15 12 9 6\"></polyline>\r\n    </svg>\r\n  `,\r\n\r\n  replay: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <polyline points=\"13 17 18 12 13 7\"></polyline>\r\n      <polyline points=\"6 17 11 12 6 7\"></polyline>\r\n    </svg>\r\n  `,\r\n\r\n  pinAll: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\r\n      <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\r\n    </svg>\r\n  `,\r\n\r\n  unpinAll: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\r\n      <path d=\"M7 11V7a5 5 0 0 1 9.9-1\"></path>\r\n    </svg>\r\n  `,\r\n\r\n  sort: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <polyline points=\"16 3 21 3 21 8\"></polyline>\r\n      <line x1=\"4\" y1=\"20\" x2=\"21\" y2=\"3\"></line>\r\n      <polyline points=\"21 16 21 21 16 21\"></polyline>\r\n      <line x1=\"15\" y1=\"15\" x2=\"21\" y2=\"21\"></line>\r\n      <line x1=\"4\" y1=\"4\" x2=\"9\" y2=\"9\"></line>\r\n    </svg>\r\n  `,\r\n\r\n  import: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\r\n      <polyline points=\"7 10 12 15 17 10\"></polyline>\r\n      <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line>\r\n    </svg>\r\n  `,\r\n\r\n  export: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\r\n      <polyline points=\"17 8 12 3 7 8\"></polyline>\r\n      <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line>\r\n    </svg>\r\n  `,\r\n\r\n  trashNothing: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\r\n      <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n      <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n    </svg>\r\n  `,\r\n\r\n  trashSomething: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <polyline points=\"3 6 5 6 21 6\"></polyline>\r\n      <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path>\r\n      <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"></line>\r\n      <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"></line>\r\n    </svg>\r\n  `,\r\n\r\n  wrap: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <rect x=\"3\" y=\"3\" width=\"7\" height=\"7\"/>\r\n      <rect x=\"14\" y=\"3\" width=\"7\" height=\"7\"/>\r\n      <rect x=\"14\" y=\"14\" width=\"7\" height=\"7\"/>\r\n      <rect x=\"3\" y=\"14\" width=\"7\" height=\"7\"/>\r\n    </svg>\r\n  `,\r\n\r\n  scroll: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <rect x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\"/>\r\n      <line x1=\"2\" y1=\"8\" x2=\"22\" y2=\"8\"/>\r\n      <line x1=\"2\" y1=\"16\" x2=\"22\" y2=\"16\"/>\r\n    </svg>\r\n  `,\r\n\r\n  addGroup: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line>\r\n      <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\r\n    </svg>\r\n  `,\r\n\r\n  renameGroup: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <path d=\"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\"></path>\r\n    </svg>\r\n  `,\r\n\r\n  qualification: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--rg-qualification-icon)\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <circle cx=\"12\" cy=\"8\" r=\"7\"></circle>\r\n      <polyline points=\"8.21 13.89 7 23 12 20 17 23 15.79 13.88\"></polyline>\r\n    </svg>\r\n  `,\r\n\r\n  panelToggleClosed: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\"></path>\r\n      <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\"></path>\r\n    </svg>\r\n  `,\r\n\r\n  panelToggleOpened: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <path d=\"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\"></path>\r\n      <path d=\"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\"></path>\r\n    </svg>\r\n  `,\r\n\r\n  broom: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\"\r\n    stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"8.5\"/>\r\n      <path d=\"M12 8.5c3.63,0 6.61,2.76 6.96,6.3 0.02,0.18 -0.03,0.35 -0.16,0.49 -0.12,0.14 -0.29,0.21 -0.47,0.21l-12.66 0c-0.18,0 -0.35,-0.07 -0.47,-0.21 -0.13,-0.14 -0.18,-0.31 -0.16,-0.49 0.35,-3.54 3.33,-6.3 6.96,-6.3z\"/>\r\n      <path d=\"M5 15.5l14 0 1.04 5.74c0.03,0.2 -0.02,0.38 -0.14,0.53 -0.13,0.15 -0.3,0.23 -0.49,0.23l-14.81 0c-0.2,0 -0.37,-0.08 -0.49,-0.23 -0.13,-0.15 -0.18,-0.33 -0.14,-0.53l1.03 -5.74z\"/>\r\n    </svg>\r\n  `,\r\n\r\n  checkmark: `\r\n    <svg xmlns=\"${SVG_NS}\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#4caf50\" stroke-width=\"4\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <polyline points=\"20 6 9 17 4 12\"></polyline>\r\n    </svg>\r\n  `,\r\n\r\n  dragToggle: `\r\n    <svg xmlns=\"${SVG_NS}\" viewBox=\"0 0 24 24\" fill=\"none\"\r\n    stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n      <polyline points=\"5 9 2 12 5 15\"></polyline>\r\n      <polyline points=\"9 5 12 2 15 5\"></polyline>\r\n      <polyline points=\"15 19 12 22 9 19\"></polyline>\r\n      <polyline points=\"19 9 22 12 19 15\"></polyline>\r\n      <line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\"></line>\r\n      <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"22\"></line>\r\n    </svg>\r\n  `,\r\n};\r\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/icons.js?");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles.scss */ \"./src/styles.scss\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/* harmony import */ var _font_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./font.js */ \"./src/font.js\");\n/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./definitions.js */ \"./src/definitions.js\");\n/* harmony import */ var _managers_ThemeManager_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./managers/ThemeManager.js */ \"./src/managers/ThemeManager.js\");\n/* harmony import */ var _managers_SettingsManager_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./managers/SettingsManager.js */ \"./src/managers/SettingsManager.js\");\n/* harmony import */ var _managers_GroupsManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./managers/GroupsManager.js */ \"./src/managers/GroupsManager.js\");\n/* harmony import */ var _managers_ViewManager_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./managers/ViewManager.js */ \"./src/managers/ViewManager.js\");\n/* harmony import */ var _managers_PageHandler_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./managers/PageHandler.js */ \"./src/managers/PageHandler.js\");\n/* harmony import */ var _managers_UIManager_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./managers/UIManager.js */ \"./src/managers/UIManager.js\");\n\r\n\r\n\r\n\r\n\r\n// Managers\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass LatestGamesManager {\r\n  constructor() {\r\n    this.initializeDefaults();\r\n    this.initializeManagers();\r\n    this.init();\r\n  }\r\n\r\n  initializeDefaults() {\r\n    Object.assign(this, _definitions_js__WEBPACK_IMPORTED_MODULE_3__.DEFAULTS);\r\n  }\r\n\r\n  initializeManagers() {\r\n    this.themeManager = new _managers_ThemeManager_js__WEBPACK_IMPORTED_MODULE_4__.ThemeManager(this);\r\n    this.settingsManager = new _managers_SettingsManager_js__WEBPACK_IMPORTED_MODULE_5__.SettingsManager(this);\r\n    this.groupsManager = new _managers_GroupsManager_js__WEBPACK_IMPORTED_MODULE_6__.GroupsManager(this);\r\n    this.viewManager = new _managers_ViewManager_js__WEBPACK_IMPORTED_MODULE_7__.ViewManager(this);\r\n    this.pageHandler = new _managers_PageHandler_js__WEBPACK_IMPORTED_MODULE_8__.PageHandler(this);\r\n    this.uiManager = new _managers_UIManager_js__WEBPACK_IMPORTED_MODULE_9__.UIManager(this);\r\n  }\r\n\r\n  init() {\r\n    this.settingsManager.loadSettings();\r\n    this.loadGameData();\r\n    this.groupsManager.initializeGroups();\r\n    this.uiManager.createHoverArea();\r\n    this.uiManager.createContainer();\r\n    this.alwaysVisiblePanel && this.uiManager.showContainer();\r\n    this.uiManager.createPanelToggleButton();\r\n    this.pageHandler.handlePageSpecificLogic();\r\n    this.exposeGlobalFunctions();\r\n    this.themeManager.applyTheme();\r\n  }\r\n\r\n  loadGameData() {\r\n    try {\r\n      let data = localStorage.getItem('latestGamesData');\r\n      if (data) {\r\n        data = JSON.parse(data);\r\n        if (Array.isArray(data)) {\r\n          const groups = [{ id: (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.generateRandomId)(), title: 'Группа-1', games: data }];\r\n          const currentGroupId = groups[0].id;\r\n          this.groupsManager.setGroups(groups, currentGroupId);\r\n        } else if (data && Array.isArray(data.groups)) {\r\n          this.groupsManager.setGroups(data.groups, data.currentGroupId);\r\n        } else {\r\n          this.groupsManager.setGroups([], null);\r\n        }\r\n      } else {\r\n        this.groupsManager.setGroups([], null);\r\n      }\r\n      this.migrateOldGameData();\r\n      this.assignGameIds();\r\n    } catch (error) {\r\n      console.warn('Could not load game data from localStorage:', error);\r\n      this.groupsManager.setGroups([], null);\r\n    }\r\n  }\r\n\r\n  saveGameData() {\r\n    try {\r\n      const data = {\r\n        groups: this.groupsManager.groups,\r\n        currentGroupId: this.groupsManager.currentGroupId\r\n      };\r\n      localStorage.setItem('latestGamesData', JSON.stringify(data));\r\n    } catch (error) {\r\n      console.warn('Could not save game data to localStorage:', error);\r\n    }\r\n  }\r\n\r\n  migrateOldGameData() {\r\n    this.groupsManager.groups.forEach(group => {\r\n      group.games = group.games.map(game => {\r\n        if (game.params.qual === 'on' || game.params.qual === '') {\r\n          game.params.qual = game.params.qual === 'on' ? 1 : 0;\r\n        }\r\n        return game;\r\n      });\r\n    });\r\n  }\r\n\r\n  assignGameIds() {\r\n    const allGameIds = new Set(this.groupsManager.groups.flatMap(group => group.games.map(game => game.id)));\r\n    this.groupsManager.groups.forEach(group => {\r\n      group.games = group.games.map(game => {\r\n        if (!game.id || game.id === -1 || allGameIds.has(game.id)) {\r\n          let newId;\r\n          do {\r\n            newId = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.generateRandomId)();\r\n          } while (allGameIds.has(newId));\r\n          allGameIds.add(newId);\r\n          return { ...game, id: newId };\r\n        } else {\r\n          allGameIds.add(game.id);\r\n          return game;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  updateGameOrderFromDOM() {\r\n    const currentGroup = this.groupsManager.getCurrentGroup(this.groupsManager.groups, this.groupsManager.currentGroupId);\r\n    if (!currentGroup) return;\r\n    const gameElements = Array.from(document.querySelectorAll('#latest-games .latest-game'));\r\n    currentGroup.games = gameElements.map(element => {\r\n      const id = element.id.replace('latest-game-', '');\r\n      return currentGroup.games.find(g => g.id === id);\r\n    }).filter(game => game !== undefined);\r\n    this.saveGameData();\r\n  }\r\n\r\n  findGameIndex(id) {\r\n    for (const group of this.groupsManager.groups) {\r\n      const index = group.games.findIndex(game => game.id == id);\r\n      if (index !== -1) return { group, index };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  findGameById(id) {\r\n    for (const group of this.groupsManager.groups) {\r\n      const game = group.games.find(g => g.id === id);\r\n      if (game) return game;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  changeGameCount(delta) {\r\n    if (delta < 0 && this.maxGameCount > 0) this.maxGameCount--;\r\n    else if (delta > 0) this.maxGameCount++;\r\n    this.uiManager.updateGameCountDisplay();\r\n    this.settingsManager.saveSettings();\r\n    this.uiManager.refreshContainer();\r\n  }\r\n\r\n  deleteGame(id) {\r\n    const result = this.findGameIndex(id);\r\n    if (!result) return null;\r\n    const { group, index } = result;\r\n    const deletedGame = group.games.splice(index, 1)[0];\r\n    this.assignGameIds();\r\n    this.saveGameData();\r\n    this.uiManager.refreshContainer();\r\n\r\n    return deletedGame;\r\n  }\r\n\r\n  pinGame(id) {\r\n    const result = this.findGameIndex(id);\r\n    if (!result) return;\r\n    const { group, index } = result;\r\n    const game = group.games[index];\r\n    game.pin = game.pin ? 0 : 1;\r\n    // Sort games: pinned (pin=1) first, unpinned (pin=0) after\r\n    group.games.sort((a, b) => b.pin - a.pin);\r\n    this.assignGameIds();\r\n    this.saveGameData();\r\n    this.uiManager.refreshContainer();\r\n  }\r\n\r\n  exposeGlobalFunctions() {\r\n    window.latestGamesManager = this;\r\n  }\r\n}\r\n\r\n(0,_font_js__WEBPACK_IMPORTED_MODULE_2__.setupFonts)();\r\n\r\n// Initialize the LatestGamesManager instance\r\nwindow.latestGamesManager ??= new LatestGamesManager();\r\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/main.js?");

/***/ }),

/***/ "./src/managers/GroupsManager.js":
/*!***************************************!*\
  !*** ./src/managers/GroupsManager.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GroupsManager: () => (/* binding */ GroupsManager)\n/* harmony export */ });\n/* harmony import */ var _icons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../icons.js */ \"./src/icons.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _tooltip_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tooltip.js */ \"./src/tooltip.js\");\n/* harmony import */ var _gameUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../gameUtils.js */ \"./src/gameUtils.js\");\n\r\n\r\n\r\n\r\n\r\nclass GroupsManager {\r\n  constructor(main) {\r\n    this.main = main;\r\n    this.groups = [];\r\n    this.currentGroupId = null;\r\n    this.groupViewMode = 'tabs';\r\n  }\r\n\r\n  // Generate unique group ID\r\n  generateUniqueGroupId() {\r\n    let id;\r\n    do {\r\n      id = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.generateRandomId)();\r\n    } while (this.groups.some(group => group.id === id));\r\n    return id;\r\n  }\r\n\r\n  createGroup(title) {\r\n    const base = (title && title.trim()) || \"Группа\";\r\n    let candidate = base;\r\n    let counter = 1;\r\n    while (this.groups.some(g => g.title === candidate)) {\r\n      candidate = `${base}-${++counter}`;\r\n    }\r\n    return {\r\n      id: this.generateUniqueGroupId(),\r\n      title: candidate,\r\n      games: []\r\n    };\r\n  }\r\n\r\n  // Rename group by ID (replaces renameGroup from groups.js)\r\n  renameGroup(groupId, newTitle) {\r\n    const group = this.groups.find(g => g.id === groupId);\r\n    if (group) group.title = newTitle;\r\n  }\r\n\r\n  // Remove group by ID (replaces removeGroup from groups.js)\r\n  removeGroup(groupId) {\r\n    const index = this.groups.findIndex(g => g.id === groupId);\r\n    if (index !== -1) this.groups.splice(index, 1);\r\n    return this.groups;\r\n  }\r\n\r\n  // Initialize groups data (uses createGroup for default group)\r\n  initializeGroups() {\r\n    if (this.groups.length === 0) {\r\n      const defaultGroup = this.createGroup();\r\n      this.groups = [defaultGroup];\r\n      this.currentGroupId = defaultGroup.id;\r\n    } else if (!this.currentGroupId || !this.groups.some(g => g.id === this.currentGroupId)) {\r\n      this.currentGroupId = this.groups[0].id;\r\n    }\r\n  }\r\n\r\n  getCurrentGroup() {\r\n    return this.groups.find(g => g.id === this.currentGroupId) || null;\r\n  }\r\n\r\n  // Set groups data\r\n  setGroups(groups, currentGroupId) {\r\n    this.groups = groups;\r\n    this.currentGroupId = currentGroupId;\r\n  }\r\n\r\n  // Set group view mode\r\n  setGroupViewMode(mode) {\r\n    this.groupViewMode = mode;\r\n  }\r\n\r\n  // Get group view mode\r\n  getGroupViewMode() {\r\n    return this.groupViewMode;\r\n  }\r\n\r\n  // Create group view toggle button\r\n  createGroupViewToggle() {\r\n    const toggleButton = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\r\n      className: 'group-view-toggle control-button'\r\n    });\r\n    toggleButton.innerHTML = this.groupViewMode === 'tabs' ? _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.wrap : _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.scroll;\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_2__.createCustomTooltip)(toggleButton, this.groupViewMode === 'tabs'\r\n      ? 'Переключить в единый вид со всеми играми'\r\n      : 'Переключить в режим вкладок по группам');\r\n\r\n    toggleButton.addEventListener('click', () => {\r\n      this.groupViewMode = this.groupViewMode === 'tabs' ? 'unified' : 'tabs';\r\n      this.main.settingsManager.saveSettings();\r\n      this.updateGroupViewToggle(toggleButton);\r\n      this.main.uiManager.refreshContainer();\r\n    });\r\n    return toggleButton;\r\n  }\r\n\r\n  // Update group view toggle button\r\n  updateGroupViewToggle(toggleButton) {\r\n    toggleButton.innerHTML = this.groupViewMode === 'tabs' ? _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.wrap : _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.scroll;\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_2__.createCustomTooltip)(toggleButton, this.groupViewMode === 'tabs'\r\n      ? 'Переключить в единый вид со всеми играми'\r\n      : 'Переключить в режим вкладок по группам');\r\n  }\r\n\r\n  // Move group in specified direction\r\n  moveGroup(direction) {\r\n    const currentIndex = this.groups.findIndex(group => group.id === this.currentGroupId);\r\n    if (currentIndex === -1) return;\r\n\r\n    const newIndex = currentIndex + direction;\r\n    if (newIndex < 0 || newIndex >= this.groups.length) return;\r\n\r\n    const temp = this.groups[currentIndex];\r\n    this.groups[currentIndex] = this.groups[newIndex];\r\n    this.groups[newIndex] = temp;\r\n\r\n    this.main.saveGameData();\r\n    this.main.uiManager.refreshContainer();\r\n  }\r\n\r\n  // Update group control states (enable/disable move buttons)\r\n  updateGroupControlStates() {\r\n    const moveLeftButton = document.querySelector('.move-group-left');\r\n    const moveRightButton = document.querySelector('.move-group-right');\r\n    if (moveLeftButton && moveRightButton) {\r\n      const currentIndex = this.groups.findIndex(group => group.id === this.currentGroupId);\r\n      const isFirst = currentIndex === 0;\r\n      const isLast = currentIndex === this.groups.length - 1;\r\n      moveLeftButton.classList.toggle('latest-games-disabled', isFirst);\r\n      moveRightButton.classList.toggle('latest-games-disabled', isLast);\r\n    }\r\n  }\r\n\r\n  // Create group header (used in unified view)\r\n  createGroupHeader(group) {\r\n    const header = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\r\n      className: `group-header ${group.id === this.currentGroupId ? 'active' : ''}`,\r\n      textContent: group.title,\r\n      dataset: { groupId: group.id }\r\n    });\r\n    header.addEventListener('click', () => {\r\n      this.selectGroup(group.id);\r\n    });\r\n    return header;\r\n  }\r\n\r\n  // Create the entire groups container with controls and tabs\r\n  createGroupsContainer() {\r\n    const groupsContainer = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: 'latest-games-groups' });\r\n\r\n    // Create group controls (persistent across both view modes)\r\n    const groupControls = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\r\n      className: 'group-controls' + (this.groupViewMode === 'unified' ? ' unified-controls' : '')\r\n    });\r\n\r\n    const addButton = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'add-group control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.addGroup\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_2__.createCustomTooltip)(addButton, 'Добавить группу');\r\n    addButton.addEventListener('click', () => this.addGroup());\r\n\r\n    const renameButton = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'rename-group control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.renameGroup\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_2__.createCustomTooltip)(renameButton, 'Переименовать группу');\r\n    renameButton.addEventListener('click', () => this.renameActiveGroup());\r\n\r\n    const removeButton = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'remove-group control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.trashNothing\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_2__.createCustomTooltip)(removeButton, 'Удалить группу');\r\n    removeButton.addEventListener('click', () => this.removeActiveGroup());\r\n\r\n    const groupViewToggle = this.createGroupViewToggle();\r\n\r\n    const moveLeftButton = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'move-group-left control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.decrease\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_2__.createCustomTooltip)(moveLeftButton, 'Переместить вкладку назад');\r\n    moveLeftButton.addEventListener('click', () => {\r\n      if (!moveLeftButton.classList.contains('latest-games-disabled')) {\r\n        this.moveGroup(-1);\r\n      }\r\n    });\r\n\r\n    const moveRightButton = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'move-group-right control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.increase\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_2__.createCustomTooltip)(moveRightButton, 'Переместить вкладку вперёд');\r\n    moveRightButton.addEventListener('click', () => {\r\n      if (!moveRightButton.classList.contains('latest-games-disabled')) {\r\n        this.moveGroup(1);\r\n      }\r\n    });\r\n\r\n    groupControls.append(addButton, renameButton, removeButton, groupViewToggle, moveLeftButton, moveRightButton);\r\n\r\n    groupsContainer.appendChild(groupControls);\r\n\r\n    // Create tabs-container for group tabs only\r\n    const tabsContainer = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'tabs-container' });\r\n    this.groups.forEach(group => {\r\n      const tab = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n        className: `group-tab ${group.id === this.currentGroupId ? 'active' : ''}`,\r\n        textContent: group.title,\r\n        dataset: { groupId: group.id }\r\n      });\r\n      tab.addEventListener('click', () => {\r\n        this.selectGroup(group.id);\r\n      });\r\n      tabsContainer.appendChild(tab);\r\n    });\r\n\r\n    // Hide tabs-container in unified view\r\n    if (this.groupViewMode === 'unified') {\r\n      tabsContainer.classList.add('latest-games-hidden');\r\n    }\r\n\r\n    groupsContainer.appendChild(tabsContainer);\r\n    return groupsContainer;\r\n  }\r\n\r\n  // Select a group by ID\r\n  selectGroup(id) {\r\n    if (this.groups.some(group => group.id === id)) {\r\n      this.currentGroupId = id;\r\n      this.main.saveGameData();\r\n      this.updateActiveGroup();\r\n      this.main.uiManager.refreshContainer();\r\n    }\r\n  }\r\n\r\n  // Update active group visual states\r\n  updateActiveGroup() {\r\n    // Update group headers (only present in unified mode)\r\n    document.querySelectorAll('.group-header').forEach(header =>\r\n      header.classList.toggle('active', header.dataset.groupId === this.currentGroupId)\r\n    );\r\n    // Update tabs (present in both modes, but hidden in unified)\r\n    document.querySelectorAll('.group-tab').forEach(tab =>\r\n      tab.classList.toggle('active', tab.dataset.groupId === this.currentGroupId)\r\n    );\r\n  }\r\n\r\n  // Add a new group\r\n  addGroup() {\r\n    const title = prompt('Введите название группы:')?.trim() || null;\r\n    const newGroup = this.createGroup(title);\r\n    this.groups.push(newGroup);\r\n    this.currentGroupId = newGroup.id;\r\n    this.main.saveGameData();\r\n    this.main.uiManager.refreshContainer();\r\n  }\r\n\r\n  // Rename the active group\r\n  renameActiveGroup() {\r\n    const activeGroup = this.getCurrentGroup();\r\n    const newTitle = prompt('Введите новое название группы:', activeGroup?.title)?.trim();\r\n    if (newTitle) {\r\n      this.renameGroup(this.currentGroupId, newTitle);\r\n      this.main.saveGameData();\r\n      this.main.uiManager.refreshContainer();\r\n    }\r\n  }\r\n\r\n  // Remove the active group\r\n  removeActiveGroup() {\r\n    if (this.groups.length <= 1) {\r\n      alert('Нельзя удалить последнюю группу.');\r\n      return;\r\n    }\r\n    this.removeGroup(this.currentGroupId);\r\n    this.currentGroupId = this.groups[0].id;\r\n    this.main.saveGameData();\r\n    this.main.uiManager.refreshContainer();\r\n  }\r\n\r\n  // Refresh groups container in the DOM\r\n  refreshGroupsContainer() {\r\n    const groupsContainer = document.getElementById('latest-games-groups');\r\n    if (groupsContainer) {\r\n      // Update groupControls class based on view mode\r\n      const groupControls = groupsContainer.querySelector('.group-controls');\r\n      if (groupControls) {\r\n        groupControls.className = 'group-controls' + (this.groupViewMode === 'unified' ? ' unified-controls' : '');\r\n      }\r\n\r\n      // Update tabs-container\r\n      const tabsContainer = groupsContainer.querySelector('.tabs-container');\r\n      if (tabsContainer) {\r\n        tabsContainer.innerHTML = ''; // Clear existing tabs\r\n        if (this.groupViewMode === 'tabs') {\r\n          // Populate tabs and show tabs-container\r\n          this.groups.forEach(group => {\r\n            const tab = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n              className: `group-tab ${group.id === this.currentGroupId ? 'active' : ''}`,\r\n              textContent: group.title,\r\n              dataset: { groupId: group.id }\r\n            });\r\n            tab.addEventListener('click', () => this.selectGroup(group.id));\r\n            tabsContainer.appendChild(tab);\r\n          });\r\n          tabsContainer.classList.remove('latest-games-hidden');\r\n        } else {\r\n          // Hide tabs-container in unified mode\r\n          tabsContainer.classList.add('latest-games-hidden');\r\n        }\r\n      }\r\n    }\r\n    this.updateGroupControlStates();\r\n  }\r\n\r\n  isCyrillic(char) {\r\n    const code = char.charCodeAt(0);\r\n    return (code >= 1040 && code <= 1103) || code === 1025 || code === 1105;\r\n  }\r\n\r\n  compareGameNames(a, b) {\r\n    const nameA = (0,_gameUtils_js__WEBPACK_IMPORTED_MODULE_3__.generateGameName)(a).toLowerCase();\r\n    const nameB = (0,_gameUtils_js__WEBPACK_IMPORTED_MODULE_3__.generateGameName)(b).toLowerCase();\r\n    const isCyrillicA = this.isCyrillic(nameA[0]);\r\n    const isCyrillicB = this.isCyrillic(nameB[0]);\r\n    if (isCyrillicA && !isCyrillicB) return -1;\r\n    if (!isCyrillicA && isCyrillicB) return 1;\r\n    return nameA.localeCompare(nameB, 'ru');\r\n  }\r\n\r\n  // Sort games in active group alphabetically\r\n  sortActiveGroupGames() {\r\n    const activeGroup = this.getCurrentGroup();\r\n    if (!activeGroup) return;\r\n    const pinnedGames = activeGroup.games.filter(game => game.pin);\r\n    const unpinnedGames = activeGroup.games.filter(game => !game.pin);\r\n    pinnedGames.sort((a, b) => this.compareGameNames(a, b));\r\n    unpinnedGames.sort((a, b) => this.compareGameNames(a, b));\r\n    activeGroup.games = [...pinnedGames, ...unpinnedGames];\r\n    this.main.saveGameData();\r\n    this.main.uiManager.refreshContainer();\r\n  }\r\n\r\n  // Get pinned game count for active group\r\n  getPinnedGameCount() {\r\n    const activeGroup = this.getCurrentGroup();\r\n    return activeGroup ? activeGroup.games.filter(game => game.pin).length : 0;\r\n  }\r\n}\n\n//# sourceURL=webpack://tampermonkey-script/./src/managers/GroupsManager.js?");

/***/ }),

/***/ "./src/managers/PageHandler.js":
/*!*************************************!*\
  !*** ./src/managers/PageHandler.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PageHandler: () => (/* binding */ PageHandler)\n/* harmony export */ });\n/* harmony import */ var _vocabularyChecker_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../vocabularyChecker.js */ \"./src/vocabularyChecker.js\");\n/* harmony import */ var _vocabularyCreation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../vocabularyCreation.js */ \"./src/vocabularyCreation.js\");\n/* harmony import */ var _vocabularyParser_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../vocabularyParser.js */ \"./src/vocabularyParser.js\");\n/* harmony import */ var _gameUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../gameUtils.js */ \"./src/gameUtils.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nclass PageHandler {\r\n  constructor(main) {\r\n    this.main = main;\r\n  }\r\n\r\n  handlePageSpecificLogic() {\r\n    const { href } = location;\r\n    if (/https?:\\/\\/klavogonki\\.ru\\/g\\/\\?gmid=/.test(href)) {\r\n      const observer = new MutationObserver(() => {\r\n        const gameDescription = document.querySelector('#gamedesc');\r\n        if (gameDescription && gameDescription.textContent) {\r\n          observer.disconnect(); // Stop observing once the game description is found\r\n          this.saveCurrentGameParams();\r\n          this.handleGameActions();\r\n        }\r\n      });\r\n      observer.observe(document.body, { childList: true, subtree: true });\r\n\r\n      const finished = document.getElementById('finished');\r\n      if (finished) {\r\n        const observer = new MutationObserver(() => {\r\n          observer.disconnect();\r\n          this.handleGameActions();\r\n        });\r\n        observer.observe(finished, { attributes: true });\r\n      }\r\n    }\r\n\r\n    // Highlight vocabularies and attach vocabulary creation popup on vocs page\r\n    if (/klavogonki\\.ru\\/vocs\\//.test(href)) {\r\n      (0,_vocabularyChecker_js__WEBPACK_IMPORTED_MODULE_0__.highlightExistingVocabularies)(this.main.groupsManager.groups);\r\n      (0,_vocabularyCreation_js__WEBPACK_IMPORTED_MODULE_1__.attachVocabularyCreation)(this.main.groupsManager.groups, this.main);\r\n      (0,_vocabularyParser_js__WEBPACK_IMPORTED_MODULE_2__.attachVocabularyParser)();\r\n    }\r\n  }\r\n\r\n  saveCurrentGameParams() {\r\n    const gameDesc = document.getElementById('gamedesc');\r\n    if (!gameDesc) throw new Error('#gamedesc element not found.');\r\n    const span = gameDesc.querySelector('span');\r\n    if (!span) throw new Error('#gamedesc span element not found.');\r\n    const descText = gameDesc.textContent;\r\n    if (/соревнование/.test(descText) || !this.main.maxGameCount || this.main.shouldAutoSave === false) return false;\r\n    const gameParams = (0,_gameUtils_js__WEBPACK_IMPORTED_MODULE_3__.parseGameParams)(span, descText);\r\n    const gameParamsString = JSON.stringify(gameParams);\r\n    const currentGroup = this.main.groupsManager.getCurrentGroup(this.main.groupsManager.groups, this.main.groupsManager.currentGroupId);\r\n    if (!currentGroup) return;\r\n    // Check if a game with the same parameters already exists (pinned or unpinned)\r\n    const gameExists = currentGroup.games.some(game => JSON.stringify(game.params) === gameParamsString);\r\n    if (gameExists) {\r\n      return;\r\n    }\r\n    // Create new game object (unpinned)\r\n    const newGame = { params: gameParams, id: (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.generateRandomId)(), pin: 0 };\r\n    // Insert after pinned games\r\n    const pinnedCount = currentGroup.games.filter(g => g.pin).length;\r\n    currentGroup.games.splice(pinnedCount, 0, newGame);\r\n    // Enforce the limit: remove excess unpinned games from the end\r\n    const maxGamesToKeep = pinnedCount + this.main.maxGameCount;\r\n    if (currentGroup.games.length > maxGamesToKeep) {\r\n      currentGroup.games.splice(maxGamesToKeep, currentGroup.games.length - maxGamesToKeep);\r\n    }\r\n    this.main.assignGameIds();\r\n    this.main.saveGameData();\r\n  }\r\n\r\n  handleGameActions() {\r\n    // Handle auto-start\r\n    if (this.main.shouldStart) {\r\n      const pausedElement = document.querySelector('#status-inner #paused');\r\n      if (pausedElement && pausedElement.style.display !== 'none') {\r\n        if (typeof game !== 'undefined' && game.hostStart) {\r\n          (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.sleep)(this.main.startDelay).then(() => {\r\n            game.hostStart();\r\n          });\r\n        }\r\n      }\r\n    }\r\n    // Handle auto-replay\r\n    if (this.main.shouldReplay) {\r\n      const finishedElement = document.querySelector('#status-inner #finished');\r\n      if (finishedElement && finishedElement.style.display !== 'none') {\r\n        const gameIdMatch = location.href.match(/gmid=(\\d+)/);\r\n        if (gameIdMatch) {\r\n          const gameId = gameIdMatch[1];\r\n          (0,_utils_js__WEBPACK_IMPORTED_MODULE_4__.sleep)(this.main.replayDelay).then(() => {\r\n            window.location.href = `https://klavogonki.ru/g/${gameId}.replay`;\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/managers/PageHandler.js?");

/***/ }),

/***/ "./src/managers/SettingsManager.js":
/*!*****************************************!*\
  !*** ./src/managers/SettingsManager.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SettingsManager: () => (/* binding */ SettingsManager)\n/* harmony export */ });\nclass SettingsManager {\r\n  constructor(main) {\r\n    this.main = main;\r\n  }\r\n\r\n  loadSettings() {\r\n    try {\r\n      const settings = JSON.parse(localStorage.getItem('latestGamesSettings') || '{}');\r\n\r\n      this.main.maxGameCount = settings.maxGameCount ?? this.main.maxGameCount;\r\n      this.main.currentTheme = settings.currentTheme ?? this.main.currentTheme;\r\n      this.main.displayMode = settings.displayMode ?? this.main.displayMode;\r\n      this.main.groupsManager.groupViewMode = settings.groupViewMode ?? this.main.groupsManager.groupViewMode;\r\n      this.main.previousScrollPosition = settings.previousScrollPosition ?? this.main.previousScrollPosition;\r\n      this.main.panelWidth = settings.panelWidth ?? this.main.panelWidth;\r\n      this.main.enableDragging = settings.enableDragging ?? this.main.enableDragging;\r\n      this.main.shouldAutoSave = settings.shouldAutoSave ?? this.main.shouldAutoSave;\r\n      this.main.alwaysVisiblePanel = settings.alwaysVisiblePanel ?? this.main.alwaysVisiblePanel;\r\n      this.main.panelYPosition = settings.panelYPosition ?? this.main.panelYPosition;\r\n      this.main.hidePanelDelay = settings.hidePanelDelay ?? this.main.hidePanelDelay;\r\n      this.main.shouldStart = settings.shouldStart ?? this.main.shouldStart;\r\n      this.main.startDelay = settings.startDelay ?? this.main.startDelay;\r\n      this.main.shouldReplay = settings.shouldReplay ?? this.main.shouldReplay;\r\n      this.main.replayDelay = settings.replayDelay ?? this.main.replayDelay;\r\n\r\n    } catch (error) {\r\n      console.warn('Could not load settings from localStorage:', error);\r\n    }\r\n  }\r\n\r\n  saveSettings() {\r\n    try {\r\n      const settings = {\r\n        maxGameCount: this.main.maxGameCount,\r\n        currentTheme: this.main.currentTheme,\r\n        displayMode: this.main.displayMode,\r\n        groupViewMode: this.main.groupsManager.groupViewMode,\r\n        previousScrollPosition: this.main.previousScrollPosition,\r\n        panelWidth: this.main.panelWidth,\r\n        enableDragging: this.main.enableDragging,\r\n        shouldAutoSave: this.main.shouldAutoSave,\r\n        alwaysVisiblePanel: this.main.alwaysVisiblePanel,\r\n        panelYPosition: this.main.panelYPosition,\r\n        hidePanelDelay: this.main.hidePanelDelay,\r\n        shouldStart: this.main.shouldStart,\r\n        startDelay: this.main.startDelay,\r\n        shouldReplay: this.main.shouldReplay,\r\n        replayDelay: this.main.replayDelay\r\n      };\r\n\r\n      localStorage.setItem('latestGamesSettings', JSON.stringify(settings));\r\n    } catch (error) {\r\n      console.warn('Could not save settings to localStorage:', error);\r\n    }\r\n  }\r\n\r\n  async importSettings(main) {\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = '.json,application/json';\r\n    input.style.display = 'none';\r\n    input.onchange = async (e) => {\r\n      const file = e.target.files[0];\r\n      if (!file) return;\r\n      try {\r\n        const text = await file.text();\r\n        const data = JSON.parse(text);\r\n        if (typeof data === 'object' && data !== null) {\r\n          if (data.latestGamesSettings) localStorage.setItem('latestGamesSettings', JSON.stringify(data.latestGamesSettings));\r\n          if (data.latestGamesData) localStorage.setItem('latestGamesData', JSON.stringify(data.latestGamesData));\r\n          main.settingsManager.loadSettings();\r\n          main.loadGameData();\r\n          main.uiManager.refreshContainer();\r\n          main.themeManager.applyTheme();\r\n        } else {\r\n          alert('Файл не содержит валидный JSON настроек.');\r\n        }\r\n      } catch (err) {\r\n        alert('Ошибка при импорте: ' + err);\r\n      }\r\n    };\r\n    document.body.appendChild(input);\r\n    input.click();\r\n    setTimeout(() => input.remove(), 1000);\r\n  }\r\n\r\n  exportSettings(main) {\r\n    const all = {\r\n      latestGamesSettings: JSON.parse(localStorage.getItem('latestGamesSettings') || '{}'),\r\n      latestGamesData: { groups: main.groupsManager.groups, currentGroupId: main.groupsManager.currentGroupId }\r\n    };\r\n    const blob = new Blob([JSON.stringify(all, null, 2)], { type: 'application/json' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = 'kg-latest-games-settings.json';\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    setTimeout(() => {\r\n      URL.revokeObjectURL(url);\r\n      a.remove();\r\n    }, 1000);\r\n  }\r\n\r\n  removeAllSettings(main) {\r\n    localStorage.removeItem('latestGamesSettings');\r\n    localStorage.removeItem('latestGamesData');\r\n    main.groupsManager.groups = [main.groupsManager.createGroup('Группа-1')];\r\n    main.groupsManager.currentGroupId = main.groupsManager.groups[0].id;\r\n    main.saveGameData();\r\n    main.uiManager.refreshContainer();\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/managers/SettingsManager.js?");

/***/ }),

/***/ "./src/managers/ThemeManager.js":
/*!**************************************!*\
  !*** ./src/managers/ThemeManager.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ThemeManager: () => (/* binding */ ThemeManager)\n/* harmony export */ });\n/* harmony import */ var _icons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../icons.js */ \"./src/icons.js\");\n/* harmony import */ var _tooltip_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tooltip.js */ \"./src/tooltip.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n\r\n\r\n\r\n\r\nclass ThemeManager {\r\n  constructor(main) {\r\n    this.main = main;\r\n  }\r\n\r\n  applyTheme() {\r\n    document.documentElement.classList.remove('latest-games-light-theme', 'latest-games-dark-theme');\r\n    document.documentElement.classList.add(\r\n      this.main.currentTheme === 'light' ? 'latest-games-light-theme' : 'latest-games-dark-theme'\r\n    );\r\n    this.updateThemeIcon();\r\n  }\r\n\r\n  updateThemeIcon() {\r\n    const toggleThemeButton = document.querySelector('#latest-games-container .theme-toggle');\r\n    if (toggleThemeButton) {\r\n      toggleThemeButton.innerHTML = this.main.currentTheme === 'light' ? _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.sun : _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.moon;\r\n    }\r\n  }\r\n\r\n  toggleTheme(button) {\r\n    this.main.currentTheme = this.main.currentTheme === 'light' ? 'dark' : 'light';\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_1__.createCustomTooltip)(button, `Изменить тему на ${this.main.currentTheme === 'light' ? 'тёмную' : 'светлую'}`);\r\n    this.main.settingsManager.saveSettings();\r\n    this.applyTheme();\r\n  }\r\n\r\n  createThemeToggle() {\r\n    const toggleThemeButton = (0,_utils_js__WEBPACK_IMPORTED_MODULE_2__.createElement)('div', {\r\n      className: 'theme-toggle control-button'\r\n    });\r\n    toggleThemeButton.innerHTML = this.main.currentTheme === 'light' ? _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.sun : _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.moon;\r\n    toggleThemeButton.addEventListener('click', () => this.toggleTheme(toggleThemeButton));\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_1__.createCustomTooltip)(toggleThemeButton, `Изменить тему на ${this.main.currentTheme === 'light' ? 'тёмную' : 'светлую'}`);\r\n    return toggleThemeButton;\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/managers/ThemeManager.js?");

/***/ }),

/***/ "./src/managers/UIManager.js":
/*!***********************************!*\
  !*** ./src/managers/UIManager.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UIManager: () => (/* binding */ UIManager)\n/* harmony export */ });\n/* harmony import */ var _icons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../icons.js */ \"./src/icons.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _gameUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../gameUtils.js */ \"./src/gameUtils.js\");\n/* harmony import */ var _vocabularyMigration_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../vocabularyMigration.js */ \"./src/vocabularyMigration.js\");\n/* harmony import */ var _tooltip_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tooltip.js */ \"./src/tooltip.js\");\n/* harmony import */ var _gamePopup_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../gamePopup.js */ \"./src/gamePopup.js\");\n/* harmony import */ var _drag_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../drag.js */ \"./src/drag.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass UIManager {\r\n  constructor(main) {\r\n    this.main = main;\r\n  }\r\n\r\n  createGameElement(game, id) {\r\n    const gametypeClass = game.pin ? ` pin-gametype-${game.params.gametype}` : '';\r\n    const li = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('li', {\r\n      className: `latest-game${game.pin ? ' pin-game' : ''}${gametypeClass}`,\r\n      id: `latest-game-${id}`\r\n    });\r\n    const buttons = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'latest-game-buttons' });\r\n    const pinButton = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\r\n      className: 'latest-game-pin',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.pin\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(pinButton, game.pin ? 'Открепить' : 'Закрепить');\r\n    pinButton.addEventListener('click', () => this.main.pinGame(id));\r\n\r\n    const deleteButton = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\r\n      className: 'latest-game-delete',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.delete\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(deleteButton, 'Удалить');\r\n    deleteButton.addEventListener('click', () => this.main.deleteGame(id));\r\n\r\n    buttons.appendChild(pinButton);\r\n    buttons.appendChild(deleteButton);\r\n\r\n    const link = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('a', {\r\n      href: (0,_gameUtils_js__WEBPACK_IMPORTED_MODULE_2__.generateGameLink)(game),\r\n      innerHTML: (0,_gameUtils_js__WEBPACK_IMPORTED_MODULE_2__.generateGameName)(game)\r\n    });\r\n\r\n    link.addEventListener('click', (e) => {\r\n      if (this.main.wasDragging) {\r\n        e.preventDefault();\r\n        this.main.wasDragging = false;\r\n      }\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(link, `\r\n      [Клик] Перейти к игре с текущими параметрами\r\n      [Shift + Клик] Перейти к игре с альтернативными параметрами\r\n      [Удерживание (ЛКМ)] аналогично (Shift + Клик)\r\n    `);\r\n\r\n    li.appendChild(buttons);\r\n    li.appendChild(link);\r\n    if (game.pin && this.main.enableDragging) (0,_drag_js__WEBPACK_IMPORTED_MODULE_6__.addDragFunctionality)(this.main, li);\r\n    return li;\r\n  }\r\n\r\n  createControls() {\r\n    const controlsContainer = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'latest-games-controls' });\r\n    const controlsLimiter = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'controls-limiter' });\r\n    const controlsButtons = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'controls-buttons' });\r\n    controlsContainer.append(controlsLimiter, controlsButtons);\r\n\r\n    const options = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', { id: 'latest-games-options' });\r\n    const decreaseBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      id: 'latest-games-count-dec',\r\n      className: 'control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.decrease\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(decreaseBtn, 'Уменьшить количество сохраняемых игр');\r\n\r\n    const countDisplay = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      id: 'latest-games-count',\r\n      className: this.main.shouldAutoSave === false ? 'latest-games-disabled' : '',\r\n      textContent: this.main.maxGameCount.toString()\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(countDisplay, this.main.shouldAutoSave ? 'Автосохранение включено' : 'Автосохранение отключено');\r\n\r\n    countDisplay.addEventListener('click', () => {\r\n      this.main.shouldAutoSave = !this.main.shouldAutoSave;\r\n      this.updateGameCountDisplay();\r\n      this.main.settingsManager.saveSettings();\r\n      this.refreshContainer();\r\n    });\r\n\r\n    const increaseBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      id: 'latest-games-count-inc',\r\n      className: 'control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.increase\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(increaseBtn, 'Увеличить количество сохраняемых игр');\r\n\r\n    decreaseBtn.addEventListener('click', () => this.main.changeGameCount(-1));\r\n    increaseBtn.addEventListener('click', () => this.main.changeGameCount(1));\r\n\r\n    options.append(decreaseBtn, countDisplay, increaseBtn);\r\n\r\n    // Helper function to update tooltip (using your preferred format)\r\n    const updateTooltip = (button, isEnabled, enabledText, disabledText, delay, delayText) => {\r\n      (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(button, `\r\n        [Клик] ${isEnabled ? enabledText : disabledText}\r\n        [Shift + Клик] ${delayText + (delay ? ` (${delay} мс)` : '')}\r\n      `);\r\n    };\r\n\r\n    // Helper function to create control button with click handler\r\n    const setupControlButton = (button, context, property, delayProperty, texts) => {\r\n      const { enabledText, disabledText, delayText, delayPromptText, delayErrorText } = texts;\r\n\r\n      // Set initial state\r\n      const isInitiallyEnabled = context[property];\r\n      button.classList.toggle('latest-games-disabled', !isInitiallyEnabled);\r\n      updateTooltip(button, isInitiallyEnabled, enabledText, disabledText, context[delayProperty], delayText);\r\n\r\n      // Add click handler\r\n      button.onclick = (e) => {\r\n        if (e.shiftKey) {\r\n          const newDelay = prompt(delayPromptText, \"\");\r\n          if (newDelay !== null) {\r\n            const delayValue = parseInt(newDelay, 10);\r\n            if (!isNaN(delayValue) && delayValue >= 0) {\r\n              context[delayProperty] = delayValue;\r\n              this.main.settingsManager.saveSettings();\r\n              updateTooltip(button, context[property], enabledText, disabledText, delayValue, delayText);\r\n            } else {\r\n              alert(delayErrorText);\r\n            }\r\n          }\r\n        } else {\r\n          context[property] = !context[property];\r\n          this.main.settingsManager.saveSettings();\r\n          button.classList.toggle('latest-games-disabled', !context[property]);\r\n          updateTooltip(button, context[property], enabledText, disabledText, context[delayProperty], delayText);\r\n        }\r\n      };\r\n    };\r\n\r\n    // Create play button\r\n    const playBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'latest-games-play control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.play\r\n    });\r\n\r\n    setupControlButton(playBtn, this.main, 'shouldStart', 'startDelay', {\r\n      enabledText: 'Отключить автозапуск игры',\r\n      disabledText: 'Включить автозапуск игры',\r\n      delayText: 'Изменить задержку запуска в миллисекундах',\r\n      delayPromptText: 'Введите задержку запуска в миллисекундах:',\r\n      delayErrorText: 'Пожалуйста, введите корректное значение задержки запуска.'\r\n    });\r\n\r\n    // Create replay button\r\n    const replayBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'latest-games-replay control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.replay\r\n    });\r\n\r\n    setupControlButton(replayBtn, this.main, 'shouldReplay', 'replayDelay', {\r\n      enabledText: 'Отключить автоповтор игры',\r\n      disabledText: 'Включить автоповтор игры',\r\n      delayText: 'Изменить задержку автоповтора в миллисекундах',\r\n      delayPromptText: 'Введите задержку автоповтора в миллисекундах:',\r\n      delayErrorText: 'Пожалуйста, введите корректное значение задержки автоповтора.'\r\n    });\r\n\r\n    const pinAllBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'latest-games-pinall control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.pinAll\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(pinAllBtn, `\r\n      [Клик] Закрепить все игры в текущей группе\r\n      [Shift + Клик] Закрепить все игры во всех группах\r\n    `);\r\n    pinAllBtn.onclick = (e) => {\r\n      if (e.shiftKey) {\r\n        // Shift + Click: Pin all games in all groups\r\n        this.main.groupsManager.groups.forEach(group => group.games.forEach(game => game.pin = 1));\r\n      } else {\r\n        // Single Click: Pin all games only in current group\r\n        const currentGroup = this.main.groupsManager.getCurrentGroup(this.main.groupsManager.groups, this.main.groupsManager.currentGroupId);\r\n        if (currentGroup) {\r\n          currentGroup.games.forEach(game => game.pin = 1);\r\n        }\r\n      }\r\n      this.main.saveGameData();\r\n      this.refreshContainer();\r\n    };\r\n\r\n    const unpinAllBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'latest-games-unpinall control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.unpinAll\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(unpinAllBtn, `\r\n      [Клик] Открепить все игры в текущей группе\r\n      [Shift + Клик] Открепить все игры во всех группах\r\n    `);\r\n    unpinAllBtn.onclick = (e) => {\r\n      if (e.shiftKey) {\r\n        // Shift + Click: Unpin all games in all groups\r\n        this.main.groupsManager.groups.forEach(group => group.games.forEach(game => game.pin = 0));\r\n      } else {\r\n        // Single Click: Unpin games only in current group\r\n        const currentGroup = this.main.groupsManager.getCurrentGroup(this.main.groupsManager.groups, this.main.groupsManager.currentGroupId);\r\n        if (currentGroup) {\r\n          currentGroup.games.forEach(game => game.pin = 0);\r\n        }\r\n      }\r\n      this.main.saveGameData();\r\n      this.refreshContainer();\r\n    };\r\n\r\n    const sortBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'latest-games-sort control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.sort\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(sortBtn, 'Сортировать игры в текущей группе по алфавиту');\r\n    sortBtn.addEventListener('click', () => this.main.groupsManager.sortActiveGroupGames());\r\n\r\n    const importBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'latest-games-import control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.import\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(importBtn, 'Импортировать настройки из JSON файла');\r\n    importBtn.onclick = () => this.main.settingsManager.importSettings(this.main);\r\n\r\n    const exportBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'latest-games-export control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.export\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(exportBtn, 'Экспортировать все настройки в JSON файл');\r\n    exportBtn.onclick = () => this.main.settingsManager.exportSettings(this.main);\r\n\r\n    const removeAllBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'latest-games-removeall control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.trashNothing\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(removeAllBtn, 'Удалить все настройки');\r\n    removeAllBtn.onclick = () => this.main.settingsManager.removeAllSettings(this.main);\r\n\r\n    const removeUnpinnedBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'latest-games-remove-unpinned control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.broom\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(removeUnpinnedBtn, `\r\n      [Клик] Удалить все незакреплённые игры в текущей группе\r\n      [Shift + Клик] Удалить все незакреплённые игры во всех группах\r\n    `);\r\n\r\n    removeUnpinnedBtn.onclick = (e) => {\r\n      if (e.shiftKey) {\r\n        // Shift + Click: Remove unpinned games from all groups\r\n        this.main.groupsManager.groups.forEach(group => {\r\n          group.games = group.games.filter(game => game.pin);\r\n        });\r\n      } else {\r\n        // Click: Remove unpinned games only from current group\r\n        const currentGroup = this.main.groupsManager.getCurrentGroup(this.main.groupsManager.groups, this.main.groupsManager.currentGroupId);\r\n        if (currentGroup) {\r\n          currentGroup.games = currentGroup.games.filter(game => game.pin);\r\n        }\r\n      }\r\n      this.main.saveGameData();\r\n      this.refreshContainer();\r\n    };\r\n\r\n    const dragToggleBtn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('span', {\r\n      className: 'latest-games-drag-toggle control-button',\r\n      innerHTML: _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.dragToggle\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(dragToggleBtn, this.main.enableDragging ? 'Перетаскивание включено' : 'Перетаскивание отключено');\r\n    dragToggleBtn.classList.toggle('latest-games-disabled', !this.main.enableDragging);\r\n\r\n    dragToggleBtn.onclick = () => {\r\n      this.main.enableDragging = !this.main.enableDragging;\r\n      this.main.settingsManager.saveSettings();\r\n      this.refreshContainer();\r\n      (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(dragToggleBtn, this.main.enableDragging ? 'Перетаскивание включено' : 'Перетаскивание отключено');\r\n      dragToggleBtn.classList.toggle('latest-games-disabled', !this.main.enableDragging);\r\n    };\r\n\r\n    controlsLimiter.appendChild(options);\r\n    controlsButtons.append(\r\n      this.main.themeManager.createThemeToggle(),\r\n      this.main.viewManager.createDisplayModeToggle(),\r\n      playBtn, replayBtn, pinAllBtn, unpinAllBtn, sortBtn, importBtn, exportBtn, removeAllBtn, removeUnpinnedBtn, dragToggleBtn\r\n    );\r\n\r\n    return controlsContainer;\r\n  }\r\n\r\n  updateContainerYPosition() {\r\n    const container = document.getElementById('latest-games-container');\r\n    if (!container) return;\r\n    container.style.top = this.main.viewManager.getDisplayMode() === 'wrap' ? `${this.main.panelYPosition}vh` : '';\r\n  }\r\n\r\n  createContainer() {\r\n    const container = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: 'latest-games-container' });\r\n    const groupsContainer = this.main.groupsManager.createGroupsContainer();\r\n\r\n    container.appendChild(groupsContainer);\r\n    const gamesList = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('ul', { id: 'latest-games' });\r\n\r\n    this.populateGamesList(gamesList);\r\n    container.appendChild(gamesList);\r\n    const controls = this.createControls();\r\n    container.appendChild(controls);\r\n\r\n    container.addEventListener('scroll', () => {\r\n      this.main.previousScrollPosition = container.scrollTop;\r\n      this.main.settingsManager.saveSettings();\r\n    });\r\n\r\n    container.addEventListener('mouseenter', () => this.showContainer());\r\n    container.addEventListener('mouseleave', () => this.hideContainer());\r\n\r\n    let longPressTimer = null;\r\n    let suppressClick = false;\r\n\r\n    const showGamePopup = (e) => {\r\n      const gameElement = e.target.closest('.latest-game');\r\n      if (!gameElement) return;\r\n      const gameId = gameElement.id.replace('latest-game-', '');\r\n      const game = this.main.findGameById(gameId);\r\n      if (game && !this.main.enableDragging) (0,_gamePopup_js__WEBPACK_IMPORTED_MODULE_5__.createGamePopup)(game, e); // Show popup only if dragging is disabled\r\n    };\r\n\r\n    gamesList.addEventListener('mousedown', (e) => {\r\n      if (e.button !== 0) return; // Only left button\r\n\r\n      if (e.shiftKey) {\r\n        // Immediate Shift+press\r\n        suppressClick = true;\r\n        e.preventDefault();\r\n        showGamePopup(e);\r\n      } else {\r\n        // Start long-press timer\r\n        longPressTimer = setTimeout(() => {\r\n          suppressClick = true;\r\n          e.preventDefault();\r\n          showGamePopup(e);\r\n        }, 300);\r\n      }\r\n    });\r\n\r\n    gamesList.addEventListener('mouseup', () => {\r\n      clearTimeout(longPressTimer);\r\n    });\r\n\r\n    // Capture-phase click listener to block the \"click\" after a long press or Shift press\r\n    gamesList.addEventListener('click', (e) => {\r\n      if (suppressClick) {\r\n        e.stopImmediatePropagation(); // Prevent any further click handling\r\n        e.preventDefault(); // Prevent default action\r\n        suppressClick = false;\r\n      }\r\n    }, { capture: true });\r\n\r\n    // Add context menu event listener\r\n    gamesList.addEventListener('contextmenu', (e) => {\r\n      const gameElement = e.target.closest('.latest-game');\r\n      if (gameElement) {\r\n        e.preventDefault();\r\n        const gameId = gameElement.id.replace('latest-game-', '');\r\n        (0,_vocabularyMigration_js__WEBPACK_IMPORTED_MODULE_3__.showMigrationPopup)(this.main, this.main.groupsManager.groups, this.main.groupsManager.currentGroupId, e, gameId);\r\n      }\r\n    });\r\n\r\n    let handle = container.querySelector('.resize-handle');\r\n    if (!handle) {\r\n      handle = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { className: 'resize-handle' });\r\n      container.appendChild(handle);\r\n    }\r\n\r\n    // Resize logic: only active in wrap mode\r\n    const setupResizeHandle = () => {\r\n      const mode = this.main.viewManager.getDisplayMode();\r\n      if (mode === 'wrap') {\r\n        // Apply stored width\r\n        container.style.width = this.main.panelWidth;\r\n        handle.style.display = '';\r\n        let isDragging = false, startX, startWidth;\r\n        const onMouseMove = (e) => {\r\n          if (!isDragging) return;\r\n          const dx = e.clientX - startX;\r\n          let newWidthPx = startWidth + dx;\r\n          // Prevent going beyond viewport and 95vw\r\n          const maxPx = window.innerWidth * 0.95;\r\n          newWidthPx = Math.max(350, Math.min(newWidthPx, maxPx));\r\n          const newWidthVw = Math.round((newWidthPx / window.innerWidth) * 100 * 10) / 10;\r\n          container.style.width = `${newWidthVw}vw`;\r\n        };\r\n        const onMouseUp = () => {\r\n          if (!isDragging) return;\r\n          isDragging = false;\r\n          document.removeEventListener('mousemove', onMouseMove);\r\n          document.removeEventListener('mouseup', onMouseUp);\r\n          this.main.panelWidth = container.style.width;\r\n          this.main.settingsManager.saveSettings();\r\n        };\r\n        handle.onmousedown = (e) => {\r\n          if (e.button !== 0) return; // Only allow left mouse button\r\n          isDragging = true;\r\n          startX = e.clientX;\r\n          startWidth = container.offsetWidth;\r\n          document.addEventListener('mousemove', onMouseMove);\r\n          document.addEventListener('mouseup', onMouseUp);\r\n          e.preventDefault();\r\n        };\r\n      } else {\r\n        handle.style.display = 'none';\r\n        container.style.width = '';\r\n        handle.onmousedown = null;\r\n      }\r\n    };\r\n\r\n    setupResizeHandle();\r\n\r\n    const setupYPositioning = () => {\r\n      const mode = this.main.viewManager.getDisplayMode();\r\n      if (mode === 'wrap') {\r\n        this.updateContainerYPosition();\r\n        let isDraggingY = false, startY, startTop;\r\n\r\n        const onMouseMoveY = (e) => {\r\n          if (!isDraggingY) return;\r\n          const dy = e.clientY - startY;\r\n          const newTopVh = startTop + (dy / window.innerHeight) * 100;\r\n\r\n          // Calculate proper bounds: 0 at top, and bottom should leave container fully visible\r\n          const containerHeight = container.offsetHeight;\r\n          const maxTopVh = Math.max(0, ((window.innerHeight - containerHeight) / window.innerHeight) * 100);\r\n\r\n          const clampedTopVh = Math.max(0, Math.min(newTopVh, maxTopVh));\r\n          // Limit to one digit after the dot\r\n          const roundedTopVh = Math.round(clampedTopVh * 10) / 10;\r\n          container.style.top = `${roundedTopVh}vh`;\r\n        };\r\n\r\n        const onMouseUpY = () => {\r\n          if (!isDraggingY) return;\r\n          isDraggingY = false;\r\n          document.removeEventListener('mousemove', onMouseMoveY);\r\n          document.removeEventListener('mouseup', onMouseUpY);\r\n          // Get the actual final position, and round so it has only one digit after the decimal point\r\n          const finalRect = container.getBoundingClientRect();\r\n          this.main.panelYPosition = Math.round(((finalRect.top / window.innerHeight) * 100) * 10) / 10;\r\n          this.main.settingsManager.saveSettings();\r\n        };\r\n\r\n        const enableYDrag = (e) => {\r\n          if (e.button !== 0) return; // Only allow left mouse button\r\n          if (e.target.closest('.latest-game, .group-tab, .control-button, .resize-handle')) return;\r\n          isDraggingY = true;\r\n          startY = e.clientY;\r\n          // FIX: Get the actual current position from the computed style or getBoundingClientRect\r\n          const rect = container.getBoundingClientRect();\r\n          startTop = (rect.top / window.innerHeight) * 100;\r\n          document.addEventListener('mousemove', onMouseMoveY);\r\n          document.addEventListener('mouseup', onMouseUpY);\r\n          e.preventDefault();\r\n        };\r\n\r\n        container.addEventListener('mousedown', enableYDrag);\r\n      } else {\r\n        container.style.top = '';\r\n      }\r\n    };\r\n\r\n    setupYPositioning();\r\n\r\n    document.body.appendChild(container);\r\n\r\n    this.main.groupsManager.updateGroupControlStates();\r\n    this.main.viewManager.updateDisplayModeClass();\r\n    // Add title to tabs if they are too wide\r\n    const allTabs = container.querySelectorAll('.group-tab');\r\n    allTabs.forEach(tab => {\r\n      if (tab.getBoundingClientRect().width >= 300) {\r\n        (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(tab, tab.textContent);\r\n      }\r\n    });\r\n\r\n    // Patch updateDisplayModeClass to also update the handle\r\n    const origUpdateDisplayModeClass = this.main.viewManager.updateDisplayModeClass.bind(this.main.viewManager);\r\n    this.main.viewManager.updateDisplayModeClass = (...args) => {\r\n      origUpdateDisplayModeClass(...args);\r\n      setupResizeHandle();\r\n      setupYPositioning();\r\n    };\r\n\r\n    this.updateRemoveIcons();\r\n\r\n    // Apply saved scroll position after rendering\r\n    container.scrollTop = this.main.previousScrollPosition;\r\n  }\r\n\r\n  updateGameCountDisplay() {\r\n    const countDisplay = document.getElementById('latest-games-count');\r\n    if (countDisplay) {\r\n      countDisplay.textContent = this.main.maxGameCount.toString();\r\n      countDisplay.classList.toggle('latest-games-disabled', this.main.shouldAutoSave === false);\r\n      (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(countDisplay, this.main.shouldAutoSave ? 'Автосохранение включено' : 'Автосохранение отключено');\r\n    }\r\n  }\r\n\r\n  createHoverArea() {\r\n    const hoverArea = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', { id: 'latest-games-hover-area' });\r\n    hoverArea.addEventListener('mouseenter', () => this.showContainer());\r\n    hoverArea.addEventListener('mouseleave', () => this.hideContainer());\r\n    document.body.appendChild(hoverArea);\r\n  }\r\n\r\n  populateGamesList(gamesList) {\r\n    gamesList.innerHTML = '';\r\n\r\n    if (this.main.groupsManager.getGroupViewMode() === 'tabs') {\r\n      // In tabs mode, only show games for the current group, no headers\r\n      const currentGroup = this.main.groupsManager.getCurrentGroup();\r\n      if (!currentGroup) return;\r\n      const pinnedCount = this.main.groupsManager.getPinnedGameCount();\r\n      const maxGamesToShow = Math.min(currentGroup.games.length, this.main.maxGameCount + pinnedCount);\r\n      for (let i = 0; i < maxGamesToShow; i++) {\r\n        const game = currentGroup.games[i];\r\n        const gameElement = this.createGameElement(game, game.id);\r\n        gamesList.appendChild(gameElement);\r\n      }\r\n    } else {\r\n      // In unified mode, show headers and games for all groups\r\n      this.main.groupsManager.groups.forEach(group => {\r\n        if (group.games.length > 0) {\r\n          // Add group header to separate groups\r\n          const groupHeader = this.main.groupsManager.createGroupHeader(group);\r\n          gamesList.appendChild(groupHeader);\r\n          const pinnedCount = group.games.filter(game => game.pin).length;\r\n          const maxGamesToShow = Math.min(group.games.length, this.main.maxGameCount + pinnedCount);\r\n          for (let i = 0; i < maxGamesToShow; i++) {\r\n            const game = group.games[i];\r\n            const gameElement = this.createGameElement(game, game.id);\r\n            gamesList.appendChild(gameElement);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  showContainer() {\r\n    this.main.isHovered = true;\r\n    if (this.main.hoverTimeout) clearTimeout(this.main.hoverTimeout);\r\n    this.main.hoverTimeout = null;\r\n    const container = document.getElementById('latest-games-container');\r\n    if (container) {\r\n      container.classList.add('visible');\r\n      container.style.left = '0';\r\n      // If mode is 'wrap', set the panel previous Y position\r\n      if (this.main.viewManager.getDisplayMode() === 'wrap') {\r\n        container.style.top = `${this.main.panelYPosition}vh`;\r\n      }\r\n      container.scrollTop = this.main.previousScrollPosition;\r\n    }\r\n  }\r\n\r\n  hideContainer() {\r\n    if (this.main.alwaysVisiblePanel) return; // If alwaysVisiblePanel is true, do not hide\r\n    this.main.isHovered = false;\r\n    if (this.main.hoverTimeout) clearTimeout(this.main.hoverTimeout);\r\n    this.main.hoverTimeout = setTimeout(() => {\r\n      if (!this.main.isHovered) {\r\n        const container = document.getElementById('latest-games-container');\r\n        if (container) {\r\n          container.classList.remove('visible');\r\n          this.main.viewManager.updateContainerLeftOffset();\r\n        }\r\n      }\r\n    }, this.main.hidePanelDelay);\r\n  }\r\n\r\n  updateRemoveIcons() {\r\n    // Update the remove group icon inside group controls:\r\n    const currentGroup = this.main.groupsManager.getCurrentGroup(this.main.groupsManager.groups, this.main.groupsManager.currentGroupId);\r\n    const removeGroupBtn = document.querySelector('.group-controls .remove-group.control-button');\r\n    if (removeGroupBtn) {\r\n      removeGroupBtn.innerHTML =\r\n        currentGroup && currentGroup.games && currentGroup.games.length > 0\r\n          ? _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.trashSomething\r\n          : _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.trashNothing;\r\n    }\r\n    // Update the remove all icon:\r\n    const removeAllBtn = document.querySelector('.latest-games-removeall.control-button');\r\n    // Here we consider the entire data: if any group has at least one game.\r\n    const hasAnyData = this.main.groupsManager.groups.some(group => group.games && group.games.length > 0);\r\n    if (removeAllBtn) {\r\n      removeAllBtn.innerHTML = hasAnyData ? _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.trashSomething : _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.trashNothing;\r\n    }\r\n  }\r\n\r\n  refreshContainer() {\r\n    this.main.groupsManager.refreshGroupsContainer();\r\n    const gamesList = document.getElementById('latest-games');\r\n    if (gamesList) {\r\n      this.populateGamesList(gamesList);\r\n      this.main.viewManager.updateDisplayModeClass();\r\n    }\r\n    this.updateRemoveIcons();\r\n    this.updateGameCountDisplay();\r\n  }\r\n\r\n  createPanelToggleButton() {\r\n    if (document.getElementById('latest-games-panel-toggle')) return;\r\n\r\n    const btn = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('button', {\r\n      id: 'latest-games-panel-toggle',\r\n      className: 'latest-games-panel-toggle',\r\n      type: 'button',\r\n      innerHTML: this.main.alwaysVisiblePanel ? _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.panelToggleOpened : _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.panelToggleClosed,\r\n    });\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_4__.createCustomTooltip)(btn, `\r\n      [Клик] (Показать/Скрыть) панель\r\n      [Shift + Клик] (Закрепить/Открепить) панель`\r\n    );\r\n\r\n    this.main.alwaysVisiblePanel && btn.classList.add('always-visible');\r\n\r\n    btn.addEventListener('click', (e) => {\r\n      const container = document.getElementById('latest-games-container');\r\n      if (!container) return;\r\n\r\n      if (e.shiftKey) {\r\n        this.main.alwaysVisiblePanel = !this.main.alwaysVisiblePanel;\r\n        btn.classList.toggle('always-visible', this.main.alwaysVisiblePanel);\r\n        btn.innerHTML = this.main.alwaysVisiblePanel ? _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.panelToggleOpened : _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.panelToggleClosed;\r\n        container.classList.toggle('visible', this.main.alwaysVisiblePanel);\r\n        if (!this.main.alwaysVisiblePanel) this.main.viewManager.updateContainerLeftOffset();\r\n        this.main.settingsManager.saveSettings();\r\n      } else {\r\n        const isVisible = container.classList.contains('visible');\r\n        if (isVisible) {\r\n          if (this.main.hoverTimeout) {\r\n            clearTimeout(this.main.hoverTimeout);\r\n            this.main.hoverTimeout = null;\r\n          }\r\n          container.classList.remove('visible');\r\n          this.main.viewManager.updateContainerLeftOffset();\r\n        } else {\r\n          this.showContainer();\r\n        }\r\n      }\r\n    });\r\n\r\n    document.body.appendChild(btn);\r\n  }\r\n}\n\n//# sourceURL=webpack://tampermonkey-script/./src/managers/UIManager.js?");

/***/ }),

/***/ "./src/managers/ViewManager.js":
/*!*************************************!*\
  !*** ./src/managers/ViewManager.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ViewManager: () => (/* binding */ ViewManager)\n/* harmony export */ });\n/* harmony import */ var _icons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../icons.js */ \"./src/icons.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils.js */ \"./src/utils.js\");\n/* harmony import */ var _tooltip_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tooltip.js */ \"./src/tooltip.js\");\n\r\n\r\n\r\n\r\nclass ViewManager {\r\n  constructor(main) {\r\n    this.main = main;\r\n  }\r\n\r\n  getDisplayMode() {\r\n    return this.main.displayMode;\r\n  }\r\n\r\n  setDisplayMode(mode) {\r\n    this.main.displayMode = mode;\r\n    this.main.settingsManager.saveSettings();\r\n  }\r\n\r\n  createDisplayModeToggle() {\r\n    const toggleButton = (0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.createElement)('div', {\r\n      className: 'display-mode-toggle control-button'\r\n    });\r\n    toggleButton.innerHTML = this.getDisplayMode() === 'wrap' ? _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.wrap : _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.scroll;\r\n    (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_2__.createCustomTooltip)(toggleButton, this.getDisplayMode() === 'wrap'\r\n      ? 'Переключить режим отображения в вертикальный вид'\r\n      : 'Переключить режим отображения в горизонтальный вид');\r\n\r\n    toggleButton.addEventListener('click', () => {\r\n      const newMode = this.getDisplayMode() === 'scroll' ? 'wrap' : 'scroll';\r\n      this.setDisplayMode(newMode);\r\n      toggleButton.innerHTML = newMode === 'wrap' ? _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.wrap : _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.scroll;\r\n      this.updateDisplayModeClass();\r\n      (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_2__.createCustomTooltip)(toggleButton, newMode === 'wrap'\r\n        ? 'Переключить режим отображения в вертикальный вид'\r\n        : 'Переключить режим отображения в горизонтальный вид');\r\n      if (newMode === 'scroll') {\r\n        const c = document.getElementById('latest-games-container');\r\n        if (c) setTimeout(() => c.scrollTop = c.scrollHeight, 0);\r\n      }\r\n    });\r\n    return toggleButton;\r\n  }\r\n\r\n  updateDisplayModeClass() {\r\n    const container = document.getElementById('latest-games-container');\r\n    const gamesList = document.getElementById('latest-games');\r\n    if (!container || !gamesList) return;\r\n    const mode = this.getDisplayMode();\r\n    container.classList.toggle('display-mode-wrap', mode === 'wrap');\r\n    gamesList.classList.toggle('display-mode-wrap', mode === 'wrap');\r\n    this.updateContainerLeftOffset();\r\n  }\r\n\r\n  updateContainerLeftOffset() {\r\n    const container = document.getElementById('latest-games-container');\r\n    if (!container) return;\r\n    const mode = this.getDisplayMode();\r\n    if (mode === 'wrap') {\r\n      container.style.left = 'calc(-1 * (100vw - 100px))';\r\n    } else {\r\n      container.style.left = '-330px';\r\n    }\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/managers/ViewManager.js?");

/***/ }),

/***/ "./src/styles.scss":
/*!*************************!*\
  !*** ./src/styles.scss ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./styles.scss */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/styles.scss?");

/***/ }),

/***/ "./src/tooltip.js":
/*!************************!*\
  !*** ./src/tooltip.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createCustomTooltip: () => (/* binding */ createCustomTooltip),\n/* harmony export */   hideTooltipElement: () => (/* binding */ hideTooltipElement)\n/* harmony export */ });\nlet tooltipEl = null, tooltipHideTimer = null, tooltipShowTimer = null;\r\nlet tooltipIsVisible = false, tooltipIsShown = false, tooltipCurrentTarget = null;\r\n\r\nconst positionTooltip = (clientX, clientY) => {\r\n  if (!tooltipEl) return;\r\n  let leftPos = clientX + 10;\r\n  const tooltipWidth = tooltipEl.offsetWidth;\r\n  const screenWidth = window.innerWidth;\r\n\r\n  // Adjust position if overflowing\r\n  leftPos = Math.min(Math.max(leftPos, 10), screenWidth - tooltipWidth - 10);\r\n\r\n  tooltipEl.style.left = `${leftPos}px`;\r\n  tooltipEl.style.top = `${clientY + 18}px`;\r\n};\r\n\r\nconst tooltipTrackMouse = e => tooltipEl && positionTooltip(e.clientX, e.clientY);\r\n\r\nfunction hideTooltipElement() {\r\n  tooltipIsVisible = false;\r\n  tooltipCurrentTarget = null;\r\n  clearTimeout(tooltipShowTimer);\r\n  clearTimeout(tooltipHideTimer);\r\n\r\n  tooltipHideTimer = setTimeout(() => {\r\n    if (!tooltipEl) return;\r\n    tooltipEl.style.opacity = '0';\r\n    tooltipIsShown = false;\r\n\r\n    setTimeout(() => {\r\n      if (!tooltipIsVisible && tooltipEl) {\r\n        tooltipEl.style.display = 'none';\r\n        tooltipEl.textContent = ''; // Clear tooltip content\r\n        document.removeEventListener('mousemove', tooltipTrackMouse);\r\n      }\r\n    }, 50);\r\n  }, 100);\r\n};\r\n\r\nnew MutationObserver(() => {\r\n  if (tooltipCurrentTarget && !document.contains(tooltipCurrentTarget)) hideTooltipElement();\r\n}).observe(document, { childList: true, subtree: true });\r\n\r\nfunction createCustomTooltip(element, tooltipContent) {\r\n  if (tooltipContent == null) return; // Skip if content is null/undefined\r\n\r\n  // Always update the tooltip content stored on the element.\r\n  element._tooltipContent = tooltipContent;\r\n\r\n  if (!element._tooltipInitialized) {\r\n    element._tooltipInitialized = true;\r\n\r\n    tooltipEl ||= (() => {\r\n      const tooltipDiv = document.createElement('div');\r\n      tooltipDiv.classList.add(\"custom-tooltip-popup\");\r\n      tooltipDiv.style.display = 'none';\r\n      tooltipDiv.style.opacity = '0';\r\n      document.body.appendChild(tooltipDiv);\r\n      return tooltipDiv;\r\n    })();\r\n\r\n    element.addEventListener('mouseenter', e => {\r\n      tooltipIsVisible = true;\r\n      tooltipCurrentTarget = element;\r\n      clearTimeout(tooltipHideTimer);\r\n      clearTimeout(tooltipShowTimer);\r\n\r\n      // Highlight [Action]Message pairs in the tooltip content\r\n      tooltipEl.innerHTML = highlightTooltipActions(element._tooltipContent);\r\n      tooltipEl.style.display = 'flex';\r\n      tooltipEl.style.opacity = '0';\r\n      tooltipEl.offsetHeight;\r\n      positionTooltip(e.clientX, e.clientY);\r\n      document.addEventListener('mousemove', tooltipTrackMouse);\r\n\r\n      tooltipShowTimer = setTimeout(() => {\r\n        tooltipEl.style.opacity = '1';\r\n        tooltipIsShown = true;\r\n      }, 600);\r\n    });\r\n\r\n    element.addEventListener('mouseleave', () => {\r\n      hideTooltipElement();\r\n      document.removeEventListener('mousemove', tooltipTrackMouse);\r\n    });\r\n    element.addEventListener('click', hideTooltipElement);\r\n  }\r\n}\r\n\r\nfunction highlightTooltipActions(str) {\r\n  const regex = /\\[([^\\]]+)\\]([^\\[]*)/g;\r\n  let result = '';\r\n  let lastEnd = 0;\r\n  let match;\r\n  while ((match = regex.exec(str)) !== null) {\r\n    if (match.index > lastEnd) result += str.slice(lastEnd, match.index);\r\n    result += `\r\n    <div class=\"tooltip-item\">\r\n      <span class=\"tooltip-action\">${match[1]}</span>&nbsp;\r\n      <span class=\"tooltip-message\">${match[2].trim()}</span>\r\n    </div>`;\r\n    lastEnd = regex.lastIndex;\r\n  }\r\n  if (lastEnd < str.length) result += str.slice(lastEnd);\r\n  return result;\r\n}\r\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/tooltip.js?");

/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createElement: () => (/* binding */ createElement),\n/* harmony export */   generateRandomId: () => (/* binding */ generateRandomId),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\nfunction generateRandomId() {\r\n  return Array.from(crypto.getRandomValues(new Uint8Array(9)))\r\n    .map(b => (b % 36).toString(36))\r\n    .join('');\r\n}\r\n\r\nfunction sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nfunction createElement(tag, options = {}) {\r\n  const element = document.createElement(tag);\r\n\r\n  if (options.className) {\r\n    element.className = options.className;\r\n  }\r\n\r\n  if (options.id) {\r\n    element.id = options.id;\r\n  }\r\n\r\n  if (options.innerHTML) {\r\n    element.innerHTML = options.innerHTML;\r\n  }\r\n\r\n  if (options.textContent) {\r\n    element.textContent = options.textContent;\r\n  }\r\n\r\n  if (options.href) {\r\n    element.href = options.href;\r\n  }\r\n\r\n  if (options.title) {\r\n    element.title = options.title;\r\n  }\r\n\r\n  if (options.src) {\r\n    element.src = options.src;\r\n  }\r\n\r\n  if (options.style) {\r\n    Object.assign(element.style, options.style);\r\n  }\r\n\r\n  if (options.attributes) {\r\n    Object.entries(options.attributes).forEach(([key, value]) => {\r\n      element.setAttribute(key, value);\r\n    });\r\n  }\r\n\r\n  return element;\r\n}\n\n//# sourceURL=webpack://tampermonkey-script/./src/utils.js?");

/***/ }),

/***/ "./src/vocabularyChecker.js":
/*!**********************************!*\
  !*** ./src/vocabularyChecker.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   highlightExistingVocabularies: () => (/* binding */ highlightExistingVocabularies)\n/* harmony export */ });\n/* harmony import */ var _icons_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons.js */ \"./src/icons.js\");\n/* harmony import */ var _tooltip_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tooltip.js */ \"./src/tooltip.js\");\n\r\n\r\n\r\nfunction highlightExistingVocabularies(groups) {\r\n  // Map vocId to group name(s)\r\n  const vocIdToGroups = new Map();\r\n  groups.forEach(group => {\r\n    group.games.forEach(game => {\r\n      if (game.params && game.params.vocId) {\r\n        const vocIdStr = String(game.params.vocId);\r\n        if (!vocIdToGroups.has(vocIdStr)) vocIdToGroups.set(vocIdStr, []);\r\n        vocIdToGroups.get(vocIdStr).push(group.name || group.title || 'Группа');\r\n      }\r\n    });\r\n  });\r\n\r\n  // Select only anchor tags with class \"name\" and href containing \"/vocs/\"\r\n  const vocAnchors = document.querySelectorAll('a.name[href*=\"/vocs/\"]');\r\n\r\n  vocAnchors.forEach(anchor => {\r\n    const href = anchor.getAttribute('href');\r\n    const match = href && href.match(/\\/vocs\\/(\\d+)(?:\\/|$)/);\r\n    if (match) {\r\n      const vocId = match[1];\r\n      // Remove any existing checkmark in the anchor's parent before adding a new one\r\n      const parent = anchor.parentNode;\r\n      const oldIcon = parent.querySelector('.kg-voc-checkmark');\r\n      if (oldIcon) oldIcon.remove();\r\n      if (vocIdToGroups.has(vocId)) {\r\n        // Append icon before the .desc element\r\n        const icon = document.createElement('span');\r\n        icon.className = 'kg-voc-checkmark';\r\n        icon.innerHTML = _icons_js__WEBPACK_IMPORTED_MODULE_0__.icons.checkmark;\r\n        const groupNames = vocIdToGroups.get(vocId);\r\n        (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_1__.createCustomTooltip)(icon, 'Словарь уже существует в группе: ' + groupNames.join(', '));\r\n        const desc = parent.querySelector('.desc');\r\n        if (desc) {\r\n          parent.insertBefore(icon, desc);\r\n        } else {\r\n          anchor.appendChild(icon);\r\n        }\r\n      }\r\n    }\r\n  });\r\n}\r\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/vocabularyChecker.js?");

/***/ }),

/***/ "./src/vocabularyCreation.js":
/*!***********************************!*\
  !*** ./src/vocabularyCreation.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attachVocabularyCreation: () => (/* binding */ attachVocabularyCreation),\n/* harmony export */   showVocabularyCreationPopup: () => (/* binding */ showVocabularyCreationPopup)\n/* harmony export */ });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./src/utils.js\");\n/* harmony import */ var _vocabularyChecker_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./vocabularyChecker.js */ \"./src/vocabularyChecker.js\");\n/* harmony import */ var _groupsPopup_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./groupsPopup.js */ \"./src/groupsPopup.js\");\n/* harmony import */ var _vocabularyParser_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./vocabularyParser.js */ \"./src/vocabularyParser.js\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * Show a popup to add a vocabulary to a group.\r\n * @param {Array} groups - Array of group objects.\r\n * @param {MouseEvent} event - The contextmenu event.\r\n * @param {string} vocId - The vocabulary ID to add.\r\n * @param {string} vocName - The vocabulary name from the link text.\r\n * @param {object} manager - The LatestGamesManager instance.\r\n */\r\nfunction showVocabularyCreationPopup(groups, event, vocId, vocName, manager) {\r\n  (0,_vocabularyParser_js__WEBPACK_IMPORTED_MODULE_3__.hideTooltip)(); // Hide any existing tooltip\r\n\r\n  // Create button configurations for each group\r\n  const buttonConfigs = groups.map(group => {\r\n    const alreadyExists = group.games.some(game => String(game.params?.vocId) === String(vocId));\r\n    return {\r\n      text: group.title,\r\n      className: `group-tab${alreadyExists ? ' active' : ''}`,\r\n      dataset: { groupId: group.id },\r\n      onClick: () => {\r\n        // Find the group where the vocabulary already exists\r\n        const foundGroup = groups.find(g =>\r\n          g.games.some(game => String(game.params?.vocId) === String(vocId))\r\n        );\r\n        if (foundGroup) {\r\n          alert(`Этот словарь уже добавлен в ${foundGroup.title}`);\r\n          return;\r\n        }\r\n        if (!alreadyExists) {\r\n          // Create a new game object with default parameters\r\n          const newGame = {\r\n            id: (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.generateRandomId)(),\r\n            params: {\r\n              gametype: 'voc',\r\n              vocName: vocName,\r\n              vocId: vocId,\r\n              type: 'normal',\r\n              level_from: 1,\r\n              level_to: 9,\r\n              timeout: 10,\r\n              qual: 0,\r\n              premium_abra: 0\r\n            },\r\n            pin: 1 // Pinned by default\r\n          };\r\n          group.games.unshift(newGame);\r\n          manager.saveGameData();\r\n          manager.refreshContainer();\r\n          (0,_vocabularyChecker_js__WEBPACK_IMPORTED_MODULE_1__.highlightExistingVocabularies)(groups);\r\n        }\r\n      }\r\n    };\r\n  });\r\n\r\n  (0,_groupsPopup_js__WEBPACK_IMPORTED_MODULE_2__.createPopup)(buttonConfigs, event, 'vocabulary-creation-popup', 'Добавить');\r\n}\r\n\r\n/**\r\n * Attach contextmenu event to vocabulary links within .columns.voclist.\r\n * @param {Array} groups - Array of group objects.\r\n * @param {object} manager - The LatestGamesManager instance.\r\n */\r\nfunction attachVocabularyCreation(groups, manager) {\r\n  const voclist = document.querySelector('.columns.voclist');\r\n  if (!voclist) {\r\n    console.warn('Element with class \"columns voclist\" not found.');\r\n    return;\r\n  }\r\n\r\n  voclist.addEventListener('contextmenu', (e) => {\r\n    const anchor = e.target.closest('a.name[href*=\"/vocs/\"]');\r\n    if (anchor) {\r\n      e.preventDefault();\r\n      const href = anchor.getAttribute('href');\r\n      const match = href.match(/\\/vocs\\/(\\d+)(?:\\/|$)/);\r\n      if (match) {\r\n        const vocId = match[1];\r\n        const vocName = anchor.textContent.trim(); // Extract name from link text\r\n        showVocabularyCreationPopup(groups, e, vocId, vocName, manager);\r\n      }\r\n    }\r\n  });\r\n}\n\n//# sourceURL=webpack://tampermonkey-script/./src/vocabularyCreation.js?");

/***/ }),

/***/ "./src/vocabularyMigration.js":
/*!************************************!*\
  !*** ./src/vocabularyMigration.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   migrateGame: () => (/* binding */ migrateGame),\n/* harmony export */   showMigrationPopup: () => (/* binding */ showMigrationPopup)\n/* harmony export */ });\n/* harmony import */ var _groupsPopup_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./groupsPopup.js */ \"./src/groupsPopup.js\");\n/* harmony import */ var _tooltip_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tooltip.js */ \"./src/tooltip.js\");\n\r\n\r\n\r\nfunction showMigrationPopup(manager, groups, currentGroupId, event, gameId) {\r\n  (0,_tooltip_js__WEBPACK_IMPORTED_MODULE_1__.hideTooltipElement)(); // Hide any existing tooltip\r\n\r\n  // Create button configurations for groups (excluding current group)\r\n  const buttonConfigs = groups\r\n    .filter(group => group.id !== currentGroupId)\r\n    .map(group => ({\r\n      text: group.title,\r\n      className: 'group-tab',\r\n      dataset: { groupId: group.id },\r\n      onClick: () => {\r\n        migrateGame(manager, gameId, group.id);\r\n      }\r\n    }));\r\n\r\n  (0,_groupsPopup_js__WEBPACK_IMPORTED_MODULE_0__.createPopup)(buttonConfigs, event, 'game-migration-popup', 'Переместить');\r\n}\r\n\r\nfunction migrateGame(manager, gameId, targetGroupId) {\r\n  const sourceGroup = manager.groups.find(group => group.id === manager.currentGroupId);\r\n  const targetGroup = manager.groups.find(group => group.id === targetGroupId);\r\n\r\n  if (!sourceGroup || !targetGroup) return;\r\n\r\n  const gameIndex = sourceGroup.games.findIndex(game => game.id === gameId);\r\n  if (gameIndex === -1) return;\r\n\r\n  const [game] = sourceGroup.games.splice(gameIndex, 1);\r\n  targetGroup.games.push(game);\r\n\r\n  manager.saveGameData();\r\n  manager.refreshContainer();\r\n}\n\n//# sourceURL=webpack://tampermonkey-script/./src/vocabularyMigration.js?");

/***/ }),

/***/ "./src/vocabularyParser.js":
/*!*********************************!*\
  !*** ./src/vocabularyParser.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attachVocabularyParser: () => (/* binding */ attachVocabularyParser),\n/* harmony export */   hideTooltip: () => (/* binding */ hideTooltip)\n/* harmony export */ });\n// Function to fetch and parse vocabulary content from a URL\r\nasync function fetchVocabularyContent(vocId) {\r\n  try {\r\n    const response = await fetch(`https://klavogonki.ru/vocs/${vocId}/`);\r\n    const htmlText = await response.text();\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(htmlText, 'text/html');\r\n    \r\n    // Find the <div class=\"words\"> element\r\n    const wordsDiv = doc.querySelector('.words');\r\n    if (!wordsDiv) {\r\n      console.warn(`No element with class \"words\" found for vocId ${vocId}`);\r\n      return 'Vocabulary content not found';\r\n    }\r\n    \r\n    // Extract all table rows with text content\r\n    const rows = wordsDiv.querySelectorAll('tr');\r\n    if (rows.length === 0) {\r\n      console.warn(`No table rows found for vocId ${vocId}`);\r\n      return 'No words available';\r\n    }\r\n    \r\n    // Build the text, handling both numbered and non-numbered formats\r\n    const vocabularyText = Array.from(rows)\r\n      .map((row, index) => {\r\n        const numElement = row.querySelector('td.num');\r\n        const textElement = row.querySelector('td.text');\r\n        \r\n        // Skip rows without text content\r\n        if (!textElement) {\r\n          return null;\r\n        }\r\n        \r\n        // Convert <br> tags to newlines and get text content\r\n        const textWithBreaks = textElement.innerHTML\r\n          .replace(/<br\\s*\\/?>/gi, '\\n')\r\n          .replace(/<[^>]*>/g, '') // Remove any other HTML tags\r\n          .trim();\r\n        \r\n        // Skip empty rows or placeholder rows\r\n        if (textWithBreaks === '' || textWithBreaks === '…') {\r\n          return null;\r\n        }\r\n        \r\n        // Handle numbered format\r\n        if (numElement) {\r\n          const num = numElement.textContent.trim();\r\n          \r\n          // Skip empty or placeholder numbers\r\n          if (num === '' || num === '…') {\r\n            return null;\r\n          }\r\n          \r\n          return `${num}. ${textWithBreaks}`;\r\n        } else {\r\n          // Handle non-numbered format - add sequential numbering\r\n          return `${index + 1}. ${textWithBreaks}`;\r\n        }\r\n      })\r\n      .filter(item => item !== null)\r\n      .join('\\n\\n');\r\n    \r\n    return vocabularyText;\r\n  } catch (error) {\r\n    console.error(`Error fetching vocabulary content for vocId ${vocId}:`, error);\r\n    return 'Error loading vocabulary';\r\n  }\r\n}\r\n\r\n// Tooltip management\r\nlet currentTooltip = null;\r\nlet hideTimeout = null;\r\nlet showTimeout = null;\r\nlet currentAnchor = null;\r\n\r\nfunction createVocabularyTooltip(content) {\r\n  const tooltip = document.createElement('div');\r\n  tooltip.className = 'vocabulary-tooltip-popup';\r\n  \r\n  // Process content to wrap numbers in spans\r\n  const processedContent = content.replace(/^(\\d+)\\.\\s/gm, '<span class=\"tooltip-number\">$1.</span> ');\r\n  tooltip.innerHTML = processedContent;\r\n  \r\n  document.body.appendChild(tooltip);\r\n  return tooltip;\r\n}\r\n\r\nfunction showTooltip(anchor, content) {\r\n  // Clear any existing timeouts\r\n  if (hideTimeout) {\r\n    clearTimeout(hideTimeout);\r\n    hideTimeout = null;\r\n  }\r\n  if (showTimeout) {\r\n    clearTimeout(showTimeout);\r\n    showTimeout = null;\r\n  }\r\n  \r\n  // If tooltip already exists for same anchor, just keep it visible\r\n  if (currentTooltip && currentAnchor === anchor) {\r\n    return;\r\n  }\r\n  \r\n  // Remove existing tooltip if different anchor\r\n  if (currentTooltip) {\r\n    hideTooltip();\r\n  }\r\n  \r\n  // Set up delayed show\r\n  showTimeout = setTimeout(() => {\r\n    currentAnchor = anchor;\r\n    currentTooltip = createVocabularyTooltip(content);\r\n    \r\n    // Position and show tooltip\r\n    positionTooltip(anchor, currentTooltip);\r\n    \r\n    // Add event listeners to tooltip for hover behavior\r\n    currentTooltip.addEventListener('mouseenter', () => {\r\n      if (hideTimeout) {\r\n        clearTimeout(hideTimeout);\r\n        hideTimeout = null;\r\n      }\r\n    });\r\n    \r\n    currentTooltip.addEventListener('mouseleave', () => {\r\n      startHideTimeout();\r\n    });\r\n    \r\n    showTimeout = null;\r\n  }, 400); // 400ms delay before showing\r\n}\r\n\r\nfunction hideTooltip() {\r\n  if (currentTooltip) {\r\n    currentTooltip.remove();\r\n    currentTooltip = null;\r\n    currentAnchor = null;\r\n  }\r\n  if (hideTimeout) {\r\n    clearTimeout(hideTimeout);\r\n    hideTimeout = null;\r\n  }\r\n  if (showTimeout) {\r\n    clearTimeout(showTimeout);\r\n    showTimeout = null;\r\n  }\r\n}\r\n\r\nfunction startHideTimeout() {\r\n  if (hideTimeout) {\r\n    clearTimeout(hideTimeout);\r\n  }\r\n  hideTimeout = setTimeout(() => {\r\n    hideTooltip();\r\n  }, 300); // 300ms delay before hiding\r\n}\r\n\r\nfunction positionTooltip(anchor, tooltip) {\r\n  const anchorRect = anchor.getBoundingClientRect();\r\n  const viewportWidth = window.innerWidth;\r\n  const viewportHeight = window.innerHeight;\r\n  const margin = 10;\r\n  \r\n  // Get tooltip dimensions\r\n  const tooltipRect = tooltip.getBoundingClientRect();\r\n  \r\n  let left = anchorRect.left;\r\n  let top = anchorRect.bottom + 5;\r\n  \r\n  // Adjust horizontal position to stay within viewport\r\n  if (left + tooltipRect.width > viewportWidth - margin) {\r\n    left = viewportWidth - tooltipRect.width - margin;\r\n  }\r\n  if (left < margin) {\r\n    left = margin;\r\n  }\r\n  \r\n  // Adjust vertical position to stay within viewport\r\n  if (top + tooltipRect.height > viewportHeight - margin) {\r\n    // Try positioning above the anchor\r\n    const topAbove = anchorRect.top - tooltipRect.height - 5;\r\n    if (topAbove >= margin) {\r\n      top = topAbove;\r\n    } else {\r\n      // If it doesn't fit above either, position at top of viewport\r\n      top = margin;\r\n    }\r\n  }\r\n  \r\n  // Ensure tooltip doesn't go above viewport\r\n  if (top < margin) {\r\n    top = margin;\r\n  }\r\n  \r\n  tooltip.style.left = `${left}px`;\r\n  tooltip.style.top = `${top}px`;\r\n}\r\n\r\n// Function to attach the delegated event listener\r\nfunction attachVocabularyParser() {\r\n  const voclist = document.querySelector('.columns.voclist');\r\n  if (!voclist) {\r\n    console.warn('Element with class \"columns voclist\" not found.');\r\n    return;\r\n  }\r\n  \r\n  voclist.addEventListener('mouseenter', async (e) => {\r\n    const anchor = e.target.closest('a.name[href*=\"/vocs/\"]');\r\n    if (anchor) {\r\n      // Extract vocId from href (e.g., /vocs/1885/)\r\n      const href = anchor.getAttribute('href');\r\n      const match = href.match(/\\/vocs\\/(\\d+)(?:\\/|$)/);\r\n      if (!match) {\r\n        console.warn(`Invalid vocabulary href: ${href}`);\r\n        return;\r\n      }\r\n      \r\n      const vocId = match[1];\r\n      \r\n      // Check if tooltip content is already cached\r\n      if (!anchor._tooltipContent) {\r\n        // First parse the text, then display\r\n        fetchVocabularyContent(vocId).then(content => {\r\n          // Cache the content\r\n          anchor._tooltipContent = content;\r\n          // Show tooltip with parsed content\r\n          showTooltip(anchor, content);\r\n        });\r\n      } else {\r\n        // Use cached content\r\n        showTooltip(anchor, anchor._tooltipContent);\r\n      }\r\n    }\r\n  }, { capture: true });\r\n  \r\n  voclist.addEventListener('mouseleave', (e) => {\r\n    const anchor = e.target.closest('a.name[href*=\"/vocs/\"]');\r\n    if (anchor && currentAnchor === anchor) {\r\n      startHideTimeout();\r\n    }\r\n    // Also cancel show timeout if mouse leaves before tooltip appears\r\n    if (showTimeout) {\r\n      clearTimeout(showTimeout);\r\n      showTimeout = null;\r\n    }\r\n  }, { capture: true });\r\n}\r\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/vocabularyParser.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.js");
/******/ 	
/******/ })()
;