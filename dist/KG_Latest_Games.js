// ==UserScript==
// @name          KG_Latest_Games
// @namespace     klavogonki
// @version      1.3.6
// @description   Fast game creation buttons on all the pages
// @match         *://klavogonki.ru/*
// @author        Patcher
// @icon          https://www.google.com/s2/favicons?sz=64&domain=klavogonki.ru
// ==/UserScript==

(()=>{"use strict";var e={56:(e,t,a)=>{e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function a(e){for(var a=-1,n=0;n<t.length;n++)if(t[n].identifier===e){a=n;break}return a}function n(e,n){for(var o={},s=[],i=0;i<e.length;i++){var l=e[i],c=n.base?l[0]+n.base:l[0],g=o[c]||0,p="".concat(c," ").concat(g);o[c]=g+1;var d=a(p),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(m);else{var u=r(m,n);n.byIndex=i,t.splice(i,0,{identifier:p,updater:u,references:1})}s.push(p)}return s}function r(e,t){var a=t.domAPI(t);a.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,r){var o=n(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var i=a(o[s]);t[i].references--}for(var l=n(e,r),c=0;c<o.length;c++){var g=a(o[c]);0===t[g].references&&(t[g].updater(),t.splice(g,1))}o=l}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",n=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),n&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),n&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,n,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var g=[].concat(e[c]);n&&s[g[0]]||(void 0!==o&&(void 0===g[5]||(g[1]="@layer".concat(g[5].length>0?" ".concat(g[5]):""," {").concat(g[1],"}")),g[5]=o),a&&(g[2]?(g[1]="@media ".concat(g[2]," {").concat(g[1],"}"),g[2]=a):g[2]=a),r&&(g[4]?(g[1]="@supports (".concat(g[4],") {").concat(g[1],"}"),g[4]=r):g[4]="".concat(r)),t.push(g))}},t}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,a){var n=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(a)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var n="";a.supports&&(n+="@supports (".concat(a.supports,") {")),a.media&&(n+="@media ".concat(a.media," {"));var r=void 0!==a.layer;r&&(n+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),n+=a.css,r&&(n+="}"),a.media&&(n+="}"),a.supports&&(n+="}");var o=a.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},911:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(601),r=a.n(n),o=a(314),s=a.n(o)()(r());s.push([e.id,'.game-migration-popup,.vocabulary-creation-popup,.game-popup{position:fixed;display:flex;flex-direction:column;gap:5px;padding:5px;background-color:var(--rg-bg-primary);border:1px solid var(--rg-border-primary);border-radius:8px !important;box-shadow:0 2px 10px rgba(0,0,0,.1) !important;max-height:50vh;max-width:400px;overflow-y:auto;scrollbar-width:none;z-index:1025;user-select:none}.game-migration-popup .popup-header-qualification,.vocabulary-creation-popup .popup-header-qualification,.game-popup .popup-header-qualification{display:flex;align-items:center;justify-content:center;width:16px;height:16px;cursor:pointer}.game-migration-popup .popup-header,.vocabulary-creation-popup .popup-header,.game-popup .popup-header{display:inline-flex;font:600 14px "Montserrat",sans-serif;color:var(--rg-header-text);padding:6px;justify-content:space-between}.game-migration-popup .popup-subheader,.vocabulary-creation-popup .popup-subheader,.game-popup .popup-subheader{font:600 14px "Montserrat",sans-serif;color:var(--rg-text-secondary);padding:6px}.game-migration-popup .timeouts-container,.vocabulary-creation-popup .timeouts-container,.game-popup .timeouts-container{display:flex;flex-direction:row;gap:5px}.game-migration-popup .timeouts-container .game-popup-button,.vocabulary-creation-popup .timeouts-container .game-popup-button,.game-popup .timeouts-container .game-popup-button{display:inline-block;padding:5px 15px;font:600 14px "Montserrat",sans-serif;border-radius:4px !important;background:var(--rg-bg-card) !important;color:var(--rg-text-primary) !important;border:1.5px solid var(--rg-border-primary);cursor:pointer;user-select:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left;text-decoration:none}.game-migration-popup .timeouts-container .game-popup-button:hover,.game-migration-popup .timeouts-container .game-popup-button:focus,.vocabulary-creation-popup .timeouts-container .game-popup-button:hover,.vocabulary-creation-popup .timeouts-container .game-popup-button:focus,.game-popup .timeouts-container .game-popup-button:hover,.game-popup .timeouts-container .game-popup-button:focus{border-color:var(--rg-border-hover);background:var(--rg-bg-hover);color:var(--rg-text-primary)}.game-migration-popup .group-tab,.game-migration-popup .popup-button,.vocabulary-creation-popup .group-tab,.vocabulary-creation-popup .popup-button,.game-popup .group-tab,.game-popup .popup-button{display:inline-flex;padding:5px 15px;max-width:300px;font:600 14px "Montserrat",sans-serif;border-radius:4px !important;background:var(--rg-bg-card);color:var(--rg-text-primary);border:2px solid var(--rg-border-primary);cursor:pointer;user-select:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:fit-content;transition:border .1s ease,background-color .1s ease}.game-migration-popup .group-tab:hover,.game-migration-popup .group-tab:focus,.game-migration-popup .popup-button:hover,.game-migration-popup .popup-button:focus,.vocabulary-creation-popup .group-tab:hover,.vocabulary-creation-popup .group-tab:focus,.vocabulary-creation-popup .popup-button:hover,.vocabulary-creation-popup .popup-button:focus,.game-popup .group-tab:hover,.game-popup .group-tab:focus,.game-popup .popup-button:hover,.game-popup .popup-button:focus{border-color:var(--rg-border-hover);background:var(--rg-bg-hover);color:var(--rg-text-primary)}.game-migration-popup .group-tab.active,.game-migration-popup .popup-button.active,.vocabulary-creation-popup .group-tab.active,.vocabulary-creation-popup .popup-button.active,.game-popup .group-tab.active,.game-popup .popup-button.active{border:2px solid var(--rg-border-pinned-voc);background:var(--rg-bg-card-pinned-voc);color:var(--rg-gametype-voc) !important}.game-migration-popup .rank-slider-container,.vocabulary-creation-popup .rank-slider-container,.game-popup .rank-slider-container{display:flex;flex-direction:column;align-items:stretch;margin:6px}.game-migration-popup .rank-slider-container .rank-slider-display,.vocabulary-creation-popup .rank-slider-container .rank-slider-display,.game-popup .rank-slider-container .rank-slider-display{margin:0 0 12px;font:600 14px "Montserrat",sans-serif;color:var(--rg-text-secondary)}.game-migration-popup .rank-slider-container .rank-slider-track,.vocabulary-creation-popup .rank-slider-container .rank-slider-track,.game-popup .rank-slider-container .rank-slider-track{position:relative;height:8px;background:var(--rg-rank-slider-track-bg);border-radius:4px !important;cursor:pointer;border:2px solid var(--rg-rank-slider-border);box-sizing:border-box}.game-migration-popup .rank-slider-container .rank-slider-range,.vocabulary-creation-popup .rank-slider-container .rank-slider-range,.game-popup .rank-slider-container .rank-slider-range{position:absolute;height:100%;background:var(--rg-rank-slider-range);border-radius:4px !important;z-index:1}.game-migration-popup .rank-slider-container .rank-slider-handle,.vocabulary-creation-popup .rank-slider-container .rank-slider-handle,.game-popup .rank-slider-container .rank-slider-handle{position:absolute;top:50%;width:18px;height:18px;background:var(--rg-rank-slider-handle-bg);border:2px solid var(--rg-rank-slider-border);border-radius:50% !important;transform:translate(-50%, -50%);z-index:2;cursor:pointer;box-shadow:0 1px 4px rgba(0,0,0,.08) !important;transition:border-color .2s,background .2s}.game-migration-popup .rank-slider-container .rank-slider-handle:focus,.vocabulary-creation-popup .rank-slider-container .rank-slider-handle:focus,.game-popup .rank-slider-container .rank-slider-handle:focus{outline:none;border-color:var(--rg-rank-slider-border-focus)}.game-migration-popup .rank-slider-container .rank-slider-handle.overlap-left,.vocabulary-creation-popup .rank-slider-container .rank-slider-handle.overlap-left,.game-popup .rank-slider-container .rank-slider-handle.overlap-left{transform:translate(-100%, -50%)}.game-migration-popup .rank-slider-container .rank-slider-handle.overlap-right,.vocabulary-creation-popup .rank-slider-container .rank-slider-handle.overlap-right,.game-popup .rank-slider-container .rank-slider-handle.overlap-right{transform:translate(0, -50%)}.latest-games-search-container{position:relative;width:100%;margin:0 10px 10px;display:flex;flex-direction:row;align-items:center}.latest-games-search-container.latest-games-hidden{display:none}.latest-games-search-container #latest-games-search-input{width:100%;box-sizing:border-box;padding:8px 12px;font-size:15px;font-family:"Montserrat",sans-serif;border:1.5px solid var(--rg-border-primary);border-radius:6px !important;background:var(--rg-bg-card);color:var(--rg-text-primary);outline:none;transition:border-color .2s,background .2s,color .2s}.latest-games-search-container #latest-games-search-input:focus{border-color:var(--rg-border-hover);background:var(--rg-bg-hover);color:var(--rg-text-primary)}.latest-games-search-container .latest-games-clear-btn{position:absolute;top:50%;transform:translateY(-50%);width:24px;height:24px;border:none;outline:none;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0;visibility:hidden;transition:opacity .15s ease;z-index:1}.latest-games-search-container .latest-games-clear-btn svg{width:14px;height:14px}.latest-games-search-container .latest-games-clear-btn.visible{opacity:1;visibility:visible}.latest-games-search-noresults{display:inline-flex;padding:5px 15px;max-width:300px;font:500 14px "Montserrat",sans-serif;border-radius:4px !important;user-select:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:auto;justify-content:center;align-items:center;color:var(--rg-gametype-marathon);border:2px solid var(--rg-border-pinned-marathon);background-color:var(--rg-bg-card-pinned-marathon)}.latest-games-search-more{display:inline-flex;padding:5px 15px;max-width:300px;font:500 14px "Montserrat",sans-serif;border-radius:4px !important;user-select:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:auto;justify-content:center;align-items:center;color:var(--rg-gametype-chars);border:2px solid var(--rg-border-pinned-chars);background-color:var(--rg-bg-card-pinned-chars)}.sleep-replay-indicator,.sleep-start-indicator{position:absolute;top:50px;right:5px;z-index:3000;transition:.2s ease-in-out;font-family:"Montserrat",sans-serif;font-size:1.5em;font-weight:500;font-variant-numeric:tabular-nums;padding:8px 12px;min-width:60px;display:flex;justify-content:center;align-items:center;cursor:default;user-select:none;pointer-events:none;border-radius:.2em !important}.sleep-start-indicator{color:hsl(88,50%,55%);background-color:hsl(88,40%,20%);border:1px solid hsl(88,45%,35%)}.sleep-replay-indicator{color:hsl(208,50%,70%);background-color:hsl(208,40%,25%);border:1px solid hsl(208,45%,50%)}:root.latest-games-light-theme{--rg-bg-primary:#fff;--rg-bg-secondary:hsl(0,0%,98%);--rg-bg-card:hsl(0,0%,98%);--rg-bg-card-pinned:hsl(120,50%,96%);--rg-bg-hover:hsl(0,0%,96%);--rg-border-primary:hsl(0,0%,88%);--rg-border-hover:hsl(0,0%,74%);--rg-border-pinned:hsl(122,39%,49%);--rg-text-primary:hsl(0,0%,15%);--rg-text-secondary:#666;--rg-text-tertiary:hsl(0,0%,55%);--rg-text-options:hsl(0,0%,30%);--rg-text-count:hsl(0,0%,15%);--rg-gametype-voc:hsl(215,75%,50%);--rg-gametype-normal:hsl(130,50%,30%);--rg-gametype-abra:hsl(215,20%,40%);--rg-gametype-referats:hsl(80,55%,30%);--rg-gametype-noerror:hsl(200,45%,35%);--rg-gametype-marathon:hsl(340,65%,45%);--rg-gametype-chars:rgb(153,89.25,0);--rg-gametype-digits:hsl(0,0%,50%);--rg-gametype-sprint:hsl(5,40%,40%);--rg-icon-primary:currentColor;--rg-icon-delete:hsl(4,90%,58%);--rg-bg-hover-delete:hsla(4,90%,58%,.2);--rg-icon-pin:hsl(122,39%,49%);--rg-bg-hover-pin:hsla(122,39%,49%,.2);--rg-icon-info:hsl(0,0%,55%);--rg-bg-hover-info:hsla(0,0%,55%,.2);--rg-icon-edit:#c90;--rg-bg-hover-edit:rgba(204,153,0,.2);--rg-icon-theme-sun:hsl(48,100%,41%);--rg-icon-theme-moon:hsl(207,89%,76%);--rg-hover-control:hsl(0,0%,92%);--rg-hover-control-btn:hsl(213,77%,96%);--rg-bg-card-pinned-voc:hsl(215,80%,95%);--rg-border-pinned-voc:hsl(215,80%,80%);--rg-bg-card-pinned-normal:hsl(130,50%,90%);--rg-border-pinned-normal:hsl(130,50%,70%);--rg-bg-card-pinned-abra:hsl(215,20%,90%);--rg-border-pinned-abra:hsl(215,20%,70%);--rg-bg-card-pinned-referats:hsl(80,55%,90%);--rg-border-pinned-referats:hsl(80,55%,70%);--rg-bg-card-pinned-noerror:hsl(200,45%,90%);--rg-border-pinned-noerror:hsl(200,45%,70%);--rg-bg-card-pinned-marathon:hsl(340,65%,90%);--rg-border-pinned-marathon:hsl(340,65%,70%);--rg-bg-card-pinned-chars:hsl(35,100%,90%);--rg-border-pinned-chars:hsl(35,100%,70%);--rg-bg-card-pinned-digits:hsl(0,0%,90%);--rg-border-pinned-digits:hsl(0,0%,70%);--rg-bg-card-pinned-sprint:hsl(5,40%,90%);--rg-border-pinned-sprint:hsl(5,40%,70%);--rg-bg-tab:hsl(0,0%,97%);--rg-bg-tab-hover:hsl(0,0%,94%);--rg-bg-tab-active:#fff;--rg-icon-accent:hsl(215,75%,50%);--rg-qualification-icon:hsl(48,100%,41%);--rg-panel-toggle-background:hsl(215,80%,95%);--rg-panel-toggle-stroke:hsl(215,75%,50%);--rg-panel-toggle-border:hsl(215,80%,80%);--rg-panel-toggle-bg-hover:hsl(215,80%,88%);--rg-header-text:hsl(77,100%,30%);--rg-rank-slider-track-bg:hsl(215,80%,95%);--rg-rank-slider-border:hsl(215,80%,80%);--rg-rank-slider-range:hsl(215,80%,80%);--rg-rank-slider-handle-bg:hsl(215,80%,95%);--rg-rank-slider-border-focus:hsl(215,80%,60%)}:root.latest-games-dark-theme{--rg-bg-primary:hsl(210,10%,11%);--rg-bg-secondary:hsl(220,10%,15%);--rg-bg-card:hsl(220,10%,15%);--rg-bg-card-pinned:hsl(140,20%,15%);--rg-bg-hover:hsl(220,10%,15%);--rg-border-primary:hsl(220,10%,15%);--rg-border-hover:hsl(0,0%,38%);--rg-border-pinned:hsl(133,43%,47%);--rg-text-primary:hsl(0,0%,88%);--rg-text-secondary:hsl(0,0%,88%);--rg-text-tertiary:hsl(0,0%,88%);--rg-text-options:hsl(0,0%,88%);--rg-text-count:#fc0;--rg-gametype-voc:hsl(215,80%,65%);--rg-gametype-normal:#6c7;--rg-gametype-abra:hsl(215,20%,60%);--rg-gametype-referats:hsl(80,55%,40%);--rg-gametype-noerror:hsl(200,45%,65%);--rg-gametype-marathon:hsl(340,70%,55%);--rg-gametype-chars:hsl(35,100%,45%);--rg-gametype-digits:hsl(0,0%,50%);--rg-gametype-sprint:hsl(5,40%,60%);--rg-icon-primary:hsl(207,89%,76%);--rg-icon-delete:hsl(4,100%,75%);--rg-bg-hover-delete:hsla(4,100%,75%,.2);--rg-icon-pin:hsl(133,43%,47%);--rg-bg-hover-pin:hsla(133,43%,47%,.2);--rg-icon-info:hsl(0,0%,88%);--rg-bg-hover-info:hsla(0,0%,88%,.2);--rg-icon-edit:#fc3;--rg-bg-hover-edit:rgba(255,204,51,.2);--rg-icon-theme-sun:#fc0;--rg-icon-theme-moon:hsl(207,89%,76%);--rg-hover-control:hsl(0,0%,38%);--rg-hover-control-btn:hsl(213,81.6%,29.8%);--rg-bg-card-pinned-voc:hsl(215,80%,10%);--rg-border-pinned-voc:hsl(215,80%,30%);--rg-bg-card-pinned-normal:hsl(130,50%,10%);--rg-border-pinned-normal:hsl(130,50%,30%);--rg-bg-card-pinned-abra:hsl(215,20%,10%);--rg-border-pinned-abra:hsl(215,20%,30%);--rg-bg-card-pinned-referats:hsl(80,55%,10%);--rg-border-pinned-referats:hsl(80,55%,30%);--rg-bg-card-pinned-noerror:hsl(200,45%,10%);--rg-border-pinned-noerror:hsl(200,45%,30%);--rg-bg-card-pinned-marathon:hsl(340,65%,10%);--rg-border-pinned-marathon:hsl(340,65%,30%);--rg-bg-card-pinned-chars:#320;--rg-border-pinned-chars:#960;--rg-bg-card-pinned-digits:hsl(0,0%,10%);--rg-border-pinned-digits:hsl(0,0%,30%);--rg-bg-card-pinned-sprint:hsl(5,40%,10%);--rg-border-pinned-sprint:hsl(5,40%,30%);--rg-bg-tab:hsl(220,10%,15%);--rg-bg-tab-hover:hsl(220,10%,18%);--rg-bg-tab-active:hsl(210,10%,11%);--rg-icon-accent:hsl(207,89%,76%);--rg-qualification-icon:#fc0;--rg-panel-toggle-background:hsl(215,80%,20%);--rg-panel-toggle-stroke:hsl(215,80%,65%);--rg-panel-toggle-border:hsl(215,80%,30%);--rg-panel-toggle-bg-hover:hsl(215,80%,25%);--rg-header-text:#fc0;--rg-rank-slider-track-bg:hsl(215,80%,10%);--rg-rank-slider-border:hsl(215,80%,30%);--rg-rank-slider-range:hsl(215,80%,30%);--rg-rank-slider-handle-bg:hsl(215,80%,10%);--rg-rank-slider-border-focus:hsl(215,80%,50%)}#latest-games-container{display:flex;flex-direction:column;font-family:"Montserrat",sans-serif;position:fixed;top:50px;width:auto;min-width:200px;max-width:330px;max-height:calc(100vh - 100px);background-color:var(--rg-bg-primary);border:1px solid var(--rg-border-primary);border-left:none;border-radius:0 8px 8px 0 !important;box-shadow:2px 0 10px rgba(0,0,0,.1) !important;z-index:1020;padding:10px 0;opacity:0;pointer-events:none;user-select:none;transition:left .3s ease,opacity .3s ease;overflow-y:auto;overflow-x:hidden;scrollbar-width:none;color:var(--rg-text-primary)}#latest-games-container.visible{left:0 !important;opacity:1;pointer-events:auto;user-select:auto}#latest-games-container.display-mode-wrap{max-width:none;width:95vw;display:flex;flex-direction:row;flex-wrap:wrap;align-items:flex-start;position:fixed}#latest-games-container.display-mode-wrap .resize-handle{position:absolute;top:0;right:0;width:10px;height:100%;cursor:ew-resize;background-color:rgba(0,0,0,0);z-index:1021}#latest-games-container.display-mode-wrap .latest-games-controls{flex-direction:row}#latest-games-container #latest-games{margin:0;position:relative;padding:0;list-style:none;display:flex;flex-direction:column;gap:5px}#latest-games-container #latest-games .group-header{display:inline-flex;padding:5px 15px;max-width:300px;font:600 14px "Montserrat",sans-serif;border-radius:4px !important;background:var(--rg-bg-card);color:var(--rg-text-primary);border:2px solid var(--rg-border-primary);cursor:pointer;user-select:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:fit-content;transition:border .1s ease,background-color .1s ease;width:100%;margin:0 10px}#latest-games-container #latest-games .group-header:hover,#latest-games-container #latest-games .group-header:focus{border-color:var(--rg-border-hover);background:var(--rg-bg-hover);color:var(--rg-text-primary)}#latest-games-container #latest-games .group-header.active{border:2px solid var(--rg-border-pinned-voc);background:var(--rg-bg-card-pinned-voc);color:var(--rg-gametype-voc) !important}#latest-games-container #latest-games.display-mode-wrap{display:flex;flex-direction:row;flex-wrap:wrap;width:100%;max-height:none;overflow-y:visible;margin:0 10px}#latest-games-container #latest-games.display-mode-wrap .latest-game,#latest-games-container #latest-games.display-mode-wrap .group-header{margin:0 !important;max-width:none}#latest-games-container #latest-games .latest-game{position:relative;margin:0 10px;border:2px solid var(--rg-border-primary);border-radius:4px !important;background-color:var(--rg-bg-card);transition:border .1s ease,background-color .1s ease;display:inline-flex;max-width:300px}#latest-games-container #latest-games .latest-game.pin-game{cursor:move}#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-voc{border:2px solid var(--rg-border-pinned-voc);background-color:var(--rg-bg-card-pinned-voc)}#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-normal{border:2px solid var(--rg-border-pinned-normal);background-color:var(--rg-bg-card-pinned-normal)}#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-abra{border:2px solid var(--rg-border-pinned-abra);background-color:var(--rg-bg-card-pinned-abra)}#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-referats{border:2px solid var(--rg-border-pinned-referats);background-color:var(--rg-bg-card-pinned-referats)}#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-noerror{border:2px solid var(--rg-border-pinned-noerror);background-color:var(--rg-bg-card-pinned-noerror)}#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-marathon{border:2px solid var(--rg-border-pinned-marathon);background-color:var(--rg-bg-card-pinned-marathon)}#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-chars{border:2px solid var(--rg-border-pinned-chars);background-color:var(--rg-bg-card-pinned-chars)}#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-digits{border:2px solid var(--rg-border-pinned-digits);background-color:var(--rg-bg-card-pinned-digits)}#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-sprint{border:2px solid var(--rg-border-pinned-sprint);background-color:var(--rg-bg-card-pinned-sprint)}#latest-games-container #latest-games .latest-game:hover{border-color:var(--rg-border-hover);background-color:var(--rg-bg-hover)}#latest-games-container #latest-games .latest-game.dragging{opacity:.7;z-index:1021;transition:transform .1s ease}#latest-games-container #latest-games .latest-game.display-mode-wrap{margin:0}#latest-games-container #latest-games .latest-game a{display:block;width:100%;padding:5px 15px;text-decoration:none;color:inherit}#latest-games-container #latest-games .latest-game .latest-game-name{display:block;font-weight:bold;font-size:12px;margin-bottom:2px}#latest-games-container #latest-games .latest-game .latest-game-name.gametype-voc{color:var(--rg-gametype-voc) !important}#latest-games-container #latest-games .latest-game .latest-game-name.gametype-normal{color:var(--rg-gametype-normal) !important}#latest-games-container #latest-games .latest-game .latest-game-name.gametype-abra{color:var(--rg-gametype-abra) !important}#latest-games-container #latest-games .latest-game .latest-game-name.gametype-referats{color:var(--rg-gametype-referats) !important}#latest-games-container #latest-games .latest-game .latest-game-name.gametype-noerror{color:var(--rg-gametype-noerror) !important}#latest-games-container #latest-games .latest-game .latest-game-name.gametype-marathon{color:var(--rg-gametype-marathon) !important}#latest-games-container #latest-games .latest-game .latest-game-name.gametype-chars{color:var(--rg-gametype-chars) !important}#latest-games-container #latest-games .latest-game .latest-game-name.gametype-digits{color:var(--rg-gametype-digits) !important}#latest-games-container #latest-games .latest-game .latest-game-name.gametype-sprint{color:var(--rg-gametype-sprint) !important}#latest-games-container #latest-games .latest-game .latest-game-description{display:inline-flex;font-size:10px;color:var(--rg-text-secondary)}#latest-games-container #latest-games .latest-game .latest-game-qual{display:inline-flex;align-items:center;justify-content:center;margin-left:4px}#latest-games-container #latest-games .latest-game .latest-game-qual svg{width:14px;height:14px}#latest-games-container #latest-games .latest-game .latest-game-levels{display:block;font-size:9px;color:var(--rg-text-tertiary);margin-top:1px}#latest-games-container #latest-games .latest-game .latest-game-buttons{position:absolute;display:flex;flex-direction:row;justify-content:center;align-items:center;gap:2px;top:0;right:0;transform:translateY(-100%);background-color:var(--rg-bg-card);border-radius:4px !important;border:2px solid var(--rg-border-primary);box-shadow:0 1px 4px rgba(0,0,0,.2) !important;visibility:hidden}#latest-games-container #latest-games .latest-game:hover .latest-game-buttons{opacity:1}#latest-games-container #latest-games .latest-game .latest-game-pin{width:24px;height:24px;cursor:pointer;border-radius:2px !important;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease;background-color:rgba(0,0,0,0)}#latest-games-container #latest-games .latest-game .latest-game-pin:hover{background-color:var(--rg-bg-hover-pin)}#latest-games-container #latest-games .latest-game .latest-game-pin svg{width:16px;height:16px;stroke:var(--rg-icon-pin);fill:none}#latest-games-container #latest-games .latest-game .latest-game-delete{width:24px;height:24px;cursor:pointer;border-radius:2px !important;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease;background-color:rgba(0,0,0,0)}#latest-games-container #latest-games .latest-game .latest-game-delete:hover{background-color:var(--rg-bg-hover-delete)}#latest-games-container #latest-games .latest-game .latest-game-delete svg{width:16px;height:16px;stroke:var(--rg-icon-delete);fill:none}#latest-games-container #latest-games .latest-game .latest-game-info{width:24px;height:24px;cursor:pointer;border-radius:2px !important;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease;background-color:rgba(0,0,0,0)}#latest-games-container #latest-games .latest-game .latest-game-info:hover{background-color:var(--rg-bg-hover-info)}#latest-games-container #latest-games .latest-game .latest-game-info svg{width:16px;height:16px;stroke:var(--rg-icon-info);fill:none}#latest-games-container #latest-games .latest-game .latest-game-edit{width:24px;height:24px;cursor:pointer;border-radius:2px !important;display:flex;align-items:center;justify-content:center;transition:background-color .2s ease;background-color:rgba(0,0,0,0)}#latest-games-container #latest-games .latest-game .latest-game-edit:hover{background-color:var(--rg-bg-hover-edit)}#latest-games-container #latest-games .latest-game .latest-game-edit svg{width:16px;height:16px;stroke:var(--rg-icon-edit);fill:none}#latest-games-container .latest-games-controls{display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;padding:0 10px;margin-top:10px}#latest-games-container .latest-games-controls .controls-buttons{gap:2px}#latest-games-container .latest-games-controls .controls-buttons{display:flex;flex-wrap:wrap}#latest-games-container #latest-games-options{display:flex;align-items:center;font-size:13px;gap:5px;color:var(--rg-text-options);user-select:none}#latest-games-container #latest-games-count{margin:0 6px;font-weight:bold;font-size:14px;min-width:18px;text-align:center;color:var(--rg-text-count);cursor:pointer}#latest-games-container #latest-games-count-inc,#latest-games-container #latest-games-count-dec{height:24px;width:24px;cursor:pointer;font-size:16px;border-radius:3px !important;transition:background .15s;user-select:none;display:flex;align-items:center;justify-content:center;color:var(--rg-icon-primary)}#latest-games-container #latest-games-count-inc:hover,#latest-games-container #latest-games-count-dec:hover{background:var(--rg-hover-control-btn)}#latest-games-container #latest-games-count-inc svg,#latest-games-container #latest-games-count-dec svg{width:16px;height:16px}#latest-games-container .theme-toggle,#latest-games-container .display-mode-toggle,#latest-games-container .control-button{cursor:pointer;display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:4px;transition:background .15s;user-select:none}#latest-games-container .theme-toggle svg,#latest-games-container .display-mode-toggle svg,#latest-games-container .control-button svg{width:16px;height:16px;display:block;transition:stroke .2s,fill .2s}#latest-games-container .theme-toggle svg.feather-sun,#latest-games-container .display-mode-toggle svg.feather-sun,#latest-games-container .control-button svg.feather-sun{stroke:var(--rg-icon-theme-sun);fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}#latest-games-container .theme-toggle svg.feather-moon,#latest-games-container .display-mode-toggle svg.feather-moon,#latest-games-container .control-button svg.feather-moon{stroke:var(--rg-icon-theme-moon);fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}#latest-games-container .control-button{box-sizing:border-box}#latest-games-container .control-button svg{pointer-events:none}#latest-games-container #latest-games-groups{display:flex;flex-direction:column;align-items:start;margin-bottom:0}#latest-games-container #latest-games-groups .tabs-container{display:inline-flex;flex-direction:row;gap:5px;flex-wrap:wrap;align-items:center;margin:0 0 5px 10px}#latest-games-container #latest-games-groups .group-tab{display:inline-flex;padding:5px 15px;max-width:300px;font:600 14px "Montserrat",sans-serif;border-radius:4px !important;background:var(--rg-bg-card);color:var(--rg-text-primary);border:2px solid var(--rg-border-primary);cursor:pointer;user-select:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:fit-content;transition:border .1s ease,background-color .1s ease}#latest-games-container #latest-games-groups .group-tab:hover,#latest-games-container #latest-games-groups .group-tab:focus{border-color:var(--rg-border-hover);background:var(--rg-bg-hover);color:var(--rg-text-primary)}#latest-games-container #latest-games-groups .group-tab.active{border:2px solid var(--rg-border-pinned-voc);background:var(--rg-bg-card-pinned-voc);color:var(--rg-gametype-voc) !important}#latest-games-container #latest-games-groups .group-controls{gap:2px;display:inline-flex;align-items:center;margin:0 0 10px 10px}#latest-games-hover-area{position:fixed;left:0;top:0;width:4px;height:100vh;z-index:1023;background-color:rgba(0,0,0,0);pointer-events:auto}.latest-games-panel-toggle{position:fixed;left:0;top:50%;transform:translateY(-50%);z-index:1024;background:var(--rg-panel-toggle-background);border:2px solid var(--rg-panel-toggle-border);border-radius:0 .5em .5em 0 !important;box-shadow:0 2px 8px rgba(0,0,0,.15) !important;width:40px;height:40px;display:flex;justify-content:center;align-items:center;cursor:pointer;transition:background .2s;outline:none}.latest-games-panel-toggle:hover,.latest-games-panel-toggle:focus{background:var(--rg-panel-toggle-bg-hover)}.latest-games-panel-toggle svg{stroke:var(--rg-panel-toggle-stroke);width:1.5em;height:1.5em;display:block;pointer-events:none}.custom-tooltip-popup{position:fixed;background:#161616;color:#dedede;padding:.5em;z-index:1200;font-size:.9em;font-family:"Montserrat","Noto Color Emoji",sans-serif !important;pointer-events:none;white-space:nowrap;opacity:0;transition:opacity .1s;display:none;flex-direction:column;left:0;top:0;border:1px solid #3c3c3c !important;border-radius:4px !important;box-shadow:0 2px 5px rgba(0,0,0,.3) !important}.custom-tooltip-popup .tooltip-item{display:inline-flex !important;align-items:center !important}.custom-tooltip-popup .tooltip-header{font-weight:500 !important;color:gray !important;margin:.5em !important}.custom-tooltip-popup .tooltip-action{font-weight:500 !important;color:#add8e6 !important}.vocabulary-tooltip-popup{font:500 14px "Montserrat",sans-serif;position:fixed;background:#161616;color:#dedede;padding:.5em;z-index:1200;font-size:.9em;pointer-events:auto;white-space:pre-wrap;border:1px solid #3c3c3c !important;border-radius:4px !important;box-shadow:0 2px 5px rgba(0,0,0,.3) !important;max-width:700px;width:auto;max-height:400px;overflow-y:auto;overflow-x:hidden;scrollbar-width:thin;scrollbar-color:#8c8c8c #161616;word-wrap:break-word;overflow-wrap:break-word}.vocabulary-tooltip-popup .tooltip-number{color:#8c8c8c;opacity:.8}.vocabulary-tooltip-popup::-webkit-scrollbar{width:8px;height:8px}.vocabulary-tooltip-popup::-webkit-scrollbar-track{background:#161616 !important}.vocabulary-tooltip-popup::-webkit-scrollbar-thumb{background-color:#8c8c8c !important}.vocabulary-tooltip-popup::-webkit-scrollbar-thumb:hover{background-color:#a0a0a0 !important}.latest-games-disabled{filter:grayscale(1);opacity:.5}.latest-games-hidden{display:none !important}',""]);const i=s}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.nc=void 0;var n=a(72),r=a.n(n),o=a(825),s=a.n(o),i=a(659),l=a.n(i),c=a(56),g=a.n(c),p=a(540),d=a.n(p),m=a(113),u=a.n(m),h=a(911),v={};v.styleTagTransform=u(),v.setAttributes=g(),v.insert=l().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=d();r()(h.A,v);h.A&&h.A.locals&&h.A.locals;const f={montserrat:{id:"kg-latest-games-montserrat-font",url:"https://fonts.googleapis.com/css2?family=Montserrat&display=swap"},notoColorEmoji:{id:"kg-latest-games-noto-emoji-font",url:"https://fonts.googleapis.com/css2?family=Montserrat&family=Noto+Color+Emoji&display=swap"}};const y="‚òÄÔ∏è",b="üìÖ",x="üìã",w="üìú",k="üí¨",M={normal:"O–±—ã—á–Ω—ã–π",abra:"–ê–±—Ä–∞–∫–∞–¥–∞–±—Ä–∞",referats:"–Ø–Ω–¥–µ–∫—Å.–†–µ—Ñ–µ—Ä–∞—Ç—ã",noerror:"–ë–µ–∑–æ—à–∏–±–æ—á–Ω—ã–π",marathon:"–ú–∞—Ä–∞—Ñ–æ–Ω",chars:"–ë—É–∫–≤—ã",digits:"–¶–∏—Ñ—Ä—ã",sprint:"–°–ø—Ä–∏–Ω—Ç",voc:"–°–ª–æ–≤–∞—Ä—å"},S={words:"–°–ª–æ–≤–∞",phrases:"–§—Ä–∞–∑—ã",texts:"–¢–µ–∫—Å—Ç—ã",book:"–ö–Ω–∏–≥–∏"},C={normal:"–æ—Ç–∫—Ä—ã—Ç—ã–π",practice:"–æ–¥–∏–Ω–æ—á–Ω—ã–π",private:"–¥—Ä—É–∂–µ—Å–∫–∏–π"},L=["–Ω–æ–≤–∏—á–∫–∏","–ª—é–±–∏—Ç–µ–ª–∏","—Ç–∞–∫—Å–∏—Å—Ç—ã","–ø—Ä–æ—Ñ–∏","–≥–æ–Ω—â–∏–∫–∏","–º–∞–Ω—å—è–∫–∏","—Å—É–ø–µ—Ä–º–µ–Ω—ã","–∫–∏–±–µ—Ä–≥–æ–Ω—â–∏–∫–∏","—ç–∫—Å—Ç—Ä–∞–∫–∏–±–µ—Ä—ã"],E={–Ω–æ–≤–∏—á–∫–æ–≤:1,–ª—é–±–∏—Ç–µ–ª–µ–π:2,—Ç–∞–∫—Å–∏—Å—Ç–æ–≤:3,–ø—Ä–æ—Ñ–∏:4,–≥–æ–Ω—â–∏–∫–æ–≤:5,–º–∞–Ω—å—è–∫–æ–≤:6,—Å—É–ø–µ—Ä–º–µ–Ω–æ–≤:7,–∫–∏–±–µ—Ä–≥–æ–Ω—â–∏–∫–æ–≤:8,—ç–∫—Å—Ç—Ä–∞–∫–∏–±–µ—Ä–æ–≤:9},G=[5,10,20,30,45,60],T={maxGameCount:5,currentTheme:"light",displayMode:"scroll",previousScrollPosition:0,panelWidth:"95vw",hoverTimeout:null,isHovered:!1,enableDragging:!0,wasDragging:!1,shouldAutoSave:!0,alwaysVisiblePanel:!1,panelYPosition:0,hidePanelDelay:1e3,shouldStart:!1,startDelay:1e3,shouldReplay:!1,replayDelay:1e3,showSearchBox:!1,showButtonDescriptions:!0,showHelpTooltips:!0},D="http://www.w3.org/2000/svg",I={sun:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <circle cx="12" cy="12" r="5"></circle>\n      <line x1="12" y1="1" x2="12" y2="3"></line>\n      <line x1="12" y1="21" x2="12" y2="23"></line>\n      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>\n      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>\n      <line x1="1" y1="12" x2="3" y2="12"></line>\n      <line x1="21" y1="12" x2="23" y2="12"></line>\n      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>\n      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>\n    </svg>\n  `,moon:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>\n    </svg>\n  `,delete:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round">\n      <line x1="18" y1="6" x2="6" y2="18"></line>\n      <line x1="6" y1="6" x2="18" y2="18"></line>\n    </svg>\n  `,decrease:`\n    <svg xmlns="${D}" viewBox="0 0 24 24">\n      <path d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" fill="currentColor"/>\n    </svg>\n  `,increase:`\n    <svg xmlns="${D}" viewBox="0 0 24 24">\n      <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" fill="currentColor"/>\n    </svg>\n  `,play:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <polyline points="9 18 15 12 9 6"></polyline>\n    </svg>\n  `,replay:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <polyline points="13 17 18 12 13 7"></polyline>\n      <polyline points="6 17 11 12 6 7"></polyline>\n    </svg>\n  `,pin:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>\n      <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>\n    </svg>\n  `,unpin:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>\n      <path d="M7 11V7a5 5 0 0 1 9.9-1"></path>\n    </svg>\n  `,sort:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <polyline points="16 3 21 3 21 8"></polyline>\n      <line x1="4" y1="20" x2="21" y2="3"></line>\n      <polyline points="21 16 21 21 16 21"></polyline>\n      <line x1="15" y1="15" x2="21" y2="21"></line>\n      <line x1="4" y1="4" x2="9" y2="9"></line>\n    </svg>\n  `,import:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>\n      <polyline points="7 10 12 15 17 10"></polyline>\n      <line x1="12" y1="15" x2="12" y2="3"></line>\n    </svg>\n  `,export:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>\n      <polyline points="17 8 12 3 7 8"></polyline>\n      <line x1="12" y1="3" x2="12" y2="15"></line>\n    </svg>\n  `,trashNothing:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n      <polyline points="3 6 5 6 21 6"></polyline>\n      <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>\n    </svg>\n  `,trashSomething:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <polyline points="3 6 5 6 21 6"></polyline>\n      <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>\n      <line x1="10" y1="11" x2="10" y2="17"></line>\n      <line x1="14" y1="11" x2="14" y2="17"></line>\n    </svg>\n  `,wrap:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <rect x="3" y="3" width="7" height="7"/>\n      <rect x="14" y="3" width="7" height="7"/>\n      <rect x="14" y="14" width="7" height="7"/>\n      <rect x="3" y="14" width="7" height="7"/>\n    </svg>\n  `,scroll:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <rect x="2" y="2" width="20" height="20" rx="2"/>\n      <line x1="2" y1="8" x2="22" y2="8"/>\n      <line x1="2" y1="16" x2="22" y2="16"/>\n    </svg>\n  `,addGroup:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <line x1="12" y1="5" x2="12" y2="19"></line>\n      <line x1="5" y1="12" x2="19" y2="12"></line>\n    </svg>\n  `,renameGroup:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>\n    </svg>\n  `,qualification:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="var(--rg-qualification-icon)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <circle cx="12" cy="8" r="7"></circle>\n      <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>\n    </svg>\n  `,panelToggleClosed:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>\n      <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>\n    </svg>\n  `,panelToggleOpened:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>\n      <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>\n    </svg>\n  `,broom:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none"\n    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <line x1="12" y1="2" x2="12" y2="8.5"/>\n      <path d="M12 8.5c3.63,0 6.61,2.76 6.96,6.3 0.02,0.18 -0.03,0.35 -0.16,0.49 -0.12,0.14 -0.29,0.21 -0.47,0.21l-12.66 0c-0.18,0 -0.35,-0.07 -0.47,-0.21 -0.13,-0.14 -0.18,-0.31 -0.16,-0.49 0.35,-3.54 3.33,-6.3 6.96,-6.3z"/>\n      <path d="M5 15.5l14 0 1.04 5.74c0.03,0.2 -0.02,0.38 -0.14,0.53 -0.13,0.15 -0.3,0.23 -0.49,0.23l-14.81 0c-0.2,0 -0.37,-0.08 -0.49,-0.23 -0.13,-0.15 -0.18,-0.33 -0.14,-0.53l1.03 -5.74z"/>\n    </svg>\n  `,checkmark:`\n    <svg xmlns="${D}" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4caf50" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">\n      <polyline points="20 6 9 17 4 12"></polyline>\n    </svg>\n  `,dragToggle:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none"\n    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <polyline points="5 9 2 12 5 15"></polyline>\n      <polyline points="9 5 12 2 15 5"></polyline>\n      <polyline points="15 19 12 22 9 19"></polyline>\n      <polyline points="19 9 22 12 19 15"></polyline>\n      <line x1="2" y1="12" x2="22" y2="12"></line>\n      <line x1="12" y1="2" x2="12" y2="22"></line>\n    </svg>\n  `,search:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none"\n    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <circle cx="11" cy="11" r="8"></circle>\n      <line x1="21" y1="21" x2="16.65" y2="16.65"></line>\n    </svg>\n  `,info:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none"\n    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <circle cx="12" cy="12" r="10"></circle>\n      <line x1="12" y1="16" x2="12" y2="12"></line>\n      <line x1="12" y1="8" x2="12.01" y2="8"></line>\n    </svg>\n  `,help:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none"\n    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <circle cx="12" cy="12" r="10"></circle>\n      <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>\n      <line x1="12" y1="17" x2="12.01" y2="17"></line>\n    </svg>\n  `,parameters:`\n    <svg xmlns="${D}" viewBox="0 0 24 24" fill="none"\n    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <line x1="4" y1="21" x2="4" y2="14"></line>\n      <line x1="4" y1="10" x2="4" y2="3"></line>\n      <line x1="12" y1="21" x2="12" y2="12"></line>\n      <line x1="12" y1="8" x2="12" y2="3"></line>\n      <line x1="20" y1="21" x2="20" y2="16"></line>\n      <line x1="20" y1="12" x2="20" y2="3"></line>\n      <line x1="1" y1="14" x2="7" y2="14"></line>\n      <line x1="9" y1="8" x2="15" y2="8"></line>\n      <line x1="17" y1="16" x2="23" y2="16"></line>\n    </svg>\n  `};let N=null,$=null,H=null,B=!1,A=!1,q=null,P=null;const j=e=>{if("info"===e){return!0===(()=>{if(null===P)try{const e=localStorage.getItem("latestGamesSettings");P=e?JSON.parse(e):{}}catch(e){console.warn("Failed to parse latestGamesSettings from localStorage:",e),P={}}return P})().showHelpTooltips}return!0},O=(e,t)=>{if(!N)return;let a=e+10;const n=N.offsetWidth,r=window.innerWidth;a=Math.min(Math.max(a,10),r-n-10),N.style.left=`${a}px`,N.style.top=`${t+18}px`},R=e=>N&&O(e.clientX,e.clientY);function V(){B=!1,q=null,clearTimeout(H),clearTimeout($),$=setTimeout((()=>{N&&(N.style.opacity="0",A=!1,setTimeout((()=>{!B&&N&&(N.style.display="none",N.textContent="",document.removeEventListener("mousemove",R))}),50))}),100)}function _(e,t,a="info"){null!=t&&j(a)&&(e._tooltipContent=t,e._tooltipType=a,e._tooltipInitialized||(e._tooltipInitialized=!0,N||=(()=>{const e=document.createElement("div");return e.classList.add("custom-tooltip-popup"),e.style.display="none",e.style.opacity="0",document.body.appendChild(e),e})(),e.addEventListener("mouseenter",(t=>{j(e._tooltipType||"info")&&(B=!0,q=e,clearTimeout($),clearTimeout(H),N.innerHTML=Y(e._tooltipContent),N.style.display="flex",N.style.opacity="0",N.offsetHeight,O(t.clientX,t.clientY),document.addEventListener("mousemove",R),H=setTimeout((()=>{N.style.opacity="1",A=!0}),600))})),e.addEventListener("mouseleave",(()=>{V(),document.removeEventListener("mousemove",R)})),e.addEventListener("click",V)))}function z(e,t,a="info"){if(e._tooltipInitialized){if(j(a)&&(e._tooltipContent=t,e._tooltipType=a,q===e&&B&&N)){N.innerHTML=Y(t),A||(clearTimeout(H),N.style.opacity="1",A=!0);const a=e.getBoundingClientRect();O(a.left+a.width/2,a.bottom)}}else _(e,t,a)}function Y(e){let t="";const a=/\[([^\]]+)\]([^\[]*)/g;return e.split(/(## [^[]*)/g).forEach((e=>{if(e.startsWith("## ")){const a=e.slice(3).trim();t+=`<div class="tooltip-header">${a}</div>`}else{a.lastIndex=0;const n=[...e.matchAll(a)];n.length?n.forEach((e=>{const a=e[1],n=e[2].trim();t+=`\n            <div class="tooltip-item">\n              <span class="tooltip-action">${a}&nbsp;</span>\n              <span class="tooltip-message">${n}</span>\n            </div>`})):e.trim()&&(t+=`\n          <div class="tooltip-item">\n            <span class="tooltip-message">${e.trim()}</span>\n          </div>`)}})),t}function W(){return Array.from(crypto.getRandomValues(new Uint8Array(9))).map((e=>(e%36).toString(36))).join("")}function F(e){let t;const a=new Promise((a=>{t=setTimeout(a,e)}));return a.cancel=()=>{t&&(clearTimeout(t),t=null)},a}function X(e,t={}){const a=document.createElement(e);return t.className&&(a.className=t.className),t.id&&(a.id=t.id),t.innerHTML&&(a.innerHTML=t.innerHTML),t.textContent&&(a.textContent=t.textContent),t.href&&(a.href=t.href),t.title&&(a.title=t.title),t.src&&(a.src=t.src),t.style&&Object.assign(a.style,t.style),t.attributes&&Object.entries(t.attributes).forEach((([e,t])=>{a.setAttribute(e,t)})),a}new MutationObserver((()=>{q&&!document.contains(q)&&V()})).observe(document,{childList:!0,subtree:!0});class U{constructor(e){this.main=e}applyTheme(){document.documentElement.classList.remove("latest-games-light-theme","latest-games-dark-theme"),document.documentElement.classList.add("light"===this.main.currentTheme?"latest-games-light-theme":"latest-games-dark-theme"),this.updateThemeIcon()}updateThemeIcon(){const e=document.querySelector("#latest-games-container .theme-toggle");e&&(e.innerHTML="light"===this.main.currentTheme?I.sun:I.moon)}toggleTheme(e){this.main.currentTheme="light"===this.main.currentTheme?"dark":"light",_(e,"–ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º—É –Ω–∞ "+("light"===this.main.currentTheme?"—Ç—ë–º–Ω—É—é":"—Å–≤–µ—Ç–ª—É—é")),this.main.settingsManager.saveSettings(),this.applyTheme()}createThemeToggle(){const e=X("div",{className:"theme-toggle control-button"});return e.innerHTML="light"===this.main.currentTheme?I.sun:I.moon,e.addEventListener("click",(()=>this.toggleTheme(e))),_(e,"–ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–º—É –Ω–∞ "+("light"===this.main.currentTheme?"—Ç—ë–º–Ω—É—é":"—Å–≤–µ—Ç–ª—É—é")),e}}class J{constructor(e){this.main=e}loadSettings(){try{const e=JSON.parse(localStorage.getItem("latestGamesSettings")||"{}");this.main.maxGameCount=e.maxGameCount??this.main.maxGameCount,this.main.currentTheme=e.currentTheme??this.main.currentTheme,this.main.displayMode=e.displayMode??this.main.displayMode,this.main.groupsManager.groupViewMode=e.groupViewMode??this.main.groupsManager.groupViewMode,this.main.previousScrollPosition=e.previousScrollPosition??this.main.previousScrollPosition,this.main.panelWidth=e.panelWidth??this.main.panelWidth,this.main.enableDragging=e.enableDragging??this.main.enableDragging,this.main.shouldAutoSave=e.shouldAutoSave??this.main.shouldAutoSave,this.main.alwaysVisiblePanel=e.alwaysVisiblePanel??this.main.alwaysVisiblePanel,this.main.panelYPosition=e.panelYPosition??this.main.panelYPosition,this.main.hidePanelDelay=e.hidePanelDelay??this.main.hidePanelDelay,this.main.shouldStart=e.shouldStart??this.main.shouldStart,this.main.startDelay=e.startDelay??this.main.startDelay,this.main.shouldReplay=e.shouldReplay??this.main.shouldReplay,this.main.replayDelay=e.replayDelay??this.main.replayDelay,this.main.showSearchBox=e.showSearchBox??this.main.showSearchBox,this.main.showButtonDescriptions=e.showButtonDescriptions??this.main.showButtonDescriptions,this.main.showHelpTooltips=e.showHelpTooltips??this.main.showHelpTooltips}catch(e){console.warn("Could not load settings from localStorage:",e)}}saveSettings(){try{const e={maxGameCount:this.main.maxGameCount,currentTheme:this.main.currentTheme,displayMode:this.main.displayMode,groupViewMode:this.main.groupsManager.groupViewMode,previousScrollPosition:this.main.previousScrollPosition,panelWidth:this.main.panelWidth,enableDragging:this.main.enableDragging,shouldAutoSave:this.main.shouldAutoSave,alwaysVisiblePanel:this.main.alwaysVisiblePanel,panelYPosition:this.main.panelYPosition,hidePanelDelay:this.main.hidePanelDelay,shouldStart:this.main.shouldStart,startDelay:this.main.startDelay,shouldReplay:this.main.shouldReplay,replayDelay:this.main.replayDelay,showSearchBox:this.main.showSearchBox,showButtonDescriptions:this.main.showButtonDescriptions,showHelpTooltips:this.main.showHelpTooltips};localStorage.setItem("latestGamesSettings",JSON.stringify(e))}catch(e){console.warn("Could not save settings to localStorage:",e)}}async importSettings(e){const t=document.createElement("input");t.type="file",t.accept=".json,application/json",t.style.display="none",t.onchange=async t=>{const a=t.target.files[0];if(a)try{const t=await a.text(),n=JSON.parse(t);"object"==typeof n&&null!==n?(n.latestGamesSettings&&localStorage.setItem("latestGamesSettings",JSON.stringify(n.latestGamesSettings)),n.latestGamesData&&localStorage.setItem("latestGamesData",JSON.stringify(n.latestGamesData)),e.settingsManager.loadSettings(),e.gamesManager.loadGameData(),e.uiManager.refreshContainer(),e.themeManager.applyTheme()):alert("–§–∞–π–ª –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞–ª–∏–¥–Ω—ã–π JSON –Ω–∞—Å—Ç—Ä–æ–µ–∫.")}catch(e){alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ: "+e)}},document.body.appendChild(t),t.click(),setTimeout((()=>t.remove()),1e3)}exportSettings(e){const t={latestGamesSettings:JSON.parse(localStorage.getItem("latestGamesSettings")||"{}"),latestGamesData:{groups:e.groupsManager.groups,currentGroupId:e.groupsManager.currentGroupId}},a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download="kg-latest-games-settings.json",document.body.appendChild(r),r.click(),setTimeout((()=>{URL.revokeObjectURL(n),r.remove()}),1e3)}removeAllSettings(e){localStorage.removeItem("latestGamesSettings"),localStorage.removeItem("latestGamesData"),e.groupsManager.groups=[e.groupsManager.createGroup("–ì—Ä—É–ø–ø–∞-1")],e.groupsManager.currentGroupId=e.groupsManager.groups[0].id,e.gamesManager.saveGameData(),e.uiManager.refreshContainer()}}class K{constructor(e){this.main=e,this.groups=[],this.currentGroupId=null,this.groupViewMode="tabs"}generateUniqueGroupId(){let e;do{e=W()}while(this.groups.some((t=>t.id===e)));return e}createGroup(e){let t;if(e&&e.trim())t=e.trim();else{let e,a=1;do{e="–ì—Ä—É–ø–ø–∞-"+a++}while(this.groups.some((t=>t.title===e)));t=e}return{id:this.generateUniqueGroupId(),title:t,games:[]}}renameGroup(e,t){const a=this.groups.find((t=>t.id===e));a&&(a.title=t)}removeGroup(e){const t=this.groups.findIndex((t=>t.id===e));return-1!==t&&this.groups.splice(t,1),this.groups}initializeGroups(){if(0===this.groups.length){const e=this.createGroup();this.groups=[e],this.currentGroupId=e.id}else this.currentGroupId&&this.groups.some((e=>e.id===this.currentGroupId))||(this.currentGroupId=this.groups[0].id)}getCurrentGroup(){return this.groups.find((e=>e.id===this.currentGroupId))||null}setGroups(e,t){this.groups=e,this.currentGroupId=t}setGroupViewMode(e){this.groupViewMode=e}getGroupViewMode(){return this.groupViewMode}createGroupViewToggle(){const e=X("div",{className:"group-view-toggle control-button"});return e.innerHTML="tabs"===this.groupViewMode?I.wrap:I.scroll,_(e,"tabs"===this.groupViewMode?"–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤ –µ–¥–∏–Ω—ã–π –≤–∏–¥ —Å–æ –≤—Å–µ–º–∏ –∏–≥—Ä–∞–º–∏":"–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤ —Ä–µ–∂–∏–º –≤–∫–ª–∞–¥–æ–∫ –ø–æ –≥—Ä—É–ø–ø–∞–º"),e.addEventListener("click",(()=>{this.groupViewMode="tabs"===this.groupViewMode?"unified":"tabs",this.main.settingsManager.saveSettings(),this.updateGroupViewToggle(e),this.main.uiManager.refreshContainer()})),e}updateGroupViewToggle(e){e.innerHTML="tabs"===this.groupViewMode?I.wrap:I.scroll,_(e,"tabs"===this.groupViewMode?"–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤ –µ–¥–∏–Ω—ã–π –≤–∏–¥ —Å–æ –≤—Å–µ–º–∏ –∏–≥—Ä–∞–º–∏":"–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤ —Ä–µ–∂–∏–º –≤–∫–ª–∞–¥–æ–∫ –ø–æ –≥—Ä—É–ø–ø–∞–º")}moveGroup(e){const t=this.groups.findIndex((e=>e.id===this.currentGroupId));if(-1===t)return;const a=t+e;if(a<0||a>=this.groups.length)return;const n=this.groups[t];this.groups[t]=this.groups[a],this.groups[a]=n,this.main.gamesManager.saveGameData(),this.main.uiManager.refreshContainer()}updateGroupControlStates(){const e=document.querySelector(".move-group-left"),t=document.querySelector(".move-group-right");if(e&&t){const a=this.groups.findIndex((e=>e.id===this.currentGroupId)),n=0===a,r=a===this.groups.length-1;e.classList.toggle("latest-games-disabled",n),t.classList.toggle("latest-games-disabled",r)}}createGroupHeader(e){const t=X("div",{className:"group-header "+(e.id===this.currentGroupId?"active":""),textContent:e.title,dataset:{groupId:e.id}});return t.addEventListener("click",(()=>{this.selectGroup(e.id)})),t}createGroupsContainer(){const e=X("div",{id:"latest-games-groups"}),t=X("div",{className:"group-controls"+("unified"===this.groupViewMode?" unified-controls":"")}),a=X("span",{className:"add-group control-button",innerHTML:I.addGroup});_(a,"–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É"),a.addEventListener("click",(()=>this.addGroup()));const n=X("span",{className:"rename-group control-button",innerHTML:I.renameGroup});_(n,"–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—É"),n.addEventListener("click",(()=>this.renameActiveGroup()));const r=X("span",{className:"remove-group control-button",innerHTML:I.trashNothing});_(r,"\n      [–ö–ª–∏–∫] –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É –∏ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é –∞–∫—Ç–∏–≤–Ω–æ–π\n      [Shift + –ö–ª–∏–∫] –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É –∏ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –∞–∫—Ç–∏–≤–Ω–æ–π\n    "),r.addEventListener("click",(e=>this.removeActiveGroup(e)));const o=this.createGroupViewToggle(),s=X("span",{className:"move-group-left control-button",innerHTML:I.decrease});_(s,"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–∫–ª–∞–¥–∫—É –Ω–∞–∑–∞–¥"),s.addEventListener("click",(()=>{s.classList.contains("latest-games-disabled")||this.moveGroup(-1)}));const i=X("span",{className:"move-group-right control-button",innerHTML:I.increase});_(i,"–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤–∫–ª–∞–¥–∫—É –≤–ø–µ—Ä—ë–¥"),i.addEventListener("click",(()=>{i.classList.contains("latest-games-disabled")||this.moveGroup(1)})),t.append(a,n,r,o,s,i),e.appendChild(t);const l=X("div",{className:"tabs-container"});return this.groups.forEach((e=>{const t=X("span",{className:"group-tab "+(e.id===this.currentGroupId?"active":""),textContent:e.title,dataset:{groupId:e.id}});t.addEventListener("click",(()=>{this.selectGroup(e.id)})),l.appendChild(t)})),"unified"===this.groupViewMode&&l.classList.add("latest-games-hidden"),e.appendChild(l),e}selectGroup(e){this.groups.some((t=>t.id===e))&&(this.currentGroupId=e,this.main.gamesManager.saveGameData(),this.updateActiveGroup(),this.main.uiManager.refreshContainer())}updateActiveGroup(){document.querySelectorAll(".group-header").forEach((e=>e.classList.toggle("active",e.dataset.groupId===this.currentGroupId))),document.querySelectorAll(".group-tab").forEach((e=>e.classList.toggle("active",e.dataset.groupId===this.currentGroupId)))}addGroup(){const e=prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã:");if(null===e)return;const t=this.createGroup(e?.trim()||null);this.groups.push(t),this.currentGroupId=t.id,this.main.gamesManager.saveGameData(),this.main.uiManager.refreshContainer()}renameActiveGroup(){const e=this.getCurrentGroup(),t=prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã:",e?.title)?.trim();t&&(this.renameGroup(this.currentGroupId,t),this.main.gamesManager.saveGameData(),this.main.uiManager.refreshContainer())}removeActiveGroup(e){if(this.groups.length<=1)return void alert("–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≥—Ä—É–ø–ø—É.");const t=this.groups.findIndex((e=>e.id===this.currentGroupId));let a;this.removeGroup(this.currentGroupId),e&&e.shiftKey?a=t>=this.groups.length?this.groups.length-1:t:(a=t-1,a<0&&(a=0)),this.currentGroupId=this.groups[a].id,this.main.gamesManager.saveGameData(),this.main.uiManager.refreshContainer()}refreshGroupsContainer(){const e=document.getElementById("latest-games-groups");if(e){const t=e.querySelector(".group-controls");t&&(t.className="group-controls"+("unified"===this.groupViewMode?" unified-controls":""));const a=e.querySelector(".tabs-container");a&&(a.innerHTML="","tabs"===this.groupViewMode?(this.groups.forEach((e=>{const t=X("span",{className:"group-tab "+(e.id===this.currentGroupId?"active":""),textContent:e.title,dataset:{groupId:e.id}});t.addEventListener("click",(()=>this.selectGroup(e.id))),a.appendChild(t)})),a.classList.remove("latest-games-hidden")):a.classList.add("latest-games-hidden"))}this.updateGroupControlStates()}isCyrillic(e){const t=e.charCodeAt(0);return t>=1040&&t<=1103||1025===t||1105===t}compareGameNames(e,t){const a=this.main.gamesManager.generateGameName(e).toLowerCase(),n=this.main.gamesManager.generateGameName(t).toLowerCase(),r=this.isCyrillic(a[0]),o=this.isCyrillic(n[0]);return r&&!o?-1:!r&&o?1:a.localeCompare(n,"ru")}sortActiveGroupGames(){const e=this.getCurrentGroup();if(!e)return;const t=e.games.filter((e=>e.pin)),a=e.games.filter((e=>!e.pin));t.sort(((e,t)=>this.compareGameNames(e,t))),a.sort(((e,t)=>this.compareGameNames(e,t))),e.games=[...t,...a],this.main.gamesManager.saveGameData(),this.main.uiManager.refreshContainer()}getPinnedGameCount(){const e=this.getCurrentGroup();return e?e.games.filter((e=>e.pin)).length:0}}class Q{constructor(e){this.main=e}getDisplayMode(){return this.main.displayMode}setDisplayMode(e){this.main.displayMode=e,this.main.settingsManager.saveSettings()}createDisplayModeToggle(){const e=X("div",{className:"display-mode-toggle control-button"});return e.innerHTML="wrap"===this.getDisplayMode()?I.wrap:I.scroll,_(e,"wrap"===this.getDisplayMode()?"–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –≤–∏–¥":"–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –≤–∏–¥"),e.addEventListener("click",(()=>{const t="scroll"===this.getDisplayMode()?"wrap":"scroll";if(this.setDisplayMode(t),e.innerHTML="wrap"===t?I.wrap:I.scroll,this.updateDisplayModeClass(),_(e,"wrap"===t?"–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –≤–∏–¥":"–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –≤–∏–¥"),"scroll"===t){const e=document.getElementById("latest-games-container");e&&setTimeout((()=>e.scrollTop=e.scrollHeight),0)}})),e}updateDisplayModeClass(){const e=document.getElementById("latest-games-container"),t=document.getElementById("latest-games");if(!e||!t)return;const a=this.getDisplayMode();e.classList.toggle("display-mode-wrap","wrap"===a),t.classList.toggle("display-mode-wrap","wrap"===a),this.updateContainerLeftOffset()}updateContainerLeftOffset(){const e=document.getElementById("latest-games-container");if(!e)return;const t=this.getDisplayMode();e.style.left="wrap"===t?"calc(-1 * (100vw - 100px))":"-330px"}}function Z(e){const t=new Map;e.forEach((e=>{e.games.forEach((a=>{if(a.params&&a.params.vocId){const n=String(a.params.vocId);t.has(n)||t.set(n,[]),t.get(n).push(e.name||e.title||"–ì—Ä—É–ø–ø–∞")}}))}));document.querySelectorAll('a.name[href*="/vocs/"]').forEach((e=>{const a=e.getAttribute("href"),n=a&&a.match(/\/vocs\/(\d+)(?:\/|$)/);if(n){const a=n[1],r=e.parentNode,o=r.querySelector(".kg-voc-checkmark");if(o&&o.remove(),t.has(a)){const n=document.createElement("span");n.className="kg-voc-checkmark",n.innerHTML=I.checkmark;_(n,"–°–ª–æ–≤–∞—Ä—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –≥—Ä—É–ø–ø–µ: "+t.get(a).join(", "));const o=r.querySelector(".desc");o?r.insertBefore(n,o):e.appendChild(n)}}}))}function ee(e,t,a="popup",n){const r=document.querySelector(`.${a}`);r&&r.remove();const o=X("div",{className:a});if(n){const e=X("div",{className:"popup-header",textContent:n});o.appendChild(e)}e.forEach((e=>{const t=X("button",{className:e.className||"popup-button",textContent:e.text,...e.dataset&&{dataset:e.dataset}});e.onClick&&t.addEventListener("click",(()=>{e.onClick(),o.remove()})),o.appendChild(t)})),o.style.visibility="hidden",document.body.appendChild(o),o.querySelectorAll("button").forEach((e=>{e.scrollWidth>e.clientWidth&&_(e,e.textContent)}));const s=o.getBoundingClientRect(),i=window.innerWidth,l=window.innerHeight;let c=Math.max(10,Math.min(t.clientX,i-s.width-10)),g=Math.max(10,Math.min(t.clientY,l-s.height-10));o.style.left=`${c}px`,o.style.top=`${g}px`,o.style.visibility="visible";const p=e=>{e&&"keydown"===e.type&&"Escape"!==e.key||(o.remove(),document.removeEventListener("click",d),document.removeEventListener("keydown",m))},d=e=>{o.contains(e.target)||p(e)},m=e=>{"Escape"===e.key&&p(e)};return requestAnimationFrame((()=>{document.addEventListener("click",d),document.addEventListener("keydown",m)})),o}let te=null,ae=null,ne=null,re=null;function oe(e,t){ae&&(clearTimeout(ae),ae=null),ne&&(clearTimeout(ne),ne=null),te&&re===e||(te&&se(),ne=setTimeout((()=>{re=e,te=function(e){const t=document.createElement("div");t.className="vocabulary-tooltip-popup";const a=e.replace(/^(\d+)\.\s/gm,'<span class="tooltip-number">$1.</span> ');return t.innerHTML=a,document.body.appendChild(t),t}(t),function(e,t){const a=e.getBoundingClientRect(),n=window.innerWidth,r=window.innerHeight,o=10,s=t.getBoundingClientRect();let i=a.left,l=a.bottom+5;i+s.width>n-o&&(i=n-s.width-o);i<o&&(i=o);if(l+s.height>r-o){const e=a.top-s.height-5;l=e>=o?e:o}l<o&&(l=o);t.style.left=`${i}px`,t.style.top=`${l}px`}(e,te),te.addEventListener("mouseenter",(()=>{ae&&(clearTimeout(ae),ae=null)})),te.addEventListener("mouseleave",(()=>{ie()})),ne=null}),400))}function se(){te&&(te.remove(),te=null,re=null),ae&&(clearTimeout(ae),ae=null),ne&&(clearTimeout(ne),ne=null)}function ie(){ae&&clearTimeout(ae),ae=setTimeout((()=>{se()}),300)}function le(){const e=document.querySelector(".columns.voclist");e?(e.addEventListener("mouseenter",(async e=>{const t=e.target.closest('a.name[href*="/vocs/"]');if(t){const e=t.getAttribute("href"),a=e.match(/\/vocs\/(\d+)(?:\/|$)/);if(!a)return void console.warn(`Invalid vocabulary href: ${e}`);const n=a[1];t._tooltipContent?oe(t,t._tooltipContent):async function(e){try{const t=await fetch(`https://klavogonki.ru/vocs/${e}/`),a=await t.text(),n=(new DOMParser).parseFromString(a,"text/html").querySelector(".words");if(!n)return console.warn(`No element with class "words" found for vocId ${e}`),"Vocabulary content not found";const r=n.querySelectorAll("tr");return 0===r.length?(console.warn(`No table rows found for vocId ${e}`),"No words available"):Array.from(r).map(((e,t)=>{const a=e.querySelector("td.num"),n=e.querySelector("td.text");if(!n)return null;const r=n.innerHTML.replace(/<br\s*\/?>/gi,"\n").replace(/<[^>]*>/g,"").trim();if(""===r||"‚Ä¶"===r)return null;if(a){const e=a.textContent.trim();return""===e||"‚Ä¶"===e?null:`${e}. ${r}`}return`${t+1}. ${r}`})).filter((e=>null!==e)).join("\n\n")}catch(t){return console.error(`Error fetching vocabulary content for vocId ${e}:`,t),"Error loading vocabulary"}}(n).then((e=>{t._tooltipContent=e,oe(t,e)}))}}),{capture:!0}),e.addEventListener("mouseleave",(e=>{const t=e.target.closest('a.name[href*="/vocs/"]');t&&re===t&&ie(),ne&&(clearTimeout(ne),ne=null)}),{capture:!0})):console.warn('Element with class "columns voclist" not found.')}function ce(e,t){const a=document.querySelector(".columns.voclist");a?a.addEventListener("contextmenu",(a=>{const n=a.target.closest('a.name[href*="/vocs/"]');if(n){a.preventDefault();const r=n.getAttribute("href").match(/\/vocs\/(\d+)(?:\/|$)/);if(r){const o=r[1],s=n.textContent.trim();!function(e,t,a,n,r){se(),ee(e.map((t=>{const o=t.games.some((e=>String(e.params?.vocId)===String(a)));return{text:t.title,className:"group-tab"+(o?" active":""),dataset:{groupId:t.id},onClick:()=>{const s=e.find((e=>e.games.some((e=>String(e.params?.vocId)===String(a)))));if(s)alert(`–≠—Ç–æ—Ç —Å–ª–æ–≤–∞—Ä—å —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ ${s.title}`);else if(!o){const o={id:W(),params:{gametype:"voc",vocName:n,vocId:a,type:"normal",level_from:1,level_to:9,timeout:10,qual:0,premium_abra:0},pin:1};t.games.unshift(o),r.gamesManager.saveGameData(),r.uiManager.refreshContainer(),Z(e)}}}})),t,"vocabulary-creation-popup","–î–æ–±–∞–≤–∏—Ç—å")}(e,a,o,s,t)}}})):console.warn('Element with class "columns voclist" not found.')}class ge{constructor(e){this.main=e,this.replaySleep=null,this.startSleep=null,this.startIndicator=null,this.replayIndicator=null,this.startTimer=null,this.replayTimer=null,this.isHoveringLatestGames=!1}createSleepIndicator(e,t){const a=document.createElement("div");a.className="start"===e?"sleep-start-indicator":"sleep-replay-indicator",document.body.appendChild(a);let n=t;const r=Date.now(),o=()=>{const s=Date.now()-r;n=Math.max(0,t-s);const i=Math.floor(n/1e3),l=Math.floor(n%1e3/10);if(a.textContent=`${i.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`,n>0){const t=requestAnimationFrame(o);"start"===e?this.startTimer=t:this.replayTimer=t}};return o(),a}removeSleepIndicator(e){"start"===e?(this.startTimer&&(cancelAnimationFrame(this.startTimer),this.startTimer=null),this.startIndicator&&(this.startIndicator.remove(),this.startIndicator=null)):"replay"===e&&(this.replayTimer&&(cancelAnimationFrame(this.replayTimer),this.replayTimer=null),this.replayIndicator&&(this.replayIndicator.remove(),this.replayIndicator=null))}handlePageSpecificLogic(){const{href:e}=location;if(/https?:\/\/klavogonki\.ru\/g\/\?gmid=/.test(e)){this.setupHoverListeners();const e=new MutationObserver((()=>{const t=document.querySelector("#gamedesc");t&&t.textContent&&(e.disconnect(),this.saveCurrentGameParams(),this.handleGameActions())}));e.observe(document.body,{childList:!0,subtree:!0});const t=document.getElementById("finished");if(t){const e=new MutationObserver((()=>{e.disconnect(),this.handleGameActions()}));e.observe(t,{attributes:!0})}}/klavogonki\.ru\/vocs\//.test(e)&&(Z(this.main.groupsManager.groups),ce(this.main.groupsManager.groups,this.main),le())}setupHoverListeners(){const e=document.getElementById("latest-games-container");e&&(e.addEventListener("mouseenter",(()=>{this.isHoveringLatestGames=!0,this.replaySleep&&"function"==typeof this.replaySleep.cancel&&(this.replaySleep.cancel(),this.replaySleep=null,this.removeSleepIndicator("replay"))})),e.addEventListener("mouseleave",(()=>{this.isHoveringLatestGames=!1,this.handleReplayAction()})))}saveCurrentGameParams(){const e=document.getElementById("gamedesc");if(!e)throw new Error("#gamedesc element not found.");const t=e.querySelector("span");if(!t)throw new Error("#gamedesc span element not found.");const a=e.textContent;if(/—Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ/.test(a)||!this.main.maxGameCount||!1===this.main.shouldAutoSave)return!1;const n=this.main.gamesManager.parseGameParams(t,a),r=JSON.stringify(n),o=this.main.groupsManager.getCurrentGroup(this.main.groupsManager.groups,this.main.groupsManager.currentGroupId);if(!o)return;if(o.games.some((e=>JSON.stringify(e.params)===r)))return;const s={params:n,id:W(),pin:0},i=o.games.filter((e=>e.pin)).length;o.games.splice(i,0,s);const l=i+this.main.maxGameCount;o.games.length>l&&o.games.splice(l,o.games.length-l),this.main.gamesManager.assignGameIds(),this.main.gamesManager.saveGameData()}handleGameActions(){this.handleStartAction(),this.handleReplayAction()}handleStartAction(){if(this.main.shouldStart){const e=document.querySelector("#status-inner #paused");e&&"none"!==e.style.display&&"undefined"!=typeof game&&game.hostStart&&(this.removeSleepIndicator("start"),this.startIndicator=this.createSleepIndicator("start",this.main.startDelay),this.startSleep=F(this.main.startDelay),this.startSleep.then((()=>{this.removeSleepIndicator("start"),game.hostStart()})).catch((()=>{this.removeSleepIndicator("start"),this.startSleep=null})))}}handleReplayAction(){if(this.main.shouldReplay){const e=document.querySelector("#status-inner #finished");if(e&&"none"!==e.style.display){const e=location.href.match(/gmid=(\d+)/);if(e){const t=e[1];this.isHoveringLatestGames||(this.removeSleepIndicator("replay"),this.replayIndicator=this.createSleepIndicator("replay",this.main.replayDelay),this.replaySleep=F(this.main.replayDelay),this.replaySleep.then((()=>{this.removeSleepIndicator("replay"),window.location.href=`https://klavogonki.ru/g/${t}.replay`})).catch((()=>{this.removeSleepIndicator("replay"),this.replaySleep=null})))}}}}}const pe=10;const de=Object.keys(C),me="latestGamesSettings",ue=0,he=5,ve=5,fe=8,ye=[".popup-header",".popup-header-title",".popup-subheader",".rank-slider-display",".timeouts-container"],be=[".game-popup-button",".rank-slider-handle",".rank-slider-track",".rank-slider-range",".popup-header-qualification"],xe={load(){try{return JSON.parse(localStorage.getItem(me))||{}}catch(e){return{}}},save(e){try{localStorage.setItem(me,JSON.stringify(e))}catch(e){console.warn("Failed to save settings:",e)}},getRankRange(){return this.load().rankRange||[ue,fe]},saveRankRange(e,t){const a=this.load();a.rankRange=[e,t],this.save(a)},getQualificationState(){const e=this.load();return void 0!==e.qualificationEnabled&&e.qualificationEnabled},saveQualificationState(e){const t=this.load();t.qualificationEnabled=e,this.save(t)}};function we(e,t){return t?Math.max(ue,Math.min(he,e)):Math.max(ve,Math.min(fe,e))}function ke(e,t,a,n="game-popup"){V();const r=document.querySelector(`.${n}`);r&&r.remove();const o=X("div",{className:n}),s=X("div",{className:"popup-header"}),i=X("div",{className:"popup-header-title",textContent:"–í—ã–±—Ä–∞—Ç—å"}),l=X("span",{className:"popup-header-qualification",innerHTML:I.qualification});let c=xe.getQualificationState();l.classList.toggle("latest-games-disabled",!c),_(l,"–ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è "+(c?"–≤–∫–ª—é—á–µ–Ω–∞":"–≤—ã–∫–ª—é—á–µ–Ω–∞")),l.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),c=!c,xe.saveQualificationState(c),l.classList.toggle("latest-games-disabled",!c),_(l,"–ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è "+(c?"–≤–∫–ª—é—á–µ–Ω–∞":"–≤—ã–∫–ª—é—á–µ–Ω–∞")),b()})),s.append(i,l),o.appendChild(s);const g=X("div",{className:"rank-slider-container"}),p=X("div",{className:"rank-slider-track"}),d=X("div",{className:"rank-slider-range"}),m=[X("div",{className:"rank-slider-handle",tabIndex:0}),X("div",{className:"rank-slider-handle",tabIndex:0})],u=X("div",{className:"rank-slider-display"});let[h,v]=xe.getRankRange();h=we(h,!0),v=we(v,!1),h>v&&(h=v),v<h&&(v=h);const f=[];function y(){h=we(h,!0),v=we(v,!1),h>v&&(h=v),v<h&&(v=h);const e=h/(L.length-1)*100,t=v/(L.length-1)*100;m[0].style.left=e+"%",m[1].style.left=t+"%",d.style.left=e+"%",d.style.width=t-e+"%",u.textContent=L[h]+(h===v?"":" ‚Äî "+L[v]);const a=h===v,n=[["overlap","overlap-left"],["overlap","overlap-right"]];m.forEach(((e,t)=>{n[t].forEach((t=>e.classList.toggle(t,a)))})),b()}function b(){const t=h!==ue||v!==fe;f.forEach((({btn:n,type:r,timeout:o})=>{const s={...e,params:{...e.params,type:r,timeout:o,level_from:t?h+1:e.params.level_from,level_to:t?v+1:e.params.level_to}};c&&(s.params.qual=1);const i=a.generateGameLink(s);n.setAttribute("href",i),n.onclick=e=>{e.preventDefault(),window.location.href=i}}))}function x(){xe.saveRankRange(h,v)}return p.addEventListener("click",(e=>{const t=p.getBoundingClientRect(),a=(e.clientX-t.left)/t.width;let n=Math.round(a*(L.length-1));Math.abs(n-h)<Math.abs(n-v)?h=Math.min(we(n,!0),v):v=Math.max(we(n,!1),h),y(),x()})),m.forEach(((e,t)=>{e.addEventListener("mousedown",(e=>{e.preventDefault();let a=0===t?h:v;const n=({clientX:e})=>{const{left:n,width:r}=p.getBoundingClientRect();let o=Math.round((e-n)/r*(L.length-1));o=we(o,0===t);const s=0===t?Math.min(o,v):Math.max(o,h);s!==a&&(a=s,0===t?h=s:v=s,y())},r=()=>{x(),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}))})),p.appendChild(d),m.forEach((e=>p.appendChild(e))),g.appendChild(u),g.appendChild(p),o.appendChild(g),y(),de.forEach((t=>{const n=X("div",{className:"popup-subheader",textContent:C[t]});o.appendChild(n);const r=X("div",{className:"timeouts-container"});G.forEach((n=>{if("normal"===t&&5===n)return;const o=h!==ue||v!==fe,s={...e,params:{...e.params,type:t,timeout:n,level_from:o?h+1:e.params.level_from,level_to:o?v+1:e.params.level_to}};c&&(s.params.qual=1);const i=a.generateGameLink(s),l=X("a",{href:i,className:"game-popup-button",textContent:n});l.addEventListener("click",(e=>{e.preventDefault(),window.location.href=i})),f.push({btn:l,type:t,timeout:n}),r.appendChild(l)})),o.appendChild(r)})),function(e,t){e.querySelectorAll("a").forEach((e=>{e.scrollWidth>e.clientWidth&&_(e,e.textContent)})),function(e,t,a={}){const{draggableSelectors:n=[],interactiveSelectors:r=[],onClose:o=null}=a;e.parentNode||(e.style.visibility="hidden",document.body.appendChild(e));const s=(t,a)=>{const n=window.innerWidth,r=window.innerHeight,o=e.getBoundingClientRect(),s=n-o.width-pe,i=r-o.height-pe,l=Math.max(pe,Math.min(t,s)),c=Math.max(pe,Math.min(a,i));e.style.left=`${l}px`,e.style.top=`${c}px`};s(t.clientX,t.clientY),e.style.visibility="visible";const i={clickOutside:null,keydown:null,popupMouseDown:t=>{if((a=t.target)!==e&&!n.some((e=>a.matches&&a.matches(e)))||(e=>r.some((t=>e.matches&&(e.matches(t)||e.closest(t)))))(t.target))return;var a;if(0!==t.button)return;t.preventDefault();const o=t.clientX,l=t.clientY,c=parseInt(e.style.left,pe),g=parseInt(e.style.top,pe),p=e=>{const t=e.clientX-o,a=e.clientY-l;s(c+t,g+a)},d=()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",d),i.currentDrag=null};i.currentDrag={onMouseMove:p,onMouseUp:d},document.addEventListener("mousemove",p),document.addEventListener("mouseup",d)},currentDrag:null};e.addEventListener("mousedown",i.popupMouseDown),e.style.cursor="move";const l=t=>{t&&"keydown"===t.type&&"Escape"!==t.key||(o&&o(),c(),e.remove())},c=()=>{i.clickOutside&&document.removeEventListener("click",i.clickOutside),i.keydown&&document.removeEventListener("keydown",i.keydown),i.popupMouseDown&&e.removeEventListener("mousedown",i.popupMouseDown),i.currentDrag&&(document.removeEventListener("mousemove",i.currentDrag.onMouseMove),document.removeEventListener("mouseup",i.currentDrag.onMouseUp))};i.clickOutside=t=>{e.contains(t.target)||l(t)},i.keydown=e=>{"Escape"===e.key&&l(e)},requestAnimationFrame((()=>{document.addEventListener("click",i.clickOutside),document.addEventListener("keydown",i.keydown)}))}(e,t,{draggableSelectors:ye,interactiveSelectors:be})}(o,t),o}function Me(e,t,a){if("wrap"===e.main.viewManager.getDisplayMode()){t.style.width=e.main.panelWidth,a.style.display="";let n,r,o=!1;const s=e=>{if(!o)return;const a=e.clientX-n;let s=r+a;const i=.95*window.innerWidth;s=Math.max(350,Math.min(s,i));const l=Math.round(s/window.innerWidth*100*10)/10;t.style.width=`${l}vw`},i=()=>{o&&(o=!1,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",i),e.main.panelWidth=t.style.width,e.main.settingsManager.saveSettings())};a.onmousedown=e=>{0===e.button&&(o=!0,n=e.clientX,r=t.offsetWidth,document.addEventListener("mousemove",s),document.addEventListener("mouseup",i),e.preventDefault())}}else a.style.display="none",t.style.width="",a.onmousedown=null}function Se(e,t){if("wrap"===e.main.viewManager.getDisplayMode()){"number"==typeof e.main.panelYPosition&&(t.style.top=`${e.main.panelYPosition}vh`);let a,n,r=!1;const o=e=>{if(!r)return;const o=e.clientY-a,s=n+o/window.innerHeight*100,i=t.offsetHeight,l=Math.max(0,(window.innerHeight-i)/window.innerHeight*100),c=Math.max(0,Math.min(s,l)),g=Math.round(10*c)/10;t.style.top=`${g}vh`},s=()=>{if(!r)return;r=!1,document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s);const a=t.getBoundingClientRect();e.main.panelYPosition=Math.round(a.top/window.innerHeight*100*10)/10,e.main.settingsManager.saveSettings()},i=e=>{if(0!==e.button)return;if([".latest-game",".group-tab",".control-button",".resize-handle","#latest-games-search-input"].some((t=>e.target.closest(t))))return;r=!0,a=e.clientY;const i=t.getBoundingClientRect();n=i.top/window.innerHeight*100,document.addEventListener("mousemove",o),document.addEventListener("mouseup",s),e.preventDefault()};t.addEventListener("mousedown",i)}else t.style.top=""}const Ce={draggedElement:null,isDragging:!1,isRightHalf:!1,dragDirection:0,lastDragDirection:0,lastPanelDragY:0,dragOffset:{x:0,y:0},initialX:0,initialY:0,dragThreshold:1,rotationAccumulator:0,rotationDegreeLimit:5,globalEvents:{},reset(){this.draggedElement=null,this.isDragging=!1,this.isRightHalf=!1,this.dragDirection=0,this.lastDragDirection=0,this.lastPanelDragY=0,this.dragOffset={x:0,y:0},this.initialX=0,this.initialY=0,this.rotationAccumulator=0,this.globalEvents={}},cleanup(){this.globalEvents.handleDragMove&&document.removeEventListener("mousemove",this.globalEvents.handleDragMove),this.globalEvents.handleDragEnd&&document.removeEventListener("mouseup",this.globalEvents.handleDragEnd),this.globalEvents={}}};function Le(e){const t=e.getBoundingClientRect(),a=e.parentElement.getBoundingClientRect(),n=e.parentElement;return{element:{rect:t,width:e.offsetWidth,height:e.offsetHeight},parent:{rect:a,width:n.offsetWidth,height:n.offsetHeight}}}function Ee(e,t){Ce.cleanup(),t.addEventListener("mousedown",(a=>{if(a.preventDefault(),0!==a.button)return;if(a.target.closest(".latest-game-buttons"))return;Ce.cleanup(),e.wasDragging=!1,Ce.initialX=a.clientX,Ce.initialY=a.clientY,Ce.isDragging=!0,Ce.draggedElement=t;const n=Le(t),r=a.clientX-n.element.rect.left;Ce.isRightHalf=r>n.element.rect.width/2,Ce.lastPanelDragY=a.clientY,Ce.dragOffset={x:a.clientX-n.element.rect.left,y:a.clientY-n.element.rect.top},Ce.globalEvents.handleDragMove=t=>function(e,t){if(!Ce.isDragging||!Ce.draggedElement)return;if(!t.wasDragging&&function(e){return Math.abs(e.clientX-Ce.initialX)>Ce.dragThreshold||Math.abs(e.clientY-Ce.initialY)>Ce.dragThreshold}(e)&&(t.wasDragging=!0,Ce.draggedElement.classList.add("dragging"),"wrap"===t.viewManager.getDisplayMode())){const e=Le(Ce.draggedElement);Ce.draggedElement.style.position="absolute",Ce.draggedElement.style.left=e.element.rect.left-e.parent.rect.left+"px",Ce.draggedElement.style.top=e.element.rect.top-e.parent.rect.top+"px",Ce.draggedElement.style.width=`${e.element.rect.width}px`}e.preventDefault();const a=t.viewManager.getDisplayMode(),n=document.getElementById("latest-games");"scroll"===a?function(e,t){const a=Array.from(t.querySelectorAll(".pin-game:not(.dragging)"));let n=null;for(const t of a){const a=t.getBoundingClientRect(),r=a.top+a.height/2;if(e.clientY<r)break;n=t}if(n)t.insertBefore(Ce.draggedElement,n.nextSibling);else{const e=t.querySelector(".pin-game:not(.dragging)");e&&t.insertBefore(Ce.draggedElement,e)}}(e,n):function(e,t){const a=Le(Ce.draggedElement);let n=e.clientX-Ce.dragOffset.x-a.parent.rect.left,r=e.clientY-Ce.dragOffset.y-a.parent.rect.top;n=Math.max(0,Math.min(n,a.parent.width-a.element.width)),r=Math.max(0,Math.min(r,a.parent.height-a.element.height)),Ce.draggedElement.style.left=`${n}px`,Ce.draggedElement.style.top=`${r}px`;const o=Array.from(t.querySelectorAll(".pin-game:not(.dragging)"));let s=null,i=1/0;if(o.forEach((t=>{const a=t.getBoundingClientRect(),n=a.left+a.width/2,r=a.top+a.height/2,o=Math.hypot(e.clientX-n,e.clientY-r);o<i&&(i=o,s=t)})),s){const a=s.getBoundingClientRect();e.clientX<a.left+a.width/2?t.insertBefore(Ce.draggedElement,s):t.insertBefore(Ce.draggedElement,s.nextSibling)}}(e,n);const r=e.clientY,o=r-Ce.lastPanelDragY;if(Ce.lastPanelDragY=r,0!==o){const e=.2;Ce.rotationAccumulator=(Ce.rotationAccumulator||0)+(Ce.isRightHalf?o:-o)*e,Ce.rotationAccumulator=Math.max(-Ce.rotationDegreeLimit,Math.min(Ce.rotationDegreeLimit,Ce.rotationAccumulator)),Ce.draggedElement.style.transform=`rotate(${Ce.rotationAccumulator}deg)`}}(t,e),Ce.globalEvents.handleDragEnd=()=>function(e){if(Ce.cleanup(),!Ce.isDragging||!Ce.draggedElement)return void Ce.reset();Ce.isDragging=!1,Ce.draggedElement.classList.remove("dragging");const t=e.viewManager.getDisplayMode();"wrap"===t&&(Ce.draggedElement.style.position="",Ce.draggedElement.style.left="",Ce.draggedElement.style.top="",Ce.draggedElement.style.width="");Ce.draggedElement.style.transform="",e.gamesManager.updateGameOrderFromDOM(),Ce.reset()}(e),document.addEventListener("mousemove",Ce.globalEvents.handleDragMove),document.addEventListener("mouseup",Ce.globalEvents.handleDragEnd)}))}const Ge=new class{constructor(){this.cache=new Map}getUserId(){const e=document.querySelector(".userpanel .user-block .name img");if(!e)return null;const t=e.src.match(/\/avatars\/(\d+)_/);return t?t[1]:null}parseGameParams(e){const t=e.href,a=new URL(t),n={};for(const[e,t]of a.searchParams)n[e]=t;return n}getGameId(e){const t=this.parseGameParams(e);return"voc"===t.gametype&&t.voc?t.voc:t.gametype?t.gametype:"normal"}buildApiUrl(e,t){const a=new URLSearchParams({userId:e}),n=Object.keys(M);return"voc"===t.gametype&&t.voc?a.append("gametype",`voc-${t.voc}`):t.gametype&&n.includes(t.gametype)?a.append("gametype",t.gametype):(console.warn(`Unsupported gametype "${t.gametype}", defaulting to "normal"`),a.append("gametype","normal")),`https://klavogonki.ru/api/profile/get-stats-details?${a.toString()}`}async fetchGameStats(e){if(this.cache.has(e))return this.cache.get(e);try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();return this.cache.set(e,a),a}catch(e){return console.error("Failed to fetch game stats:",e),null}}formatTime(e){if(!e)return"N/A";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`}formatDate(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(t){return e}}formatStats(e,t,a){if(!e||!e.ok)return"–î–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç";const{gametype:n,info:r}=e;let o="";if(o+="## –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",n){if(n.name&&(o+=`[–ù–∞–∑–≤–∞–Ω–∏–µ] ${n.name}`),n.id&&(o+=`[ID —Å–ª–æ–≤–∞—Ä—è] ${n.id}`),n.type){o+=`[–ö–∞—Ç–µ–≥–æ—Ä–∏—è] ${S[n.type]||n.type}`}n.symbols&&(o+=`[–°–∏–º–≤–æ–ª–æ–≤] ${n.symbols.toLocaleString()}`),n.rows&&(o+=`[–°—Ç—Ä–æ–∫] ${n.rows.toLocaleString()}`)}if(o+="## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",r&&(r.num_races&&(o+=`[–ó–∞–µ–∑–¥–æ–≤] ${r.num_races}`),r.avg_speed&&(o+=`[–°—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å] ${Math.round(r.avg_speed)} –∑–Ω/–º–∏–Ω`),r.best_speed&&(o+=`[–õ—É—á—à–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å] ${r.best_speed} –∑–Ω/–º–∏–Ω`),void 0!==r.avg_error&&(o+=`[–°—Ä–µ–¥–Ω–∏–π % –æ—à–∏–±–æ–∫] ${r.avg_error.toFixed(2)}%`),void 0!==r.qual&&(o+="[–ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è] "+(0===r.qual?"–ù–µ—Ç":"–î–∞")),r.haul&&r.haul.total&&(o+=`[–û–±—â–µ–µ –≤—Ä–µ–º—è] ${this.formatTime(r.haul.total)}`),r.haul)){const e=[];r.haul.hour&&e.push(`${r.haul.hour}—á`),r.haul.min&&e.push(`${r.haul.min}–º`),e.length&&(o+=`[–í—Ä–µ–º—è –≤ –∏–≥—Ä–µ] ${e.join(" ")}`)}return o.trim()}async getGameStats(e){const t=e.closest("li").querySelector("a");if(!t)return"[–û—à–∏–±–∫–∞] –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã";const a=this.getGameId(t);if(!a)return"[–û—à–∏–±–∫–∞] –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å ID –∏–≥—Ä—ã";const n=this.getUserId();if(!n)return`[Game ID] ${a} [–û—à–∏–±–∫–∞] –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è`;const r=this.parseGameParams(t),o=this.buildApiUrl(n,r);try{const e=await this.fetchGameStats(o);return this.formatStats(e,a,r)}catch(e){return console.error("Error getting game stats:",e),`[Game ID] ${a} [–û—à–∏–±–∫–∞] –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏`}}};function Te(e,t,a){const n=t.pin?` pin-gametype-${t.params.gametype}`:"",r=X("li",{className:`latest-game${t.pin?" pin-game":""}${n}`,id:`latest-game-${a}`});let o;const s=X("div",{className:"latest-game-buttons"});r.addEventListener("mouseenter",(()=>{o=setTimeout((()=>{s.style.visibility="visible"}),400)})),r.addEventListener("mouseleave",(()=>{clearTimeout(o),s.style.visibility="hidden"}));const i=X("div",{className:"latest-game-pin",innerHTML:t.pin?I.unpin:I.pin});_(i,t.pin?"[–ö–ª–∏–∫] –û—Ç–∫—Ä–µ–ø–∏—Ç—å —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º. [Shift + –ö–ª–∏–∫] –û—Ç–∫—Ä–µ–ø–∏—Ç—å –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.":"[–ö–ª–∏–∫] –ó–∞–∫—Ä–µ–ø–∏—Ç—å —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º. [Shift + –ö–ª–∏–∫] –ó–∞–∫—Ä–µ–ø–∏—Ç—å –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è."),i.addEventListener("click",(n=>{(n.shiftKey||confirm(t.pin?"–û—Ç–∫—Ä–µ–ø–∏—Ç—å –∏–≥—Ä—É?":"–ó–∞–∫—Ä–µ–ø–∏—Ç—å –∏–≥—Ä—É?"))&&e.gamesManager.pinGame(a)}));const l=X("div",{className:"latest-game-delete",innerHTML:I.delete});_(l,"[–ö–ª–∏–∫] –£–¥–∞–ª–∏—Ç—å (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º). [Shift + –ö–ª–∏–∫] –£–¥–∞–ª–∏—Ç—å –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è."),l.addEventListener("click",(t=>{(t.shiftKey||confirm("–£–¥–∞–ª–∏—Ç—å –∏–≥—Ä—É?"))&&e.gamesManager.deleteGame(a)}));const c=X("div",{className:"latest-game-info",innerHTML:I.info});_(c,"voc"===t.params.gametype&&t.params.vocId?"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–ª–æ–≤–∞—Ä–µ":"–ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–≥—Ä–µ"),c.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),function(e,t){const a="voc"===t.params.gametype&&t.params.vocId,n=t.params.gametype;let r=[{text:`${y} –î–µ–Ω—å`,className:"popup-button",onClick:()=>{const e=a?`https://klavogonki.ru/vocs/${t.params.vocId}/top/day/`:`https://klavogonki.ru/top/day/${n}/`;window.open(e,"_blank")}},{text:`${b} –ù–µ–¥–µ–ª—è`,className:"popup-button",onClick:()=>{const e=a?`https://klavogonki.ru/vocs/${t.params.vocId}/top/week/`:`https://klavogonki.ru/top/week/${n}/`;window.open(e,"_blank")}}];if(a){const e=`https://klavogonki.ru/vocs/${t.params.vocId}`;r.unshift({text:`${x} –û–±—â–∞—è`,className:"popup-button",onClick:()=>window.open(e+"/","_blank")}),r.push({text:`${w} –ò—Å—Ç–æ—Ä–∏—è`,className:"popup-button",onClick:()=>window.open(e+"/history/","_blank")},{text:`${k} –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏`,className:"popup-button",onClick:()=>window.open(e+"/comments/","_blank")})}ee(r,e,"game-popup","–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")}(e,t)})),s.append(c,i,l);const g=X("a",{href:e.gamesManager.generateGameLink(t),innerHTML:e.gamesManager.generateGameName(t)});g.addEventListener("click",(t=>{e.wasDragging&&(t.preventDefault(),e.wasDragging=!1)}));return g.addEventListener("mouseover",(async e=>{if(e.shiftKey){z(g,"[Loading] –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...","stats");try{const e=await Ge.getGameStats(g);z(g,e,"stats")}catch(e){console.error("Error loading game stats:",e),z(g,"[–û—à–∏–±–∫–∞] –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É","stats")}}else z(g,"\n    [Shift + –ö–ª–∏–∫] –ü–µ—Ä–µ–π—Ç–∏ –∫ –∏–≥—Ä–µ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏\n    [–£–¥–µ—Ä–∂–∏–≤–∞–Ω–∏–µ (–õ–ö–ú)] –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ (Shift + –ö–ª–∏–∫)\n    [Shift + –ù–∞–≤–µ–¥–µ–Ω–∏–µ] –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä—ã\n  ","info")})),r.appendChild(s),r.appendChild(g),t.pin&&e.enableDragging&&Ee(e,r),r}const De="latestGamesSearchQuery";function Ie(){try{localStorage.removeItem(De)}catch(e){console.warn("Failed to clear search query:",e)}}function Ne(e,t){const a=e.value;if(!a)return void(t.style.left="");const n=function(e,t){const a=document.createElement("canvas").getContext("2d");return a.font=t,a.measureText(e).width}(a,function(e){const t=window.getComputedStyle(e);return`${t.fontWeight} ${t.fontSize} ${t.fontFamily}`}(e)),r=n+20;t.style.left=`${r}px`;r+(t.offsetWidth||24)>e.offsetWidth-8&&t.classList.remove("visible")}function $e(e){const t=X("div",{className:"latest-games-search-container "+(e.showSearchBox?"":"latest-games-hidden")}),a=X("input",{type:"search",id:"latest-games-search-input"}),n=X("div",{id:"latest-games-clear-button",className:"latest-games-clear-btn",innerHTML:I.delete});t.style.position="relative";const r=function(){try{return localStorage.getItem(De)||""}catch(e){return console.warn("Failed to load search query:",e),""}}();return r&&(a.value=r,requestAnimationFrame((()=>{He(n,r),Ne(a,n),Be(e,r)}))),a.addEventListener("input",(t=>{const r=t.target.value.trim();Be(e,r),He(n,r),Ne(a,n),function(e){try{e&&e.trim()?localStorage.setItem(De,e.trim()):localStorage.removeItem(De)}catch(e){console.warn("Failed to save search query:",e)}}(r)})),n.addEventListener("click",(()=>{a.value="",a.focus(),Be(e,""),He(n,""),Ne(a,n),Ie()})),a.addEventListener("keydown",(e=>{"Backspace"!==e.key&&"Delete"!==e.key||1!==a.value.length||a.value.trim()||Ie()})),He(n,a.value),Ne(a,n),t.appendChild(a),t.appendChild(n),t}function He(e,t){e.classList.toggle("visible",!!t)}function Be(e,t){const a=document.getElementById("latest-games");if(!a)return;if(a.innerHTML="",!t)return void e.uiManager.populateGamesList(a);const n=[];if(e.groupsManager.groups.forEach((a=>{a.games.forEach((r=>{const o=function(e,t){const a=e.toLowerCase(),n=t.toLowerCase();if(!n)return 0;if(a===n)return-1e3;if(a.startsWith(n))return-500;if(a.includes(n))return-100;let r=0,o=0,s=0;for(;r<a.length&&o<n.length;)a[r]===n[o]?o++:s++,r++;return o===n.length?s:1/0}(e.gamesManager.generateGameName(r),t);o!==1/0&&n.push({group:a,game:r,score:o})}))})),0===n.length){const e=X("li",{className:"latest-games-search-noresults",textContent:"–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"});return void a.appendChild(e)}n.sort(((e,t)=>e.score-t.score));const r=n.slice(0,50),o=n.length-50;if(r.forEach((({group:t,game:n})=>{const r=e.uiManager.createGameElement(n,n.id);r.classList.add("latest-games-search-result"),r.addEventListener("click",(()=>{e.groupsManager.currentGroupId=t.id,e.uiManager.refreshContainer(),setTimeout((()=>{const e=document.getElementById(`latest-game-${n.id}`);e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100)})),a.appendChild(r)})),o>0){const e=X("li",{className:"latest-games-search-more",textContent:`–ï—â—ë ${o} —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–∫—Ä—ã—Ç–æ`});a.appendChild(e)}}function Ae(e){const t=X("div",{className:"latest-games-controls"}),a=X("div",{className:"controls-limiter"}),n=X("div",{className:"controls-buttons"});t.append(a,n);const r=X("span",{id:"latest-games-options"});a.appendChild(r);const o=X("span",{id:"latest-games-count-dec",className:"control-button",innerHTML:I.decrease});_(o,"–£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º—ã—Ö –∏–≥—Ä");const s=X("span",{id:"latest-games-count",className:!1===e.shouldAutoSave?"latest-games-disabled":"",textContent:e.maxGameCount.toString()});_(s,e.shouldAutoSave?"–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ":"–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ"),s.addEventListener("click",(()=>{e.shouldAutoSave=!e.shouldAutoSave,e.uiManager.updateGameCountDisplay(),e.settingsManager.saveSettings(),e.uiManager.refreshContainer()}));const i=X("span",{id:"latest-games-count-inc",className:"control-button",innerHTML:I.increase});_(i,"–£–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º—ã—Ö –∏–≥—Ä"),o.addEventListener("click",(()=>e.gamesManager.changeGameCount(-1))),i.addEventListener("click",(()=>e.gamesManager.changeGameCount(1))),r.append(o,s,i);const l=(e,t,a,n,r,o)=>{_(e,`\n      [–ö–ª–∏–∫] ${t?a:n}\n      [Shift + –ö–ª–∏–∫] ${o+(r?` (${r} –º—Å)`:"")}\n    `)},c=(t,a,n,r,o)=>{const{enabledText:s,disabledText:i,delayText:c,delayPromptText:g,delayErrorText:p}=o,d=a[n];t.classList.toggle("latest-games-disabled",!d),l(t,d,s,i,a[r],c),t.onclick=o=>{if(o.shiftKey){const o=prompt(g,"");if(null!==o){const g=parseInt(o,10);!isNaN(g)&&g>=0?(a[r]=g,e.settingsManager.saveSettings(),l(t,a[n],s,i,g,c)):alert(p)}}else a[n]=!a[n],e.settingsManager.saveSettings(),t.classList.toggle("latest-games-disabled",!a[n]),l(t,a[n],s,i,a[r],c)}},g=X("span",{className:"latest-games-play control-button",innerHTML:I.play});c(g,e,"shouldStart","startDelay",{enabledText:"–û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã",disabledText:"–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã",delayText:"–ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –∑–∞–ø—É—Å–∫–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö",delayPromptText:"–í–≤–µ–¥–∏—Ç–µ –∑–∞–¥–µ—Ä–∂–∫—É –∑–∞–ø—É—Å–∫–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö:",delayErrorText:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –∑–∞–ø—É—Å–∫–∞."});const p=X("span",{className:"latest-games-replay control-button",innerHTML:I.replay});c(p,e,"shouldReplay","replayDelay",{enabledText:"–û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–ø–æ–≤—Ç–æ—Ä –∏–≥—Ä—ã",disabledText:"–í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–ø–æ–≤—Ç–æ—Ä –∏–≥—Ä—ã",delayText:"–ò–∑–º–µ–Ω–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –∞–≤—Ç–æ–ø–æ–≤—Ç–æ—Ä–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö",delayPromptText:"–í–≤–µ–¥–∏—Ç–µ –∑–∞–¥–µ—Ä–∂–∫—É –∞–≤—Ç–æ–ø–æ–≤—Ç–æ—Ä–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö:",delayErrorText:"–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –∞–≤—Ç–æ–ø–æ–≤—Ç–æ—Ä–∞."});const d=X("span",{className:"latest-games-pinall control-button",innerHTML:I.pin});_(d,"\n    [–ö–ª–∏–∫] –ó–∞–∫—Ä–µ–ø–∏—Ç—å –≤—Å–µ –∏–≥—Ä—ã –≤ —Ç–µ–∫—É—â–µ–π –≥—Ä—É–ø–ø–µ\n    [Shift + –ö–ª–∏–∫] –ó–∞–∫—Ä–µ–ø–∏—Ç—å –≤—Å–µ –∏–≥—Ä—ã –≤–æ –≤—Å–µ—Ö –≥—Ä—É–ø–ø–∞—Ö\n  "),d.onclick=t=>{if(t.shiftKey)e.groupsManager.groups.forEach((e=>e.games.forEach((e=>e.pin=1))));else{const t=e.groupsManager.getCurrentGroup(e.groupsManager.groups,e.groupsManager.currentGroupId);t&&t.games.forEach((e=>e.pin=1))}e.gamesManager.saveGameData(),e.uiManager.refreshContainer()};const m=X("span",{className:"latest-games-unpinall control-button",innerHTML:I.unpin});_(m,"\n    [–ö–ª–∏–∫] –û—Ç–∫—Ä–µ–ø–∏—Ç—å –≤—Å–µ –∏–≥—Ä—ã –≤ —Ç–µ–∫—É—â–µ–π –≥—Ä—É–ø–ø–µ\n    [Shift + –ö–ª–∏–∫] –û—Ç–∫—Ä–µ–ø–∏—Ç—å –≤—Å–µ –∏–≥—Ä—ã –≤–æ –≤—Å–µ—Ö –≥—Ä—É–ø–ø–∞—Ö\n  "),m.onclick=t=>{if(t.shiftKey)e.groupsManager.groups.forEach((e=>e.games.forEach((e=>e.pin=0))));else{const t=e.groupsManager.getCurrentGroup(e.groupsManager.groups,e.groupsManager.currentGroupId);t&&t.games.forEach((e=>e.pin=0))}e.gamesManager.saveGameData(),e.uiManager.refreshContainer()};const u=X("span",{className:"latest-games-sort control-button",innerHTML:I.sort});_(u,"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—ã –≤ —Ç–µ–∫—É—â–µ–π –≥—Ä—É–ø–ø–µ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É"),u.addEventListener("click",(()=>e.groupsManager.sortActiveGroupGames()));const h=X("span",{className:"latest-games-import control-button",innerHTML:I.import});_(h,"–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ JSON —Ñ–∞–π–ª–∞"),h.onclick=()=>e.settingsManager.importSettings(e);const v=X("span",{className:"latest-games-export control-button",innerHTML:I.export});_(v,"–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ JSON —Ñ–∞–π–ª"),v.onclick=()=>e.settingsManager.exportSettings(e);const f=X("span",{className:"latest-games-removeall control-button",innerHTML:I.trashNothing});_(f,"–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"),f.onclick=()=>e.settingsManager.removeAllSettings(e);const y=X("span",{className:"latest-games-remove-unpinned control-button",innerHTML:I.broom});_(y,"\n    [–ö–ª–∏–∫] –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–µ–∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ –∏–≥—Ä—ã –≤ —Ç–µ–∫—É—â–µ–π –≥—Ä—É–ø–ø–µ\n    [Shift + –ö–ª–∏–∫] –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–µ–∑–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ –∏–≥—Ä—ã –≤–æ –≤—Å–µ—Ö –≥—Ä—É–ø–ø–∞—Ö\n  "),y.onclick=t=>{if(t.shiftKey)e.groupsManager.groups.forEach((e=>{e.games=e.games.filter((e=>e.pin))}));else{const t=e.groupsManager.getCurrentGroup(e.groupsManager.groups,e.groupsManager.currentGroupId);t&&(t.games=t.games.filter((e=>e.pin)))}e.gamesManager.saveGameData(),e.uiManager.refreshContainer()};const b=X("span",{className:"latest-games-drag-toggle control-button",innerHTML:I.dragToggle});_(b,e.enableDragging?"–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ":"–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ"),b.classList.toggle("latest-games-disabled",!e.enableDragging),b.onclick=()=>{e.enableDragging=!e.enableDragging,e.settingsManager.saveSettings(),e.uiManager.refreshContainer(),_(b,e.enableDragging?"–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ":"–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ"),b.classList.toggle("latest-games-disabled",!e.enableDragging)};const x=X("span",{className:"latest-games-desc-toggle control-button",innerHTML:I.info});_(x,e.showButtonDescriptions?"–°–∫—Ä—ã—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫":"–ü–æ–∫–∞–∑–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫"),x.classList.toggle("latest-games-disabled",!e.showButtonDescriptions),x.onclick=()=>{e.showButtonDescriptions=!e.showButtonDescriptions,e.settingsManager.saveSettings(),x.classList.toggle("latest-games-disabled",!e.showButtonDescriptions),_(x,e.showButtonDescriptions?"–°–∫—Ä—ã—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫":"–ü–æ–∫–∞–∑–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫"),e.uiManager.refreshContainer(),setTimeout((()=>{const e=document.querySelector(".latest-games-controls");e&&(e.scrollTop=e.scrollHeight)}),0)};const w=X("span",{className:"latest-games-help-toggle control-button"+(e.showHelpTooltips?"":" latest-games-disabled"),innerHTML:I.help}),k=()=>{_(w,e.showHelpTooltips?"–°–∫—Ä—ã—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏":"–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏","help"),w.classList.toggle("latest-games-disabled",!e.showHelpTooltips)};k(),w.addEventListener("click",(()=>{P=null,e.showHelpTooltips=!e.showHelpTooltips,e.settingsManager.saveSettings(),k(),e.uiManager.refreshContainer()}));const M=X("span",{className:"latest-games-search-btn control-button"+(e.showSearchBox?"":" latest-games-disabled"),innerHTML:I.search}),S=()=>{_(M,e.showSearchBox?"–°–∫—Ä—ã—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ–∏—Å–∫–∞":"–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ–∏—Å–∫–∞"),M.classList.toggle("latest-games-disabled",!e.showSearchBox)};return S(),M.addEventListener("click",(()=>{!function(e){const t=document.querySelector(".latest-games-search-container");if(!t)return;const a=t.classList.toggle("latest-games-hidden");if(e.showSearchBox=!a,e.settingsManager&&"function"==typeof e.settingsManager.saveSettings&&e.settingsManager.saveSettings(),!a){const e=document.getElementById("latest-games-search-input");e&&(e.focus(),e.select())}}(e),S()})),n.append(e.themeManager.createThemeToggle(),e.viewManager.createDisplayModeToggle(),g,p,d,m,u,h,v,f,y,b,x,w,M),t}function qe(e){const t=X("div",{id:"latest-games-hover-area"});t.addEventListener("mouseenter",(()=>Pe(e))),t.addEventListener("mouseleave",(()=>je(e))),document.body.appendChild(t)}function Pe(e){e.isHovered=!0,e.hoverTimeout&&clearTimeout(e.hoverTimeout),e.hoverTimeout=null;const t=document.getElementById("latest-games-container");t&&(t.classList.add("visible"),t.style.left="0","wrap"===e.viewManager.getDisplayMode()&&(t.style.top=`${e.panelYPosition}vh`),t.scrollTop=e.previousScrollPosition)}function je(e){e.alwaysVisiblePanel||(e.isHovered=!1,e.hoverTimeout&&clearTimeout(e.hoverTimeout),e.hoverTimeout=setTimeout((()=>{if(!e.isHovered){const t=document.getElementById("latest-games-container");t&&(t.classList.remove("visible"),e.viewManager.updateContainerLeftOffset())}}),e.hidePanelDelay))}function Oe(e){if(document.getElementById("latest-games-panel-toggle"))return;const t=X("button",{id:"latest-games-panel-toggle",className:"latest-games-panel-toggle",type:"button",innerHTML:e.alwaysVisiblePanel?I.panelToggleOpened:I.panelToggleClosed});_(t,"\n    [–ö–ª–∏–∫] (–ü–æ–∫–∞–∑–∞—Ç—å/–°–∫—Ä—ã—Ç—å) –ø–∞–Ω–µ–ª—å\n    [Shift + –ö–ª–∏–∫] (–ó–∞–∫—Ä–µ–ø–∏—Ç—å/–û—Ç–∫—Ä–µ–ø–∏—Ç—å) –ø–∞–Ω–µ–ª—å"),e.alwaysVisiblePanel&&t.classList.add("always-visible"),t.addEventListener("click",(a=>{const n=document.getElementById("latest-games-container");if(n)if(a.shiftKey)e.alwaysVisiblePanel=!e.alwaysVisiblePanel,t.classList.toggle("always-visible",e.alwaysVisiblePanel),t.innerHTML=e.alwaysVisiblePanel?I.panelToggleOpened:I.panelToggleClosed,n.classList.toggle("visible",e.alwaysVisiblePanel),e.alwaysVisiblePanel||e.viewManager.updateContainerLeftOffset(),e.settingsManager.saveSettings();else{n.classList.contains("visible")?(e.hoverTimeout&&(clearTimeout(e.hoverTimeout),e.hoverTimeout=null),n.classList.remove("visible"),e.viewManager.updateContainerLeftOffset()):e.uiManager.showContainer()}})),document.body.appendChild(t)}class Re{constructor(e){this.main=e,this.createGameElement=Te.bind(null,this.main),this.createControls=Ae.bind(null,this.main),this.createSearchBox=$e.bind(null,this.main),this.createHoverArea=qe.bind(null,this.main),this.showContainer=Pe.bind(null,this.main),this.hideContainer=je.bind(null,this.main),this.createPanelToggleButton=Oe.bind(null,this.main)}createContainer(){const e=X("div",{id:"latest-games-container"}),t=this.createSearchBox();e.appendChild(t);const a=this.main.groupsManager.createGroupsContainer();e.appendChild(a);const n=X("ul",{id:"latest-games"});this.populateGamesList(n),e.appendChild(n);const r=this.createControls();e.appendChild(r),e.addEventListener("scroll",(()=>{this.main.previousScrollPosition=e.scrollTop,this.main.settingsManager.saveSettings()})),e.addEventListener("mouseenter",(()=>this.showContainer())),e.addEventListener("mouseleave",(()=>this.hideContainer()));let o=null,s=!1;const i=e=>{const t=e.target.closest(".latest-game");if(!t)return;const a=t.id.replace("latest-game-",""),n=this.main.gamesManager.findGameById(a);n&&!this.main.enableDragging&&ke(n,e,this.main.gamesManager)};n.addEventListener("mousedown",(e=>{0===e.button&&(e.shiftKey&&e.target.closest(".latest-game-buttons")?s=!1:e.shiftKey?(s=!0,e.preventDefault(),i(e)):o=setTimeout((()=>{s=!0,e.preventDefault(),i(e)}),300))})),n.addEventListener("mouseup",(()=>{clearTimeout(o)})),n.addEventListener("click",(e=>{s&&(e.stopImmediatePropagation(),e.preventDefault(),s=!1)}),{capture:!0}),n.addEventListener("contextmenu",(e=>{const t=e.target.closest(".latest-game");if(t){e.preventDefault();const a=t.id.replace("latest-game-","");!function(e,t,a,n,r){V();const o=t.filter((e=>e.id!==a)).map((t=>({text:t.title,className:"group-tab",dataset:{groupId:t.id},onClick:()=>{!function(e,t,a){const n=e.groupsManager.groups.find((t=>t.id===e.groupsManager.currentGroupId)),r=e.groupsManager.groups.find((e=>e.id===a));if(!n||!r)return;const o=n.games.findIndex((e=>e.id===t));if(-1===o)return;const[s]=n.games.splice(o,1);r.games.push(s),e.gamesManager.saveGameData(),e.uiManager.refreshContainer()}(e,r,t.id)}})));ee(o,n,"game-migration-popup","–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å")}(this.main,this.main.groupsManager.groups,this.main.groupsManager.currentGroupId,e,a)}}));let l=e.querySelector(".resize-handle");l||(l=X("div",{className:"resize-handle"}),e.appendChild(l)),Me(this,e,l),Se(this,e),document.body.appendChild(e),this.main.groupsManager.updateGroupControlStates(),this.main.viewManager.updateDisplayModeClass();e.querySelectorAll(".group-tab").forEach((e=>{e.getBoundingClientRect().width>=300&&_(e,e.textContent)}));const c=this.main.viewManager.updateDisplayModeClass.bind(this.main.viewManager);this.main.viewManager.updateDisplayModeClass=(...t)=>{c(...t),Me(this,e,l),Se(this,e)},this.updateRemoveIcons(),e.scrollTop=this.main.previousScrollPosition}updateGameCountDisplay(){const e=document.getElementById("latest-games-count");e&&(e.textContent=this.main.maxGameCount.toString(),e.classList.toggle("latest-games-disabled",!1===this.main.shouldAutoSave),_(e,this.main.shouldAutoSave?"–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ":"–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ"))}populateGamesList(e){if(e.innerHTML="","tabs"===this.main.groupsManager.getGroupViewMode()){const t=this.main.groupsManager.getCurrentGroup();if(!t)return;const a=this.main.groupsManager.getPinnedGameCount(),n=Math.min(t.games.length,this.main.maxGameCount+a);for(let a=0;a<n;a++){const n=t.games[a],r=this.createGameElement(n,n.id);e.appendChild(r)}}else this.main.groupsManager.groups.forEach((t=>{if(t.games.length>0){const a=this.main.groupsManager.createGroupHeader(t);e.appendChild(a);const n=t.games.filter((e=>e.pin)).length,r=Math.min(t.games.length,this.main.maxGameCount+n);for(let a=0;a<r;a++){const n=t.games[a],r=this.createGameElement(n,n.id);e.appendChild(r)}}}))}updateRemoveIcons(){const e=this.main.groupsManager.getCurrentGroup(this.main.groupsManager.groups,this.main.groupsManager.currentGroupId),t=document.querySelector(".group-controls .remove-group.control-button");t&&(t.innerHTML=e&&e.games&&e.games.length>0?I.trashSomething:I.trashNothing);const a=document.querySelector(".latest-games-removeall.control-button"),n=this.main.groupsManager.groups.some((e=>e.games&&e.games.length>0));a&&(a.innerHTML=n?I.trashSomething:I.trashNothing)}refreshContainer(){this.main.groupsManager.refreshGroupsContainer();const e=document.getElementById("latest-games");e&&(this.populateGamesList(e),this.main.viewManager.updateDisplayModeClass()),this.updateRemoveIcons(),this.updateGameCountDisplay()}}class Ve{constructor(e){this.mainManager=e}parseGameParams(e,t){const a=e.className.split("-").pop(),n="voc"===a?e.textContent.replace(/[¬´¬ª]/g,""):"";let r="";if("voc"===a){const t=e.querySelector("a");if(t){const e=t.href.match(/vocs\/(\d+)/);r=e?parseInt(e[1],10):""}}let o="normal";/–æ–¥–∏–Ω–æ—á–Ω—ã–π/.test(t)?o="practice":/–¥—Ä—É–∑—å—è–º–∏/.test(t)&&(o="private");let s=1,i=9;const l=t.match(/–¥–ª—è (\S+)‚Äì(\S+),/);l&&(s=E[l[1]]||1,i=E[l[2]]||9);const c=t.match(/—Ç–∞–π–º–∞—É—Ç\s(\d+)\s(—Å–µ–∫|–º–∏–Ω)/);return{gametype:a,vocName:n,vocId:r,type:o,level_from:s,level_to:i,timeout:c?"—Å–µ–∫"===c[2]?parseInt(c[1],10):60*parseInt(c[1],10):60,qual:/–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è/.test(t)?1:0,premium_abra:0}}generateGameName(e){const t=M[e.params.gametype],{vocName:a,timeout:n,type:r,level_from:o,level_to:s,qual:i}=e.params,l=X("span",{className:`latest-game-name gametype-${e.params.gametype}`,textContent:""===a?t:`¬´${a}¬ª`});let c=null;this.mainManager.showButtonDescriptions&&(c=X("span",{className:"latest-game-description"}));const g=X("span",{className:"latest-game-qual",innerHTML:i?I.qualification:""});let p="";if(1!==o||9!==s){p=` ${L[o-1]} - ${L[s-1]}`}const d=X("span",{className:"latest-game-levels",textContent:p});c&&(c.textContent=`${C[r]}, ${n} —Å–µ–∫—É–Ω–¥`,c.appendChild(g),p&&c.appendChild(d));const m=X("div");return m.appendChild(l),c&&m.appendChild(c),m.innerHTML}generateGameLink(e){const{gametype:t,vocId:a,type:n,level_from:r,level_to:o,timeout:s,qual:i}=e.params,l=new URLSearchParams({gametype:t,type:n,timeout:s.toString(),submit:"1"});return"practice"!==n&&"private"!==n&&(l.set("level_from",r.toString()),l.set("level_to",o.toString())),""!==a&&l.set("voc",a),i&&l.set("qual","1"),`${location.protocol}//klavogonki.ru/create/?${l.toString()}`}loadGameData(){try{let e=localStorage.getItem("latestGamesData");if(e)if(e=JSON.parse(e),Array.isArray(e)){const t=[{id:W(),title:"–ì—Ä—É–ø–ø–∞-1",games:e}],a=t[0].id;this.mainManager.groupsManager.setGroups(t,a)}else e&&Array.isArray(e.groups)?this.mainManager.groupsManager.setGroups(e.groups,e.currentGroupId):this.mainManager.groupsManager.setGroups([],null);else this.mainManager.groupsManager.setGroups([],null);this.migrateOldGameData(),this.assignGameIds()}catch(e){console.warn("Could not load game data from localStorage:",e),this.mainManager.groupsManager.setGroups([],null)}}saveGameData(){try{const e={groups:this.mainManager.groupsManager.groups,currentGroupId:this.mainManager.groupsManager.currentGroupId};localStorage.setItem("latestGamesData",JSON.stringify(e))}catch(e){console.warn("Could not save game data to localStorage:",e)}}migrateOldGameData(){this.mainManager.groupsManager.groups.forEach((e=>{e.games=e.games.map((e=>("on"!==e.params.qual&&""!==e.params.qual||(e.params.qual="on"===e.params.qual?1:0),e)))}))}assignGameIds(){const e=new Set(this.mainManager.groupsManager.groups.flatMap((e=>e.games.map((e=>e.id)))));this.mainManager.groupsManager.groups.forEach((t=>{t.games=t.games.map((t=>{if(!t.id||-1===t.id||e.has(t.id)){let a;do{a=W()}while(e.has(a));return e.add(a),{...t,id:a}}return e.add(t.id),t}))}))}updateGameOrderFromDOM(){const e=this.mainManager.groupsManager.getCurrentGroup(this.mainManager.groupsManager.groups,this.mainManager.groupsManager.currentGroupId);if(!e)return;const t=Array.from(document.querySelectorAll("#latest-games .latest-game"));e.games=t.map((t=>{const a=t.id.replace("latest-game-","");return e.games.find((e=>e.id===a))})).filter((e=>void 0!==e)),this.saveGameData()}findGameIndex(e){for(const t of this.mainManager.groupsManager.groups){const a=t.games.findIndex((t=>t.id==e));if(-1!==a)return{group:t,index:a}}return null}findGameById(e){for(const t of this.mainManager.groupsManager.groups){const a=t.games.find((t=>t.id===e));if(a)return a}return null}deleteGame(e){const t=this.findGameIndex(e);if(!t)return null;const{group:a,index:n}=t,r=a.games.splice(n,1)[0];return this.assignGameIds(),this.saveGameData(),this.mainManager.uiManager.refreshContainer(),r}pinGame(e){const t=this.findGameIndex(e);if(!t)return;const{group:a,index:n}=t,r=a.games[n];r.pin=r.pin?0:1,a.games.sort(((e,t)=>t.pin-e.pin)),this.assignGameIds(),this.saveGameData(),this.mainManager.uiManager.refreshContainer()}changeGameCount(e){e<0&&this.mainManager.maxGameCount>0?this.mainManager.maxGameCount--:e>0&&this.mainManager.maxGameCount++,this.mainManager.uiManager.updateGameCountDisplay(),this.mainManager.settingsManager.saveSettings(),this.mainManager.uiManager.refreshContainer()}}Object.values(f).forEach((e=>{if(!document.getElementById(e.id)){const t=document.createElement("link");t.id=e.id,t.rel="stylesheet",t.href=e.url,document.head.appendChild(t)}})),window.latestGamesManager??=new class{constructor(){this.initializeDefaults(),this.initializeManagers(),this.init()}initializeDefaults(){Object.assign(this,T)}initializeManagers(){this.themeManager=new U(this),this.settingsManager=new J(this),this.groupsManager=new K(this),this.viewManager=new Q(this),this.pageHandler=new ge(this),this.uiManager=new Re(this),this.gamesManager=new Ve(this)}init(){this.settingsManager.loadSettings(),this.gamesManager.loadGameData(),this.groupsManager.initializeGroups(),this.uiManager.createHoverArea(),this.uiManager.createContainer(),this.alwaysVisiblePanel&&this.uiManager.showContainer(),this.uiManager.createPanelToggleButton(),this.pageHandler.handlePageSpecificLogic(),this.exposeGlobalFunctions(),this.themeManager.applyTheme()}exposeGlobalFunctions(){window.latestGamesManager=this}}})();