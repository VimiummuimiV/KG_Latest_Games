// ==UserScript==
// @name          KG_Latest_Games
// @namespace     klavogonki
// @version      1.0.9
// @description   Fast game creation buttons on all the pages
// @match         *://klavogonki.ru/*
// @author        Patcher
// @icon          https://www.google.com/s2/favicons?sz=64&domain=klavogonki.ru
// ==/UserScript==

/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss":
/*!******************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss ***!
  \******************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"./node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `#latest-games-container {\n  display: flex;\n  flex-direction: column;\n  font-family: \"Montserrat\", sans-serif;\n  position: fixed;\n  top: 50px;\n  width: auto;\n  min-width: 200px;\n  max-width: 350px;\n  max-height: calc(100vh - 100px);\n  background-color: var(--rg-bg-primary);\n  border: 1px solid var(--rg-border-primary);\n  border-left: none;\n  border-radius: 0 8px 8px 0 !important;\n  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);\n  z-index: 3000;\n  padding: 10px 0;\n  opacity: 0;\n  pointer-events: none;\n  user-select: none;\n  transition: left 0.3s ease, opacity 0.3s ease;\n  overflow-y: auto;\n  overflow-x: hidden;\n  scrollbar-width: none;\n  color: var(--rg-text-primary);\n}\n#latest-games-container.light-theme {\n  --rg-bg-primary: hsl(0, 0%, 100%);\n  --rg-bg-secondary: hsl(0, 0%, 98%);\n  --rg-bg-card: hsl(0, 0%, 98%);\n  --rg-bg-card-pinned: hsl(120, 50%, 96%);\n  --rg-bg-hover: hsl(0, 0%, 96%);\n  --rg-border-primary: hsl(0, 0%, 88%);\n  --rg-border-hover: hsl(0, 0%, 74%);\n  --rg-border-pinned: hsl(122, 39%, 49%);\n  --rg-text-primary: hsl(0, 0%, 15%);\n  --rg-text-secondary: hsl(0, 0%, 40%);\n  --rg-text-tertiary: hsl(0, 0%, 55%);\n  --rg-text-options: hsl(0, 0%, 30%);\n  --rg-text-count: hsl(0, 0%, 15%);\n  --rg-gametype-voc: hsl(215, 75%, 50%);\n  --rg-gametype-normal: hsl(130, 50%, 30%);\n  --rg-gametype-abra: hsl(215, 20%, 40%);\n  --rg-gametype-referats: hsl(80, 55%, 30%);\n  --rg-gametype-noerror: hsl(200, 45%, 35%);\n  --rg-gametype-marathon: hsl(340, 65%, 45%);\n  --rg-gametype-chars: hsl(35, 100%, 30%);\n  --rg-gametype-digits: hsl(0, 0%, 50%);\n  --rg-gametype-sprint: hsl(5, 40%, 40%);\n  --rg-icon-primary: currentColor;\n  --rg-icon-pin: hsl(122, 39%, 49%);\n  --rg-icon-pin-fill: hsl(122, 39%, 49%);\n  --rg-icon-delete: hsl(4, 90%, 58%);\n  --rg-icon-theme-sun: hsl(48, 100%, 41%);\n  --rg-icon-theme-moon: hsl(207, 89%, 76%);\n  --rg-hover-pin: hsla(122, 39%, 49%, 0.2);\n  --rg-hover-delete: hsla(4, 90%, 58%, 0.2);\n  --rg-hover-control: hsl(0, 0%, 92%);\n  --rg-hover-control-btn: hsl(213, 77%, 96%);\n  --rg-bg-card-pinned-voc: hsl(215, 80%, 95%);\n  --rg-border-pinned-voc: hsl(215, 80%, 80%);\n  --rg-bg-card-pinned-normal: hsl(130, 50%, 90%);\n  --rg-border-pinned-normal: hsl(130, 50%, 70%);\n  --rg-bg-card-pinned-abra: hsl(215, 20%, 90%);\n  --rg-border-pinned-abra: hsl(215, 20%, 70%);\n  --rg-bg-card-pinned-referats: hsl(80, 55%, 90%);\n  --rg-border-pinned-referats: hsl(80, 55%, 70%);\n  --rg-bg-card-pinned-noerror: hsl(200, 45%, 90%);\n  --rg-border-pinned-noerror: hsl(200, 45%, 70%);\n  --rg-bg-card-pinned-marathon: hsl(340, 65%, 90%);\n  --rg-border-pinned-marathon: hsl(340, 65%, 70%);\n  --rg-bg-card-pinned-chars: hsl(35, 100%, 90%);\n  --rg-border-pinned-chars: hsl(35, 100%, 70%);\n  --rg-bg-card-pinned-digits: hsl(0, 0%, 90%);\n  --rg-border-pinned-digits: hsl(0, 0%, 70%);\n  --rg-bg-card-pinned-sprint: hsl(5, 40%, 90%);\n  --rg-border-pinned-sprint: hsl(5, 40%, 70%);\n}\n#latest-games-container.dark-theme {\n  --rg-bg-primary: hsl(210, 10%, 11%);\n  --rg-bg-secondary: hsl(220, 10%, 15%);\n  --rg-bg-card: hsl(220, 10%, 15%);\n  --rg-bg-card-pinned: hsl(140, 20%, 15%);\n  --rg-bg-hover: hsl(220, 10%, 15%);\n  --rg-border-primary: hsl(220, 10%, 15%);\n  --rg-border-hover: hsl(0, 0%, 38%);\n  --rg-border-pinned: hsl(133, 43%, 47%);\n  --rg-text-primary: hsl(0, 0%, 88%);\n  --rg-text-secondary: hsl(0, 0%, 88%);\n  --rg-text-tertiary: hsl(0, 0%, 88%);\n  --rg-text-options: hsl(0, 0%, 88%);\n  --rg-text-count: hsl(48, 100%, 50%);\n  --rg-gametype-voc: hsl(215, 80%, 65%);\n  --rg-gametype-normal: hsl(130, 50%, 60%);\n  --rg-gametype-abra: hsl(215, 20%, 60%);\n  --rg-gametype-referats: hsl(80, 55%, 40%);\n  --rg-gametype-noerror: hsl(200, 45%, 65%);\n  --rg-gametype-marathon: hsl(340, 70%, 55%);\n  --rg-gametype-chars: hsl(35, 100%, 45%);\n  --rg-gametype-digits: hsl(0, 0%, 50%);\n  --rg-gametype-sprint: hsl(5, 40%, 60%);\n  --rg-icon-primary: hsl(207, 89%, 76%);\n  --rg-icon-pin: hsl(133, 43%, 47%);\n  --rg-icon-pin-fill: hsl(133, 43%, 47%);\n  --rg-icon-delete: hsl(4, 100%, 75%);\n  --rg-icon-theme-sun: hsl(48, 100%, 50%);\n  --rg-icon-theme-moon: hsl(207, 89%, 76%);\n  --rg-hover-pin: hsla(133, 43%, 47%, 0.2);\n  --rg-hover-delete: hsla(4, 100%, 75%, 0.2);\n  --rg-hover-control: hsl(0, 0%, 38%);\n  --rg-hover-control-btn: hsl(213, 81.6%, 29.8%);\n  --rg-bg-card-pinned-voc: hsl(215, 80%, 10%);\n  --rg-border-pinned-voc: hsl(215, 80%, 30%);\n  --rg-bg-card-pinned-normal: hsl(130, 50%, 10%);\n  --rg-border-pinned-normal: hsl(130, 50%, 30%);\n  --rg-bg-card-pinned-abra: hsl(215, 20%, 10%);\n  --rg-border-pinned-abra: hsl(215, 20%, 30%);\n  --rg-bg-card-pinned-referats: hsl(80, 55%, 10%);\n  --rg-border-pinned-referats: hsl(80, 55%, 30%);\n  --rg-bg-card-pinned-noerror: hsl(200, 45%, 10%);\n  --rg-border-pinned-noerror: hsl(200, 45%, 30%);\n  --rg-bg-card-pinned-marathon: hsl(340, 65%, 10%);\n  --rg-border-pinned-marathon: hsl(340, 65%, 30%);\n  --rg-bg-card-pinned-chars: hsl(40, 100%, 10%);\n  --rg-border-pinned-chars: hsl(40, 100%, 30%);\n  --rg-bg-card-pinned-digits: hsl(0, 0%, 10%);\n  --rg-border-pinned-digits: hsl(0, 0%, 30%);\n  --rg-bg-card-pinned-sprint: hsl(5, 40%, 10%);\n  --rg-border-pinned-sprint: hsl(5, 40%, 30%);\n}\n#latest-games-container.visible {\n  left: 0 !important;\n  opacity: 1;\n  pointer-events: auto;\n  user-select: auto;\n}\n#latest-games-container.display-mode-wrap {\n  max-width: none;\n  width: 95vw;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  position: fixed;\n}\n#latest-games-container.display-mode-wrap .resize-handle {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 10px;\n  height: 100%;\n  cursor: ew-resize;\n  background-color: transparent;\n  z-index: 100;\n}\n#latest-games-container #latest-games {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n#latest-games-container #latest-games.display-mode-wrap {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  width: 100%;\n  max-height: none;\n  overflow-y: visible;\n  margin: 0 10px;\n}\n#latest-games-container #latest-games.display-mode-wrap .latest-game {\n  margin: 0 !important;\n}\n#latest-games-container #latest-games .latest-game {\n  position: relative;\n  margin: 0 10px;\n  border: 1px solid var(--rg-border-primary);\n  border-radius: 4px !important;\n  background-color: var(--rg-bg-card);\n  transition: all 0.2s ease;\n  display: inline-flex;\n  flex: fit-content;\n  max-width: 300px;\n}\n#latest-games-container #latest-games .latest-game.pin-game {\n  cursor: move;\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-voc {\n  border: 2px solid var(--rg-border-pinned-voc);\n  background-color: var(--rg-bg-card-pinned-voc);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-normal {\n  border: 2px solid var(--rg-border-pinned-normal);\n  background-color: var(--rg-bg-card-pinned-normal);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-abra {\n  border: 2px solid var(--rg-border-pinned-abra);\n  background-color: var(--rg-bg-card-pinned-abra);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-referats {\n  border: 2px solid var(--rg-border-pinned-referats);\n  background-color: var(--rg-bg-card-pinned-referats);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-noerror {\n  border: 2px solid var(--rg-border-pinned-noerror);\n  background-color: var(--rg-bg-card-pinned-noerror);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-marathon {\n  border: 2px solid var(--rg-border-pinned-marathon);\n  background-color: var(--rg-bg-card-pinned-marathon);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-chars {\n  border: 2px solid var(--rg-border-pinned-chars);\n  background-color: var(--rg-bg-card-pinned-chars);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-digits {\n  border: 2px solid var(--rg-border-pinned-digits);\n  background-color: var(--rg-bg-card-pinned-digits);\n}\n#latest-games-container #latest-games .latest-game.pin-game.pin-gametype-sprint {\n  border: 2px solid var(--rg-border-pinned-sprint);\n  background-color: var(--rg-bg-card-pinned-sprint);\n}\n#latest-games-container #latest-games .latest-game:hover {\n  border-color: var(--rg-border-hover);\n  background-color: var(--rg-bg-hover);\n  transform: translateX(2px);\n}\n#latest-games-container #latest-games .latest-game.dragging {\n  opacity: 0.7;\n  z-index: 2000;\n  transition: transform 0.1s ease;\n}\n#latest-games-container #latest-games .latest-game.display-mode-wrap {\n  margin: 0;\n}\n#latest-games-container #latest-games .latest-game a {\n  display: block;\n  width: 100%;\n  padding: 8px 12px;\n  text-decoration: none;\n  color: inherit;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name {\n  display: block;\n  font-weight: bold;\n  font-size: 12px;\n  margin-bottom: 2px;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-voc {\n  color: var(--rg-gametype-voc) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-normal {\n  color: var(--rg-gametype-normal) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-abra {\n  color: var(--rg-gametype-abra) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-referats {\n  color: var(--rg-gametype-referats) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-noerror {\n  color: var(--rg-gametype-noerror) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-marathon {\n  color: var(--rg-gametype-marathon) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-chars {\n  color: var(--rg-gametype-chars) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-digits {\n  color: var(--rg-gametype-digits) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-name.gametype-sprint {\n  color: var(--rg-gametype-sprint) !important;\n}\n#latest-games-container #latest-games .latest-game .latest-game-description {\n  display: block;\n  font-size: 10px;\n  color: var(--rg-text-secondary);\n  line-height: 1.2;\n}\n#latest-games-container #latest-games .latest-game .latest-game-qual {\n  color: #f00;\n  font-weight: bold;\n}\n#latest-games-container #latest-games .latest-game .latest-game-levels {\n  display: block;\n  font-size: 9px;\n  color: var(--rg-text-tertiary);\n  margin-top: 1px;\n}\n#latest-games-container #latest-games .latest-game .latest-game-buttons {\n  position: relative;\n  justify-content: center;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  margin-right: 5px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n  order: 1;\n}\n#latest-games-container #latest-games .latest-game:hover .latest-game-buttons {\n  opacity: 1;\n}\n#latest-games-container #latest-games .latest-game .latest-game-pin,\n#latest-games-container #latest-games .latest-game .latest-game-delete {\n  width: 16px;\n  height: 16px;\n  cursor: pointer;\n  border-radius: 2px !important;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background-color 0.2s ease;\n}\n#latest-games-container #latest-games .latest-game .latest-game-pin:hover,\n#latest-games-container #latest-games .latest-game .latest-game-delete:hover {\n  background-color: var(--rg-hover-pin);\n}\n#latest-games-container #latest-games .latest-game .latest-game-pin svg,\n#latest-games-container #latest-games .latest-game .latest-game-delete svg {\n  width: 10px;\n  height: 10px;\n  opacity: 0.6;\n  stroke: var(--rg-icon-pin-fill);\n}\n#latest-games-container #latest-games .latest-game .latest-game-pin:hover svg,\n#latest-games-container #latest-games .latest-game .latest-game-delete:hover svg {\n  opacity: 1;\n}\n#latest-games-container #latest-games .latest-game .latest-game-delete:hover {\n  background-color: var(--rg-hover-delete);\n}\n#latest-games-container #latest-games .latest-game .latest-game-delete svg {\n  stroke: var(--rg-icon-delete);\n  fill: none;\n}\n#latest-games-container .latest-games-controls {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 10px;\n  margin-top: 10px;\n}\n#latest-games-container #latest-games-options {\n  display: flex;\n  align-items: center;\n  font-size: 13px;\n  gap: 6px;\n  color: var(--rg-text-options);\n  user-select: none;\n}\n#latest-games-container #latest-games-count {\n  margin: 0 6px;\n  font-weight: bold;\n  font-size: 14px;\n  min-width: 18px;\n  text-align: center;\n  color: var(--rg-text-count);\n}\n#latest-games-container #latest-games-count-inc,\n#latest-games-container #latest-games-count-dec {\n  height: 24px;\n  width: 24px;\n  cursor: pointer;\n  font-size: 16px;\n  border-radius: 3px !important;\n  transition: background 0.15s;\n  user-select: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--rg-icon-primary);\n}\n#latest-games-container #latest-games-count-inc:hover,\n#latest-games-container #latest-games-count-dec:hover {\n  background: var(--rg-hover-control-btn);\n}\n#latest-games-container #latest-games-count-inc svg,\n#latest-games-container #latest-games-count-dec svg {\n  width: 16px;\n  height: 16px;\n}\n#latest-games-container .theme-toggle,\n#latest-games-container .display-mode-toggle,\n#latest-games-container .control-button {\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  margin-left: 6px;\n  border-radius: 4px;\n  transition: background 0.15s;\n  user-select: none;\n}\n#latest-games-container .theme-toggle svg,\n#latest-games-container .display-mode-toggle svg,\n#latest-games-container .control-button svg {\n  width: 16px;\n  height: 16px;\n  display: block;\n  transition: stroke 0.2s, fill 0.2s;\n}\n#latest-games-container .theme-toggle svg.feather-sun,\n#latest-games-container .display-mode-toggle svg.feather-sun,\n#latest-games-container .control-button svg.feather-sun {\n  stroke: var(--rg-icon-theme-sun);\n  fill: none;\n  stroke-width: 2;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n#latest-games-container .theme-toggle svg.feather-moon,\n#latest-games-container .display-mode-toggle svg.feather-moon,\n#latest-games-container .control-button svg.feather-moon {\n  stroke: var(--rg-icon-theme-moon);\n  fill: none;\n  stroke-width: 2;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n#latest-games-container .control-button {\n  margin: 0 2px;\n  padding: 0;\n  box-sizing: border-box;\n}\n#latest-games-container .control-button svg {\n  pointer-events: none;\n}\n\n#latest-games-hover-area {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 1px;\n  height: 100vh;\n  z-index: 3100;\n  background-color: transparent;\n  pointer-events: auto;\n}`, \"\"]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/styles.scss?./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

eval("\r\n\r\n/*\r\n  MIT License http://www.opensource.org/licenses/mit-license.php\r\n  Author Tobias Koppers @sokra\r\n*/\r\nmodule.exports = function (cssWithMappingToString) {\r\n  var list = [];\r\n\r\n  // return the list of modules as css string\r\n  list.toString = function toString() {\r\n    return this.map(function (item) {\r\n      var content = \"\";\r\n      var needLayer = typeof item[5] !== \"undefined\";\r\n      if (item[4]) {\r\n        content += \"@supports (\".concat(item[4], \") {\");\r\n      }\r\n      if (item[2]) {\r\n        content += \"@media \".concat(item[2], \" {\");\r\n      }\r\n      if (needLayer) {\r\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\r\n      }\r\n      content += cssWithMappingToString(item);\r\n      if (needLayer) {\r\n        content += \"}\";\r\n      }\r\n      if (item[2]) {\r\n        content += \"}\";\r\n      }\r\n      if (item[4]) {\r\n        content += \"}\";\r\n      }\r\n      return content;\r\n    }).join(\"\");\r\n  };\r\n\r\n  // import a list of modules into the list\r\n  list.i = function i(modules, media, dedupe, supports, layer) {\r\n    if (typeof modules === \"string\") {\r\n      modules = [[null, modules, undefined]];\r\n    }\r\n    var alreadyImportedModules = {};\r\n    if (dedupe) {\r\n      for (var k = 0; k < this.length; k++) {\r\n        var id = this[k][0];\r\n        if (id != null) {\r\n          alreadyImportedModules[id] = true;\r\n        }\r\n      }\r\n    }\r\n    for (var _k = 0; _k < modules.length; _k++) {\r\n      var item = [].concat(modules[_k]);\r\n      if (dedupe && alreadyImportedModules[item[0]]) {\r\n        continue;\r\n      }\r\n      if (typeof layer !== \"undefined\") {\r\n        if (typeof item[5] === \"undefined\") {\r\n          item[5] = layer;\r\n        } else {\r\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\r\n          item[5] = layer;\r\n        }\r\n      }\r\n      if (media) {\r\n        if (!item[2]) {\r\n          item[2] = media;\r\n        } else {\r\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\r\n          item[2] = media;\r\n        }\r\n      }\r\n      if (supports) {\r\n        if (!item[4]) {\r\n          item[4] = \"\".concat(supports);\r\n        } else {\r\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\r\n          item[4] = supports;\r\n        }\r\n      }\r\n      list.push(item);\r\n    }\r\n  };\r\n  return list;\r\n};\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/css-loader/dist/runtime/api.js?");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/noSourceMaps.js":
/*!**************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/noSourceMaps.js ***!
  \**************************************************************/
/***/ ((module) => {

eval("\r\n\r\nmodule.exports = function (i) {\r\n  return i[1];\r\n};\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/css-loader/dist/runtime/noSourceMaps.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {

eval("\r\n\r\nvar stylesInDOM = [];\r\nfunction getIndexByIdentifier(identifier) {\r\n  var result = -1;\r\n  for (var i = 0; i < stylesInDOM.length; i++) {\r\n    if (stylesInDOM[i].identifier === identifier) {\r\n      result = i;\r\n      break;\r\n    }\r\n  }\r\n  return result;\r\n}\r\nfunction modulesToDom(list, options) {\r\n  var idCountMap = {};\r\n  var identifiers = [];\r\n  for (var i = 0; i < list.length; i++) {\r\n    var item = list[i];\r\n    var id = options.base ? item[0] + options.base : item[0];\r\n    var count = idCountMap[id] || 0;\r\n    var identifier = \"\".concat(id, \" \").concat(count);\r\n    idCountMap[id] = count + 1;\r\n    var indexByIdentifier = getIndexByIdentifier(identifier);\r\n    var obj = {\r\n      css: item[1],\r\n      media: item[2],\r\n      sourceMap: item[3],\r\n      supports: item[4],\r\n      layer: item[5]\r\n    };\r\n    if (indexByIdentifier !== -1) {\r\n      stylesInDOM[indexByIdentifier].references++;\r\n      stylesInDOM[indexByIdentifier].updater(obj);\r\n    } else {\r\n      var updater = addElementStyle(obj, options);\r\n      options.byIndex = i;\r\n      stylesInDOM.splice(i, 0, {\r\n        identifier: identifier,\r\n        updater: updater,\r\n        references: 1\r\n      });\r\n    }\r\n    identifiers.push(identifier);\r\n  }\r\n  return identifiers;\r\n}\r\nfunction addElementStyle(obj, options) {\r\n  var api = options.domAPI(options);\r\n  api.update(obj);\r\n  var updater = function updater(newObj) {\r\n    if (newObj) {\r\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\r\n        return;\r\n      }\r\n      api.update(obj = newObj);\r\n    } else {\r\n      api.remove();\r\n    }\r\n  };\r\n  return updater;\r\n}\r\nmodule.exports = function (list, options) {\r\n  options = options || {};\r\n  list = list || [];\r\n  var lastIdentifiers = modulesToDom(list, options);\r\n  return function update(newList) {\r\n    newList = newList || [];\r\n    for (var i = 0; i < lastIdentifiers.length; i++) {\r\n      var identifier = lastIdentifiers[i];\r\n      var index = getIndexByIdentifier(identifier);\r\n      stylesInDOM[index].references--;\r\n    }\r\n    var newLastIdentifiers = modulesToDom(newList, options);\r\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\r\n      var _identifier = lastIdentifiers[_i];\r\n      var _index = getIndexByIdentifier(_identifier);\r\n      if (stylesInDOM[_index].references === 0) {\r\n        stylesInDOM[_index].updater();\r\n        stylesInDOM.splice(_index, 1);\r\n      }\r\n    }\r\n    lastIdentifiers = newLastIdentifiers;\r\n  };\r\n};\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {

eval("\r\n\r\nvar memo = {};\r\n\r\n/* istanbul ignore next  */\r\nfunction getTarget(target) {\r\n  if (typeof memo[target] === \"undefined\") {\r\n    var styleTarget = document.querySelector(target);\r\n\r\n    // Special case to return head of iframe instead of iframe itself\r\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\r\n      try {\r\n        // This will throw an exception if access to iframe is blocked\r\n        // due to cross-origin restrictions\r\n        styleTarget = styleTarget.contentDocument.head;\r\n      } catch (e) {\r\n        // istanbul ignore next\r\n        styleTarget = null;\r\n      }\r\n    }\r\n    memo[target] = styleTarget;\r\n  }\r\n  return memo[target];\r\n}\r\n\r\n/* istanbul ignore next  */\r\nfunction insertBySelector(insert, style) {\r\n  var target = getTarget(insert);\r\n  if (!target) {\r\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\r\n  }\r\n  target.appendChild(style);\r\n}\r\nmodule.exports = insertBySelector;\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/insertBySelector.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {

eval("\r\n\r\n/* istanbul ignore next  */\r\nfunction insertStyleElement(options) {\r\n  var element = document.createElement(\"style\");\r\n  options.setAttributes(element, options.attributes);\r\n  options.insert(element, options.options);\r\n  return element;\r\n}\r\nmodule.exports = insertStyleElement;\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/insertStyleElement.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\r\n\r\n/* istanbul ignore next  */\r\nfunction setAttributesWithoutAttributes(styleElement) {\r\n  var nonce =  true ? __webpack_require__.nc : 0;\r\n  if (nonce) {\r\n    styleElement.setAttribute(\"nonce\", nonce);\r\n  }\r\n}\r\nmodule.exports = setAttributesWithoutAttributes;\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {

eval("\r\n\r\n/* istanbul ignore next  */\r\nfunction apply(styleElement, options, obj) {\r\n  var css = \"\";\r\n  if (obj.supports) {\r\n    css += \"@supports (\".concat(obj.supports, \") {\");\r\n  }\r\n  if (obj.media) {\r\n    css += \"@media \".concat(obj.media, \" {\");\r\n  }\r\n  var needLayer = typeof obj.layer !== \"undefined\";\r\n  if (needLayer) {\r\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\r\n  }\r\n  css += obj.css;\r\n  if (needLayer) {\r\n    css += \"}\";\r\n  }\r\n  if (obj.media) {\r\n    css += \"}\";\r\n  }\r\n  if (obj.supports) {\r\n    css += \"}\";\r\n  }\r\n  var sourceMap = obj.sourceMap;\r\n  if (sourceMap && typeof btoa !== \"undefined\") {\r\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\r\n  }\r\n\r\n  // For old IE\r\n  /* istanbul ignore if  */\r\n  options.styleTagTransform(css, styleElement, options.options);\r\n}\r\nfunction removeStyleElement(styleElement) {\r\n  // istanbul ignore if\r\n  if (styleElement.parentNode === null) {\r\n    return false;\r\n  }\r\n  styleElement.parentNode.removeChild(styleElement);\r\n}\r\n\r\n/* istanbul ignore next  */\r\nfunction domAPI(options) {\r\n  if (typeof document === \"undefined\") {\r\n    return {\r\n      update: function update() {},\r\n      remove: function remove() {}\r\n    };\r\n  }\r\n  var styleElement = options.insertStyleElement(options);\r\n  return {\r\n    update: function update(obj) {\r\n      apply(styleElement, options, obj);\r\n    },\r\n    remove: function remove() {\r\n      removeStyleElement(styleElement);\r\n    }\r\n  };\r\n}\r\nmodule.exports = domAPI;\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/styleDomAPI.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {

eval("\r\n\r\n/* istanbul ignore next  */\r\nfunction styleTagTransform(css, styleElement) {\r\n  if (styleElement.styleSheet) {\r\n    styleElement.styleSheet.cssText = css;\r\n  } else {\r\n    while (styleElement.firstChild) {\r\n      styleElement.removeChild(styleElement.firstChild);\r\n    }\r\n    styleElement.appendChild(document.createTextNode(css));\r\n  }\r\n}\r\nmodule.exports = styleTagTransform;\n\n//# sourceURL=webpack://tampermonkey-script/./node_modules/style-loader/dist/runtime/styleTagTransform.js?");

/***/ }),

/***/ "./src/icons.js":
/*!**********************!*\
  !*** ./src/icons.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   icons: () => (/* binding */ icons)\n/* harmony export */ });\nconst icons = {\r\n  sun: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"feather feather-sun\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"5\"></circle><line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\"></line><line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\"></line><line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\"></line><line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\"></line><line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\"></line><line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\"></line><line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\"></line><line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\"></line></svg>`,\r\n\r\n  moon: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"feather feather-moon\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\"></path></svg>`,\r\n\r\n  pin: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.4\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-anchor\"><circle cx=\"12\" cy=\"5\" r=\"3\"></circle><line x1=\"12\" y1=\"22\" x2=\"12\" y2=\"8\"></line><path d=\"M5 12H2a10 10 0 0 0 20 0h-3\"></path></svg>`,\r\n\r\n  delete: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.4\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line></svg>`,\r\n\r\n  decrease: `<svg viewBox=\"0 0 24 24\"><path d=\"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z\" fill=\"currentColor\"/></svg>`,\r\n\r\n  increase: `<svg viewBox=\"0 0 24 24\"><path d=\"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z\" fill=\"currentColor\"/></svg>`,\r\n\r\n  pinAll: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect><path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path></svg>`,\r\n\r\n  unpinAll: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect><path d=\"M7 11V7a5 5 0 0 1 9.9-1\"></path></svg>`,\r\n\r\n  import: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"7 10 12 15 17 10\"></polyline><line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line></svg>`,\r\n\r\n  export: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"17 8 12 3 7 8\"></polyline><line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line></svg>`,\r\n\r\n  removeAll: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"3 6 5 6 21 6\"></polyline><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path></svg>`,\r\n\r\n  wrap: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"3\" y=\"3\" width=\"7\" height=\"7\"/><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\"/><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\"/><rect x=\"3\" y=\"14\" width=\"7\" height=\"7\"/></svg>`,\r\n\r\n  scroll: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"2\"/><line x1=\"4\" y1=\"9\" x2=\"20\" y2=\"9\"/><line x1=\"4\" y1=\"15\" x2=\"20\" y2=\"15\"/></svg>`,\r\n};\n\n//# sourceURL=webpack://tampermonkey-script/./src/icons.js?");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _icons__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons */ \"./src/icons.js\");\n/* harmony import */ var _styles_scss__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./styles.scss */ \"./src/styles.scss\");\n\r\n\r\n\r\n// Utility to generate a unique random string id\r\nfunction generateRandomId() {\r\n  return Array.from(crypto.getRandomValues(new Uint8Array(9)))\r\n    .map(b => (b % 36).toString(36))\r\n    .join('');\r\n}\r\n\r\nclass LatestGamesManager {\r\n  constructor() {\r\n    this.maxGameCount = 5;\r\n    this.gameData = [];\r\n    this.hoverTimeout = null;\r\n    this.isHovered = false;\r\n    this.isDragging = false;\r\n    this.wasDragging = false;\r\n    this.dragThreshold = 50;\r\n    this.draggedElement = null;\r\n    this.dragOffset = { x: 0, y: 0 };\r\n    this.dragDirection = 0;\r\n    this.lastDragDirection = 0;\r\n    this.rotationAccumulator = 0;\r\n    this.rotationDegreeLimit = 5;\r\n    this.lastDragY = 0;\r\n    this.hidePanelDelay = 1000;\r\n    this.globalEvents = {};\r\n\r\n    this.gameTypes = {\r\n      normal: 'Oбычный',\r\n      abra: 'Абракадабра',\r\n      referats: 'Яндекс.Рефераты',\r\n      noerror: 'Безошибочный',\r\n      marathon: 'Марафон',\r\n      chars: 'Буквы',\r\n      digits: 'Цифры',\r\n      sprint: 'Спринт',\r\n      voc: 'По словарю'\r\n    };\r\n\r\n    this.visibilities = {\r\n      normal: 'открытый',\r\n      private: 'дружеский',\r\n      practice: 'одиночный'\r\n    };\r\n\r\n    this.ranks = [\r\n      \"новички\", \"любители\", \"таксисты\", \"профи\",\r\n      \"гонщики\", \"маньяки\", \"супермены\", \"кибергонщики\", \"экстракиберы\"\r\n    ];\r\n\r\n    this.ranksMap = {\r\n      'новичков': 1, 'любителей': 2, 'таксистов': 3, 'профи': 4,\r\n      'гонщиков': 5, 'маньяков': 6, 'суперменов': 7,\r\n      'кибергонщиков': 8, 'экстракиберов': 9\r\n    };\r\n\r\n    this.currentTheme = localStorage.getItem('latest_games_theme') || 'light';\r\n\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.loadSettings();\r\n    this.loadGameData();\r\n    this.createHoverArea();\r\n    this.createContainer();\r\n    this.handlePageSpecificLogic();\r\n    this.exposeGlobalFunctions();\r\n    this.applyTheme();\r\n  }\r\n\r\n  applyTheme() {\r\n    const container = document.getElementById('latest-games-container');\r\n    if (container) {\r\n      container.classList.remove('light-theme', 'dark-theme');\r\n      container.classList.add(`${this.currentTheme}-theme`);\r\n    }\r\n  }\r\n\r\n  updateThemeIcon(svg) {\r\n    svg.innerHTML = this.currentTheme === 'light' ? _icons__WEBPACK_IMPORTED_MODULE_0__.icons.sun : _icons__WEBPACK_IMPORTED_MODULE_0__.icons.moon;\r\n  }\r\n\r\n  updateThemeToggle() {\r\n    const svg = document.querySelector('#latest-games-container .theme-toggle svg');\r\n    if (svg) {\r\n      this.updateThemeIcon(svg);\r\n    }\r\n  }\r\n\r\n  toggleTheme() {\r\n    this.currentTheme = this.currentTheme === 'light' ? 'dark' : 'light';\r\n    localStorage.setItem('latest_games_theme', this.currentTheme);\r\n    this.applyTheme();\r\n    this.updateThemeToggle();\r\n  }\r\n\r\n  createThemeToggle() {\r\n    const toggleButton = this.createElement('div', {\r\n      className: 'theme-toggle control-button',\r\n      title: 'Изменить тему (Светлая/Темная)'\r\n    });\r\n\r\n    const svg = this.createElement('svg', {\r\n      viewBox: '0 0 24 24'\r\n    });\r\n\r\n    this.updateThemeIcon(svg);\r\n    toggleButton.appendChild(svg);\r\n\r\n    toggleButton.addEventListener('click', () => {\r\n      this.toggleTheme();\r\n    });\r\n\r\n    return toggleButton;\r\n  }\r\n\r\n  createDisplayModeToggle() {\r\n    const displayMode = this.getDisplayMode();\r\n    const toggleButton = this.createElement('div', {\r\n      className: 'display-mode-toggle control-button',\r\n      title: 'Переключить режим отображения (Вертикальный/Горизонтальный)'\r\n    });\r\n    const svg = this.createElement('svg', {\r\n      viewBox: '0 0 24 24'\r\n    });\r\n    this.updateDisplayModeIcon(svg, displayMode);\r\n    toggleButton.appendChild(svg);\r\n    toggleButton.addEventListener('click', () => {\r\n      const newMode = this.getDisplayMode() === 'scroll' ? 'wrap' : 'scroll';\r\n      this.setDisplayMode(newMode);\r\n      this.updateDisplayModeIcon(svg, newMode);\r\n      this.updateDisplayModeClass();\r\n    });\r\n    return toggleButton;\r\n  }\r\n\r\n  getDisplayMode() {\r\n    return localStorage.getItem('latest_games_display_mode') || 'scroll';\r\n  }\r\n\r\n  setDisplayMode(mode) {\r\n    localStorage.setItem('latest_games_display_mode', mode);\r\n  }\r\n\r\n  updateDisplayModeIcon(svg, mode) {\r\n    svg.innerHTML = mode === 'wrap' ? _icons__WEBPACK_IMPORTED_MODULE_0__.icons.wrap : _icons__WEBPACK_IMPORTED_MODULE_0__.icons.scroll;\r\n  }\r\n\r\n  updateDisplayModeClass() {\r\n    const container = document.getElementById('latest-games-container');\r\n    const gamesList = document.getElementById('latest-games');\r\n    if (!container || !gamesList) return;\r\n    const mode = this.getDisplayMode();\r\n    container.classList.toggle('display-mode-wrap', mode === 'wrap');\r\n    gamesList.classList.toggle('display-mode-wrap', mode === 'wrap');\r\n    this.updateContainerLeftOffset();\r\n  }\r\n\r\n  updateContainerLeftOffset() {\r\n    const container = document.getElementById('latest-games-container');\r\n    if (!container) return;\r\n    const mode = this.getDisplayMode();\r\n    if (mode === 'wrap') {\r\n      container.style.left = 'calc(-1 * (100vw - 100px))';\r\n    } else {\r\n      container.style.left = '-350px';\r\n    }\r\n  }\r\n\r\n  createGameElement(game, id) {\r\n    const gametypeClass = game.pin ? ` pin-gametype-${game.params.gametype}` : '';\r\n    const li = this.createElement('li', {\r\n      className: `latest-game${game.pin ? ' pin-game' : ''}${gametypeClass}`,\r\n      id: `latest-game-${id}`\r\n    });\r\n\r\n    const buttons = this.createElement('div', {\r\n      className: 'latest-game-buttons'\r\n    });\r\n\r\n    const pinButton = this.createElement('div', {\r\n      className: 'latest-game-pin',\r\n      title: game.pin ? 'Открепить' : 'Закрепить',\r\n      innerHTML: _icons__WEBPACK_IMPORTED_MODULE_0__.icons.pin\r\n    });\r\n    pinButton.addEventListener('click', () => this.pinGame(id));\r\n\r\n    const deleteButton = this.createElement('div', {\r\n      className: 'latest-game-delete',\r\n      title: 'Удалить',\r\n      innerHTML: _icons__WEBPACK_IMPORTED_MODULE_0__.icons.delete\r\n    });\r\n    deleteButton.addEventListener('click', () => this.deleteGame(id));\r\n\r\n    buttons.appendChild(pinButton);\r\n    buttons.appendChild(deleteButton);\r\n\r\n    const link = this.createElement('a', {\r\n      href: this.generateGameLink(game),\r\n      innerHTML: this.generateGameName(game)\r\n    });\r\n\r\n    link.addEventListener('click', (e) => {\r\n      if (this.wasDragging) {\r\n        e.preventDefault();\r\n        this.wasDragging = false;\r\n      }\r\n    });\r\n\r\n    li.appendChild(buttons);\r\n    li.appendChild(link);\r\n\r\n    if (game.pin) {\r\n      this.addDragFunctionality(li, id);\r\n    }\r\n\r\n    return li;\r\n  }\r\n\r\n  createControls() {\r\n    const controlsContainer = this.createElement('div', {\r\n      className: 'latest-games-controls'\r\n    });\r\n\r\n    const pinAllBtn = this.createElement('span', {\r\n      className: 'latest-games-pinall control-button',\r\n      title: 'Закрепить все',\r\n      innerHTML: _icons__WEBPACK_IMPORTED_MODULE_0__.icons.pinAll\r\n    });\r\n    pinAllBtn.onclick = () => {\r\n      this.gameData.forEach(g => g.pin = 1);\r\n      this.saveGameData();\r\n      this.refreshContainer();\r\n    };\r\n\r\n    const unpinAllBtn = this.createElement('span', {\r\n      className: 'latest-games-unpinall control-button',\r\n      title: 'Открепить все',\r\n      innerHTML: _icons__WEBPACK_IMPORTED_MODULE_0__.icons.unpinAll\r\n    });\r\n    unpinAllBtn.onclick = () => {\r\n      this.gameData.forEach(g => g.pin = 0);\r\n      this.saveGameData();\r\n      this.refreshContainer();\r\n    };\r\n\r\n    const importBtn = this.createElement('span', {\r\n      className: 'latest-games-import control-button',\r\n      title: 'Импортировать настройки из JSON файла',\r\n      innerHTML: _icons__WEBPACK_IMPORTED_MODULE_0__.icons.import\r\n    });\r\n    importBtn.onclick = () => {\r\n      const input = document.createElement('input');\r\n      input.type = 'file';\r\n      input.accept = '.json,application/json';\r\n      input.style.display = 'none';\r\n      input.onchange = async (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        try {\r\n          const text = await file.text();\r\n          const data = JSON.parse(text);\r\n          if (typeof data === 'object' && data !== null) {\r\n            if (data.latest_games) localStorage.setItem('latest_games', JSON.stringify(data.latest_games));\r\n            if (data.latest_games_limit) localStorage.setItem('latest_games_limit', data.latest_games_limit);\r\n            if (data.latest_games_theme) localStorage.setItem('latest_games_theme', data.latest_games_theme);\r\n            if (data.latest_games_display_mode) localStorage.setItem('latest_games_display_mode', data.latest_games_display_mode);\r\n            if (data.latest_games_scroll) localStorage.setItem('latest_games_scroll', data.latest_games_scroll);\r\n            this.loadSettings();\r\n            this.loadGameData();\r\n            this.refreshContainer();\r\n          } else {\r\n            alert('Файл не содержит валидный JSON настроек.');\r\n          }\r\n        } catch (err) {\r\n          alert('Ошибка при импорте: ' + err);\r\n        }\r\n      };\r\n      document.body.appendChild(input);\r\n      input.click();\r\n      setTimeout(() => input.remove(), 1000);\r\n    };\r\n\r\n    const exportBtn = this.createElement('span', {\r\n      className: 'latest-games-export control-button',\r\n      title: 'Экспортировать все настройки в JSON файл',\r\n      innerHTML: _icons__WEBPACK_IMPORTED_MODULE_0__.icons.export\r\n    });\r\n    exportBtn.onclick = () => {\r\n      const all = {\r\n        latest_games: JSON.parse(localStorage.getItem('latest_games') || '[]'),\r\n        latest_games_limit: localStorage.getItem('latest_games_limit'),\r\n        latest_games_theme: localStorage.getItem('latest_games_theme'),\r\n        latest_games_display_mode: localStorage.getItem('latest_games_display_mode'),\r\n        latest_games_scroll: localStorage.getItem('latest_games_scroll')\r\n      };\r\n      const blob = new Blob([JSON.stringify(all, null, 2)], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = 'kg-latest-games-settings.json';\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      setTimeout(() => {\r\n        URL.revokeObjectURL(url);\r\n        a.remove();\r\n      }, 1000);\r\n    };\r\n\r\n    const removeAllBtn = this.createElement('span', {\r\n      className: 'latest-games-removeall control-button',\r\n      title: 'Удалить все настройки',\r\n      innerHTML: _icons__WEBPACK_IMPORTED_MODULE_0__.icons.removeAll\r\n    });\r\n    removeAllBtn.onclick = () => {\r\n      localStorage.removeItem('latest_games');\r\n      localStorage.removeItem('latest_games_limit');\r\n      localStorage.removeItem('latest_games_scroll');\r\n      this.gameData = [];\r\n      this.saveGameData();\r\n      this.refreshContainer();\r\n    };\r\n\r\n    const options = this.createElement('span', {\r\n      id: 'latest-games-options'\r\n    });\r\n\r\n    const decreaseBtn = this.createElement('span', {\r\n      id: 'latest-games-count-dec',\r\n      className: 'control-button',\r\n      title: 'Уменьшить количество сохраняемых игр',\r\n      innerHTML: _icons__WEBPACK_IMPORTED_MODULE_0__.icons.decrease\r\n    });\r\n\r\n    const countDisplay = this.createElement('span', {\r\n      id: 'latest-games-count',\r\n      textContent: this.maxGameCount.toString()\r\n    });\r\n\r\n    const increaseBtn = this.createElement('span', {\r\n      id: 'latest-games-count-inc',\r\n      className: 'control-button',\r\n      title: 'Увеличить количество сохраняемых игр',\r\n      innerHTML: _icons__WEBPACK_IMPORTED_MODULE_0__.icons.increase\r\n    });\r\n\r\n    decreaseBtn.addEventListener('click', () => this.changeGameCount(-1));\r\n    increaseBtn.addEventListener('click', () => this.changeGameCount(1));\r\n\r\n    options.appendChild(decreaseBtn);\r\n    options.appendChild(countDisplay);\r\n    options.appendChild(increaseBtn);\r\n\r\n    controlsContainer.appendChild(options);\r\n    controlsContainer.appendChild(this.createThemeToggle());\r\n    controlsContainer.appendChild(this.createDisplayModeToggle());\r\n    controlsContainer.appendChild(pinAllBtn);\r\n    controlsContainer.appendChild(unpinAllBtn);\r\n    controlsContainer.appendChild(importBtn);\r\n    controlsContainer.appendChild(exportBtn);\r\n    controlsContainer.appendChild(removeAllBtn);\r\n\r\n    return controlsContainer;\r\n  }\r\n\r\n  createContainer() {\r\n    const container = this.createElement('div', {\r\n      id: 'latest-games-container'\r\n    });\r\n\r\n    const gamesList = this.createElement('ul', {\r\n      id: 'latest-games'\r\n    });\r\n\r\n    this.populateGamesList(gamesList);\r\n    container.appendChild(gamesList);\r\n    const controls = this.createControls();\r\n    container.appendChild(controls);\r\n\r\n    // Apply saved scroll position\r\n    const savedScroll = localStorage.getItem('latest_games_scroll');\r\n    if (savedScroll) {\r\n      container.scrollTop = parseInt(savedScroll, 10);\r\n    }\r\n\r\n    container.addEventListener('scroll', () => {\r\n      localStorage.setItem('latest_games_scroll', container.scrollTop.toString());\r\n    });\r\n\r\n    container.addEventListener('mouseenter', () => {\r\n      this.showContainer();\r\n      const savedScroll = localStorage.getItem('latest_games_scroll');\r\n      if (savedScroll) {\r\n        container.scrollTop = parseInt(savedScroll, 10);\r\n      }\r\n    });\r\n\r\n    container.addEventListener('mouseleave', () => {\r\n      this.hideContainerWithDelay();\r\n    });\r\n\r\n    // Always add the resize handle as part of the panel\r\n    let handle = container.querySelector('.resize-handle');\r\n    if (!handle) {\r\n      handle = this.createElement('div', { className: 'resize-handle' });\r\n      container.appendChild(handle);\r\n    }\r\n\r\n    // Resize logic: only active in wrap mode\r\n    const setupResizeHandle = () => {\r\n      const mode = this.getDisplayMode();\r\n      if (mode === 'wrap') {\r\n        // Apply stored width if available\r\n        const storedWidth = localStorage.getItem('latestGamesContainerWidth') || '95vw';\r\n        container.style.width = storedWidth;\r\n        handle.style.display = '';\r\n        let isDragging = false, startX, startWidth;\r\n        const onMouseMove = (e) => {\r\n          if (!isDragging) return;\r\n          const dx = e.clientX - startX;\r\n          let newWidthPx = startWidth + dx;\r\n          // Prevent going beyond viewport and 95vw\r\n          const maxPx = window.innerWidth * 0.95;\r\n          newWidthPx = Math.max(200, Math.min(newWidthPx, maxPx));\r\n          const newWidthVw = Math.round((newWidthPx / window.innerWidth) * 100 * 10) / 10;\r\n          container.style.width = `${newWidthVw}vw`;\r\n        };\r\n        const onMouseUp = () => {\r\n          if (!isDragging) return;\r\n          isDragging = false;\r\n          document.removeEventListener('mousemove', onMouseMove);\r\n          document.removeEventListener('mouseup', onMouseUp);\r\n          localStorage.setItem('latestGamesContainerWidth', container.style.width);\r\n        };\r\n        handle.onmousedown = (e) => {\r\n          isDragging = true;\r\n          startX = e.clientX;\r\n          startWidth = container.offsetWidth;\r\n          document.addEventListener('mousemove', onMouseMove);\r\n          document.addEventListener('mouseup', onMouseUp);\r\n          e.preventDefault();\r\n        };\r\n      } else {\r\n        handle.style.display = 'none';\r\n        container.style.width = '';\r\n        handle.onmousedown = null;\r\n      }\r\n    };\r\n\r\n    // Call once on creation\r\n    setupResizeHandle();\r\n    document.body.appendChild(container);\r\n    this.updateDisplayModeClass();\r\n    // Patch updateDisplayModeClass to also update the handle\r\n    const origUpdateDisplayModeClass = this.updateDisplayModeClass.bind(this);\r\n    this.updateDisplayModeClass = (...args) => {\r\n      origUpdateDisplayModeClass(...args);\r\n      setupResizeHandle();\r\n    };\r\n  }\r\n\r\n  loadSettings() {\r\n    try {\r\n      const savedLimit = localStorage.getItem('latest_games_limit');\r\n      if (savedLimit) {\r\n        this.maxGameCount = Math.max(0, parseInt(savedLimit, 10));\r\n      }\r\n    } catch (error) {\r\n      console.warn('Could not load settings from localStorage:', error);\r\n    }\r\n  }\r\n\r\n  loadGameData() {\r\n    try {\r\n      const savedGames = localStorage.getItem('latest_games');\r\n      if (savedGames) {\r\n        this.gameData = JSON.parse(savedGames);\r\n        this.migrateOldGameData();\r\n        this.assignGameIds();\r\n      }\r\n    } catch (error) {\r\n      console.warn('Could not load game data from localStorage:', error);\r\n      this.gameData = [];\r\n    }\r\n  }\r\n\r\n  migrateOldGameData() {\r\n    this.gameData = this.gameData.map(game => {\r\n      if (game.params.qual === 'on' || game.params.qual === '') {\r\n        game.params.qual = game.params.qual === 'on' ? 1 : 0;\r\n      }\r\n      return game;\r\n    });\r\n  }\r\n\r\n  assignGameIds() {\r\n    this.gameData = this.gameData.map(game => {\r\n      if (!('id' in game) || game.id === -1 || game.id === undefined || game.id === null) {\r\n        return { ...game, id: generateRandomId() };\r\n      }\r\n      return game;\r\n    });\r\n  }\r\n\r\n  saveGameData() {\r\n    try {\r\n      localStorage.setItem('latest_games', JSON.stringify(this.gameData));\r\n    } catch (error) {\r\n      console.warn('Could not save game data to localStorage:', error);\r\n    }\r\n  }\r\n\r\n  saveSettings() {\r\n    try {\r\n      localStorage.setItem('latest_games_limit', this.maxGameCount.toString());\r\n    } catch (error) {\r\n      console.warn('Could not save settings to localStorage:', error);\r\n    }\r\n  }\r\n\r\n  createElement(tag, options = {}) {\r\n    const element = document.createElement(tag);\r\n\r\n    if (options.className) {\r\n      element.className = options.className;\r\n    }\r\n\r\n    if (options.id) {\r\n      element.id = options.id;\r\n    }\r\n\r\n    if (options.innerHTML) {\r\n      element.innerHTML = options.innerHTML;\r\n    }\r\n\r\n    if (options.textContent) {\r\n      element.textContent = options.textContent;\r\n    }\r\n\r\n    if (options.href) {\r\n      element.href = options.href;\r\n    }\r\n\r\n    if (options.title) {\r\n      element.title = options.title;\r\n    }\r\n\r\n    if (options.src) {\r\n      element.src = options.src;\r\n    }\r\n\r\n    if (options.style) {\r\n      Object.assign(element.style, options.style);\r\n    }\r\n\r\n    if (options.attributes) {\r\n      Object.entries(options.attributes).forEach(([key, value]) => {\r\n        element.setAttribute(key, value);\r\n      });\r\n    }\r\n\r\n    return element;\r\n  }\r\n\r\n  generateGameName(game) {\r\n    const gameType = this.gameTypes[game.params.gametype];\r\n    const { vocName, timeout, type: visibility, level_from, level_to, qual } = game.params;\r\n\r\n    const nameSpan = this.createElement('span', {\r\n      className: `latest-game-name gametype-${game.params.gametype}`,\r\n      textContent: vocName === '' ? gameType : `«${vocName}»`\r\n    });\r\n\r\n    const descSpan = this.createElement('span', {\r\n      className: 'latest-game-description'\r\n    });\r\n\r\n    const qualSpan = this.createElement('span', {\r\n      className: 'latest-game-qual',\r\n      textContent: qual ? ' (к)' : ''\r\n    });\r\n\r\n    let levelText = '';\r\n    if (level_from !== 1 || level_to !== 9) {\r\n      const levelFromName = this.ranks[level_from - 1];\r\n      const levelToName = this.ranks[level_to - 1];\r\n      levelText = ` ${levelFromName} - ${levelToName}`;\r\n    }\r\n\r\n    const levelsSpan = this.createElement('span', {\r\n      className: 'latest-game-levels',\r\n      textContent: levelText\r\n    });\r\n\r\n    descSpan.textContent = `${this.visibilities[visibility]}, ${timeout} сек.`;\r\n    descSpan.appendChild(qualSpan);\r\n    if (levelText) {\r\n      descSpan.appendChild(levelsSpan);\r\n    }\r\n\r\n    const container = this.createElement('div');\r\n    container.appendChild(nameSpan);\r\n    container.appendChild(descSpan);\r\n\r\n    return container.innerHTML;\r\n  }\r\n\r\n  generateGameLink(game) {\r\n    const { gametype, vocId, type, level_from, level_to, timeout, qual } = game.params;\r\n\r\n    const params = new URLSearchParams({\r\n      gametype,\r\n      type,\r\n      level_from: level_from.toString(),\r\n      level_to: level_to.toString(),\r\n      timeout: timeout.toString(),\r\n      submit: '1'\r\n    });\r\n\r\n    if (vocId !== '') {\r\n      params.set('voc', vocId);\r\n    }\r\n\r\n    if (qual) {\r\n      params.set('qual', '1');\r\n    }\r\n\r\n    return `${location.protocol}//klavogonki.ru/create/?${params.toString()}`;\r\n  }\r\n\r\n  addDragFunctionality(element) {\r\n    element.addEventListener('mousedown', (e) => {\r\n      this.wasDragging = false;\r\n      this.initialX = e.clientX;\r\n      this.initialY = e.clientY;\r\n\r\n      this.isDragging = true;\r\n      this.draggedElement = element;\r\n      const rect = element.getBoundingClientRect();\r\n      const clickX = e.clientX - rect.left;\r\n      this.isRightHalf = clickX > rect.width / 2;\r\n      this.lastDragY = e.clientY;\r\n      this.dragOffset = {\r\n        x: e.clientX - rect.left,\r\n        y: e.clientY - rect.top\r\n      };\r\n\r\n      element.classList.add('dragging');\r\n\r\n      const displayMode = this.getDisplayMode();\r\n      if (displayMode === 'wrap') {\r\n        element.style.position = 'absolute';\r\n        element.style.left = `${rect.left - element.parentElement.getBoundingClientRect().left}px`;\r\n        element.style.top = `${rect.top - element.parentElement.getBoundingClientRect().top}px`;\r\n        element.style.width = `${rect.width}px`;\r\n      }\r\n\r\n      this.globalEvents.handleDragMove = this.handleDragMove.bind(this);\r\n      this.globalEvents.handleDragEnd = this.handleDragEnd.bind(this);\r\n      document.addEventListener('mousemove', this.globalEvents.handleDragMove);\r\n      document.addEventListener('mouseup', this.globalEvents.handleDragEnd);\r\n    });\r\n  }\r\n\r\n  handleDragMove(e) {\r\n    if (!this.isDragging || !this.draggedElement) return;\r\n\r\n    if (!this.wasDragging) {\r\n      if (Math.abs(e.clientX - this.initialX) > this.dragThreshold ||\r\n        Math.abs(e.clientY - this.initialY) > this.dragThreshold) {\r\n        this.wasDragging = true;\r\n      }\r\n    }\r\n\r\n    e.preventDefault();\r\n\r\n    const displayMode = this.getDisplayMode();\r\n    const gamesList = document.getElementById('latest-games');\r\n\r\n    if (displayMode === 'scroll') {\r\n      const pinnedGames = Array.from(gamesList.querySelectorAll('.pin-game:not(.dragging)'));\r\n      let insertAfter = null;\r\n\r\n      for (const pinnedGame of pinnedGames) {\r\n        const rect = pinnedGame.getBoundingClientRect();\r\n        const middle = rect.top + rect.height / 2;\r\n        if (e.clientY < middle) break;\r\n        insertAfter = pinnedGame;\r\n      }\r\n\r\n      if (insertAfter) {\r\n        gamesList.insertBefore(this.draggedElement, insertAfter.nextSibling);\r\n      } else {\r\n        const firstPinned = gamesList.querySelector('.pin-game:not(.dragging)');\r\n        if (firstPinned) {\r\n          gamesList.insertBefore(this.draggedElement, firstPinned);\r\n        }\r\n      }\r\n    } else {\r\n      const containerRect = gamesList.getBoundingClientRect();\r\n      let newLeft = e.clientX - this.dragOffset.x - containerRect.left;\r\n      let newTop = e.clientY - this.dragOffset.y - containerRect.top;\r\n\r\n      newLeft = Math.max(0, Math.min(newLeft, gamesList.offsetWidth - this.draggedElement.offsetWidth));\r\n      newTop = Math.max(0, Math.min(newTop, gamesList.offsetHeight - this.draggedElement.offsetHeight));\r\n\r\n      this.draggedElement.style.left = `${newLeft}px`;\r\n      this.draggedElement.style.top = `${newTop}px`;\r\n\r\n      const pinnedGames = Array.from(gamesList.querySelectorAll('.pin-game:not(.dragging)'));\r\n      let closestElement = null;\r\n      let minDistance = Infinity;\r\n      const cursorX = e.clientX;\r\n      const cursorY = e.clientY;\r\n\r\n      pinnedGames.forEach(game => {\r\n        const rect = game.getBoundingClientRect();\r\n        const centerX = rect.left + rect.width / 2;\r\n        const centerY = rect.top + rect.height / 2;\r\n        const distance = Math.hypot(cursorX - centerX, cursorY - centerY);\r\n        if (distance < minDistance) {\r\n          minDistance = distance;\r\n          closestElement = game;\r\n        }\r\n      });\r\n\r\n      if (closestElement) {\r\n        const rect = closestElement.getBoundingClientRect();\r\n        const isLeftHalf = cursorX < rect.left + rect.width / 2;\r\n        if (isLeftHalf) {\r\n          gamesList.insertBefore(this.draggedElement, closestElement);\r\n        } else {\r\n          gamesList.insertBefore(this.draggedElement, closestElement.nextSibling);\r\n        }\r\n      }\r\n    }\r\n\r\n    const currentY = e.clientY;\r\n    const deltaY = currentY - this.lastDragY;\r\n    this.lastDragY = currentY;\r\n    if (deltaY !== 0) {\r\n      const sensitivity = 0.2;\r\n      this.rotationAccumulator = (this.rotationAccumulator || 0) + (this.isRightHalf ? deltaY : -deltaY) * sensitivity;\r\n      if (this.rotationAccumulator > this.rotationDegreeLimit) {\r\n        this.rotationAccumulator = this.rotationDegreeLimit;\r\n      } else if (this.rotationAccumulator < -this.rotationDegreeLimit) {\r\n        this.rotationAccumulator = -this.rotationDegreeLimit;\r\n      }\r\n      this.draggedElement.style.transform = `rotate(${this.rotationAccumulator}deg)`;\r\n    }\r\n  }\r\n\r\n  handleDragEnd() {\r\n    if (!this.isDragging || !this.draggedElement) return;\r\n\r\n    this.isDragging = false;\r\n    this.draggedElement.classList.remove('dragging');\r\n\r\n    const displayMode = this.getDisplayMode();\r\n    if (displayMode === 'wrap') {\r\n      this.draggedElement.style.position = '';\r\n      this.draggedElement.style.left = '';\r\n      this.draggedElement.style.top = '';\r\n      this.draggedElement.style.width = '';\r\n    }\r\n    this.draggedElement.style.transform = '';\r\n\r\n    this.updateGameOrderFromDOM();\r\n\r\n    this.draggedElement = null;\r\n    this.dragDirection = 0;\r\n    this.lastDragY = 0;\r\n\r\n    if (this.globalEvents) {\r\n      document.removeEventListener('mousemove', this.globalEvents.handleDragMove);\r\n      document.removeEventListener('mouseup', this.globalEvents.handleDragEnd);\r\n    }\r\n  }\r\n\r\n  updateGameOrderFromDOM() {\r\n    const gameElements = Array.from(document.querySelectorAll('#latest-games .latest-game'));\r\n    const newGameData = [];\r\n\r\n    gameElements.forEach(element => {\r\n      const id = element.id.replace('latest-game-', '');\r\n      const game = this.gameData.find(g => g.id === id);\r\n      if (game) {\r\n        newGameData.push(game);\r\n      }\r\n    });\r\n\r\n    this.gameData = newGameData;\r\n    this.assignGameIds();\r\n    this.saveGameData();\r\n  }\r\n\r\n  getPinnedGameCount() {\r\n    return this.gameData.filter(game => game.pin).length;\r\n  }\r\n\r\n  createHoverArea() {\r\n    const hoverArea = this.createElement('div', {\r\n      id: 'latest-games-hover-area'\r\n    });\r\n\r\n    hoverArea.addEventListener('mouseenter', () => {\r\n      this.showContainer();\r\n    });\r\n\r\n    hoverArea.addEventListener('mouseleave', () => {\r\n      this.hideContainerWithDelay();\r\n    });\r\n\r\n    document.body.appendChild(hoverArea);\r\n  }\r\n\r\n  populateGamesList(gamesList) {\r\n    gamesList.innerHTML = '';\r\n    const pinnedCount = this.getPinnedGameCount();\r\n    const maxGamesToShow = Math.min(this.gameData.length, this.maxGameCount + pinnedCount);\r\n\r\n    for (let i = 0; i < maxGamesToShow; i++) {\r\n      const game = this.gameData[i];\r\n      const gameElement = this.createGameElement(game, game.id);\r\n      gamesList.appendChild(gameElement);\r\n    }\r\n  }\r\n\r\n  showContainer() {\r\n    this.isHovered = true;\r\n    if (this.hoverTimeout) {\r\n      clearTimeout(this.hoverTimeout);\r\n      this.hoverTimeout = null;\r\n    }\r\n    const container = document.getElementById('latest-games-container');\r\n    if (container) {\r\n      container.classList.add('visible');\r\n      container.style.left = '0';\r\n      const savedScroll = localStorage.getItem('latest_games_scroll');\r\n      if (savedScroll !== null) {\r\n        container.scrollTop = parseInt(savedScroll, 10) || 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  hideContainerWithDelay() {\r\n    this.isHovered = false;\r\n    if (this.hoverTimeout) {\r\n      clearTimeout(this.hoverTimeout);\r\n    }\r\n    this.hoverTimeout = setTimeout(() => {\r\n      if (!this.isHovered) {\r\n        const container = document.getElementById('latest-games-container');\r\n        if (container) {\r\n          container.classList.remove('visible');\r\n          this.updateContainerLeftOffset();\r\n        }\r\n      }\r\n    }, this.hidePanelDelay);\r\n  }\r\n\r\n  refreshContainer() {\r\n    const gamesList = document.getElementById('latest-games');\r\n    if (gamesList) {\r\n      this.populateGamesList(gamesList);\r\n      this.updateDisplayModeClass();\r\n    }\r\n  }\r\n\r\n  findGameIndex(id) {\r\n    return this.gameData.findIndex(game => game.id == id);\r\n  }\r\n\r\n  deleteGame(id) {\r\n    const index = this.findGameIndex(id);\r\n    if (index === -1) return null;\r\n\r\n    const deletedGame = this.gameData.splice(index, 1)[0];\r\n    this.assignGameIds();\r\n    this.saveGameData();\r\n    this.refreshContainer();\r\n\r\n    return deletedGame;\r\n  }\r\n\r\n  pinGame(id) {\r\n    const gameIndex = this.findGameIndex(id);\r\n    if (gameIndex === -1) return;\r\n\r\n    const game = this.gameData[gameIndex];\r\n    game.pin = game.pin ? 0 : 1;\r\n\r\n    const insertIndex = game.pin ?\r\n      this.gameData.findIndex(g => !g.pin || g === game) :\r\n      this.gameData.findIndex(g => !g.pin && g !== game);\r\n\r\n    if (gameIndex !== insertIndex) {\r\n      const [gameObject] = this.gameData.splice(gameIndex, 1);\r\n      this.gameData.splice(insertIndex, 0, gameObject);\r\n    }\r\n\r\n    this.assignGameIds();\r\n    this.saveGameData();\r\n    this.refreshContainer();\r\n  }\r\n\r\n  saveCurrentGameParams() {\r\n    const gameDesc = document.getElementById('gamedesc');\r\n    if (!gameDesc) {\r\n      throw new Error('#gamedesc element not found.');\r\n    }\r\n\r\n    const span = gameDesc.querySelector('span');\r\n    if (!span) {\r\n      throw new Error('#gamedesc span element not found.');\r\n    }\r\n\r\n    const descText = gameDesc.textContent;\r\n    if (/соревнование/.test(descText) || !this.maxGameCount) {\r\n      return false;\r\n    }\r\n\r\n    const gameParams = this.parseGameParams(span, descText);\r\n    const gameParamsString = JSON.stringify(gameParams);\r\n\r\n    for (let i = 0; i < this.gameData.length; i++) {\r\n      if (JSON.stringify(this.gameData[i].params) === gameParamsString) {\r\n        if (this.gameData[i].pin) {\r\n          return;\r\n        } else {\r\n          this.gameData.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    const pinnedCount = this.getPinnedGameCount();\r\n    while (this.gameData.length >= this.maxGameCount + pinnedCount) {\r\n      this.gameData.pop();\r\n    }\r\n\r\n    const newGame = {\r\n      params: gameParams,\r\n      id: generateRandomId(),\r\n      pin: 0\r\n    };\r\n\r\n    this.gameData.splice(pinnedCount, 0, newGame);\r\n    this.assignGameIds();\r\n    this.saveGameData();\r\n  }\r\n\r\n  parseGameParams(span, descText) {\r\n    const gameType = span.className.split('-').pop();\r\n    const vocName = gameType === 'voc' ? span.textContent.replace(/[«»]/g, '') : '';\r\n\r\n    let vocId = '';\r\n    if (gameType === 'voc') {\r\n      const vocLink = span.querySelector('a');\r\n      if (vocLink) {\r\n        const match = vocLink.href.match(/vocs\\/(\\d+)/);\r\n        vocId = match ? parseInt(match[1], 10) : '';\r\n      }\r\n    }\r\n\r\n    let type = 'normal';\r\n    if (/одиночный/.test(descText)) {\r\n      type = 'practice';\r\n    } else if (/друзьями/.test(descText)) {\r\n      type = 'private';\r\n    }\r\n\r\n    let levelFrom = 1;\r\n    let levelTo = 9;\r\n    const levelMatches = descText.match(/для (\\S+)–(\\S+),/);\r\n    if (levelMatches) {\r\n      levelFrom = this.ranksMap[levelMatches[1]] || 1;\r\n      levelTo = this.ranksMap[levelMatches[2]] || 9;\r\n    }\r\n\r\n    const timeoutMatches = descText.match(/таймаут\\s(\\d+)\\s(сек|мин)/);\r\n    const timeout = timeoutMatches\r\n      ? (timeoutMatches[2] === 'сек' ? parseInt(timeoutMatches[1], 10) : parseInt(timeoutMatches[1], 10) * 60)\r\n      : 60;\r\n\r\n    const qualification = /квалификация/.test(descText) ? 1 : 0;\r\n\r\n    return {\r\n      gametype: gameType,\r\n      vocName,\r\n      vocId,\r\n      type,\r\n      level_from: levelFrom,\r\n      level_to: levelTo,\r\n      timeout,\r\n      qual: qualification,\r\n      premium_abra: 0\r\n    };\r\n  }\r\n\r\n  changeGameCount(delta) {\r\n    if (delta < 0 && this.maxGameCount > 0) {\r\n      this.maxGameCount--;\r\n    } else if (delta > 0) {\r\n      this.maxGameCount++;\r\n    }\r\n\r\n    const countDisplay = document.getElementById('latest-games-count');\r\n    if (countDisplay) {\r\n      countDisplay.textContent = this.maxGameCount.toString();\r\n    }\r\n\r\n    this.saveSettings();\r\n    this.refreshContainer();\r\n  }\r\n\r\n  handlePageSpecificLogic() {\r\n    const { href } = location;\r\n\r\n    if (/https?:\\/\\/klavogonki\\.ru\\/g\\/\\?gmid=/.test(href)) {\r\n      const gameLoading = document.getElementById('gameloading');\r\n      if (!gameLoading) {\r\n        throw new Error('#gameloading element not found.');\r\n      }\r\n\r\n      if (gameLoading.style.display !== 'none') {\r\n        const observer = new MutationObserver(() => {\r\n          observer.disconnect();\r\n          this.saveCurrentGameParams();\r\n        });\r\n        observer.observe(gameLoading, { attributes: true });\r\n      } else {\r\n        this.saveCurrentGameParams();\r\n      }\r\n    }\r\n  }\r\n\r\n  exposeGlobalFunctions() {\r\n    window.latestGamesManager = this;\r\n  }\r\n}\r\n\r\n(function addMontserratFont() {\r\n  if (!document.getElementById('kg-latest-games-montserrat-font')) {\r\n    const link = document.createElement('link');\r\n    link.id = 'kg-latest-games-montserrat-font';\r\n    link.rel = 'stylesheet';\r\n    link.href = 'https://fonts.googleapis.com/css2?family=Montserrat&display=swap';\r\n    document.head.appendChild(link);\r\n  }\r\n})();\r\n\r\nfunction initializeLatestGames() {\r\n  if (!document.getElementById('KG_LatestGames')) {\r\n    new LatestGamesManager();\r\n\r\n    const marker = document.createElement('div');\r\n    marker.id = 'KTS_LatestGames';\r\n    marker.style.display = 'none';\r\n    document.body.appendChild(marker);\r\n  }\r\n}\r\n\r\ninitializeLatestGames();\n\n//# sourceURL=webpack://tampermonkey-script/./src/main.js?");

/***/ }),

/***/ "./src/styles.scss":
/*!*************************!*\
  !*** ./src/styles.scss ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./styles.scss */ \"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/styles.scss\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_node_modules_sass_loader_dist_cjs_js_styles_scss__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n\n\n//# sourceURL=webpack://tampermonkey-script/./src/styles.scss?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.js");
/******/ 	
/******/ })()
;